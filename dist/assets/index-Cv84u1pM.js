(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();function nI(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var af={exports:{}},Za={},lf={exports:{}},De={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ky;function rI(){if(Ky)return De;Ky=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),w=Symbol.iterator;function E(j){return j===null||typeof j!="object"?null:(j=w&&j[w]||j["@@iterator"],typeof j=="function"?j:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,L={};function D(j,X,ge){this.props=j,this.context=X,this.refs=L,this.updater=ge||P}D.prototype.isReactComponent={},D.prototype.setState=function(j,X){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,X,"setState")},D.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function U(){}U.prototype=D.prototype;function W(j,X,ge){this.props=j,this.context=X,this.refs=L,this.updater=ge||P}var B=W.prototype=new U;B.constructor=W,C(B,D.prototype),B.isPureReactComponent=!0;var J=Array.isArray,ie=Object.prototype.hasOwnProperty,Y={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function I(j,X,ge){var xe,Ce={},Oe=null,ke=null;if(X!=null)for(xe in X.ref!==void 0&&(ke=X.ref),X.key!==void 0&&(Oe=""+X.key),X)ie.call(X,xe)&&!k.hasOwnProperty(xe)&&(Ce[xe]=X[xe]);var Ne=arguments.length-2;if(Ne===1)Ce.children=ge;else if(1<Ne){for(var je=Array(Ne),ot=0;ot<Ne;ot++)je[ot]=arguments[ot+2];Ce.children=je}if(j&&j.defaultProps)for(xe in Ne=j.defaultProps,Ne)Ce[xe]===void 0&&(Ce[xe]=Ne[xe]);return{$$typeof:n,type:j,key:Oe,ref:ke,props:Ce,_owner:Y.current}}function S(j,X){return{$$typeof:n,type:j.type,key:X,ref:j.ref,props:j.props,_owner:j._owner}}function x(j){return typeof j=="object"&&j!==null&&j.$$typeof===n}function N(j){var X={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(ge){return X[ge]})}var V=/\/+/g;function A(j,X){return typeof j=="object"&&j!==null&&j.key!=null?N(""+j.key):X.toString(36)}function ce(j,X,ge,xe,Ce){var Oe=typeof j;(Oe==="undefined"||Oe==="boolean")&&(j=null);var ke=!1;if(j===null)ke=!0;else switch(Oe){case"string":case"number":ke=!0;break;case"object":switch(j.$$typeof){case n:case e:ke=!0}}if(ke)return ke=j,Ce=Ce(ke),j=xe===""?"."+A(ke,0):xe,J(Ce)?(ge="",j!=null&&(ge=j.replace(V,"$&/")+"/"),ce(Ce,X,ge,"",function(ot){return ot})):Ce!=null&&(x(Ce)&&(Ce=S(Ce,ge+(!Ce.key||ke&&ke.key===Ce.key?"":(""+Ce.key).replace(V,"$&/")+"/")+j)),X.push(Ce)),1;if(ke=0,xe=xe===""?".":xe+":",J(j))for(var Ne=0;Ne<j.length;Ne++){Oe=j[Ne];var je=xe+A(Oe,Ne);ke+=ce(Oe,X,ge,je,Ce)}else if(je=E(j),typeof je=="function")for(j=je.call(j),Ne=0;!(Oe=j.next()).done;)Oe=Oe.value,je=xe+A(Oe,Ne++),ke+=ce(Oe,X,ge,je,Ce);else if(Oe==="object")throw X=String(j),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.");return ke}function We(j,X,ge){if(j==null)return j;var xe=[],Ce=0;return ce(j,xe,"","",function(Oe){return X.call(ge,Oe,Ce++)}),xe}function st(j){if(j._status===-1){var X=j._result;X=X(),X.then(function(ge){(j._status===0||j._status===-1)&&(j._status=1,j._result=ge)},function(ge){(j._status===0||j._status===-1)&&(j._status=2,j._result=ge)}),j._status===-1&&(j._status=0,j._result=X)}if(j._status===1)return j._result.default;throw j._result}var $e={current:null},ae={transition:null},ve={ReactCurrentDispatcher:$e,ReactCurrentBatchConfig:ae,ReactCurrentOwner:Y};function le(){throw Error("act(...) is not supported in production builds of React.")}return De.Children={map:We,forEach:function(j,X,ge){We(j,function(){X.apply(this,arguments)},ge)},count:function(j){var X=0;return We(j,function(){X++}),X},toArray:function(j){return We(j,function(X){return X})||[]},only:function(j){if(!x(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},De.Component=D,De.Fragment=t,De.Profiler=o,De.PureComponent=W,De.StrictMode=r,De.Suspense=f,De.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ve,De.act=le,De.cloneElement=function(j,X,ge){if(j==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+j+".");var xe=C({},j.props),Ce=j.key,Oe=j.ref,ke=j._owner;if(X!=null){if(X.ref!==void 0&&(Oe=X.ref,ke=Y.current),X.key!==void 0&&(Ce=""+X.key),j.type&&j.type.defaultProps)var Ne=j.type.defaultProps;for(je in X)ie.call(X,je)&&!k.hasOwnProperty(je)&&(xe[je]=X[je]===void 0&&Ne!==void 0?Ne[je]:X[je])}var je=arguments.length-2;if(je===1)xe.children=ge;else if(1<je){Ne=Array(je);for(var ot=0;ot<je;ot++)Ne[ot]=arguments[ot+2];xe.children=Ne}return{$$typeof:n,type:j.type,key:Ce,ref:Oe,props:xe,_owner:ke}},De.createContext=function(j){return j={$$typeof:u,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},j.Provider={$$typeof:a,_context:j},j.Consumer=j},De.createElement=I,De.createFactory=function(j){var X=I.bind(null,j);return X.type=j,X},De.createRef=function(){return{current:null}},De.forwardRef=function(j){return{$$typeof:d,render:j}},De.isValidElement=x,De.lazy=function(j){return{$$typeof:v,_payload:{_status:-1,_result:j},_init:st}},De.memo=function(j,X){return{$$typeof:m,type:j,compare:X===void 0?null:X}},De.startTransition=function(j){var X=ae.transition;ae.transition={};try{j()}finally{ae.transition=X}},De.unstable_act=le,De.useCallback=function(j,X){return $e.current.useCallback(j,X)},De.useContext=function(j){return $e.current.useContext(j)},De.useDebugValue=function(){},De.useDeferredValue=function(j){return $e.current.useDeferredValue(j)},De.useEffect=function(j,X){return $e.current.useEffect(j,X)},De.useId=function(){return $e.current.useId()},De.useImperativeHandle=function(j,X,ge){return $e.current.useImperativeHandle(j,X,ge)},De.useInsertionEffect=function(j,X){return $e.current.useInsertionEffect(j,X)},De.useLayoutEffect=function(j,X){return $e.current.useLayoutEffect(j,X)},De.useMemo=function(j,X){return $e.current.useMemo(j,X)},De.useReducer=function(j,X,ge){return $e.current.useReducer(j,X,ge)},De.useRef=function(j){return $e.current.useRef(j)},De.useState=function(j){return $e.current.useState(j)},De.useSyncExternalStore=function(j,X,ge){return $e.current.useSyncExternalStore(j,X,ge)},De.useTransition=function(){return $e.current.useTransition()},De.version="18.3.1",De}var Gy;function Op(){return Gy||(Gy=1,lf.exports=rI()),lf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qy;function iI(){if(Qy)return Za;Qy=1;var n=Op(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function u(d,f,m){var v,w={},E=null,P=null;m!==void 0&&(E=""+m),f.key!==void 0&&(E=""+f.key),f.ref!==void 0&&(P=f.ref);for(v in f)r.call(f,v)&&!a.hasOwnProperty(v)&&(w[v]=f[v]);if(d&&d.defaultProps)for(v in f=d.defaultProps,f)w[v]===void 0&&(w[v]=f[v]);return{$$typeof:e,type:d,key:E,ref:P,props:w,_owner:o.current}}return Za.Fragment=t,Za.jsx=u,Za.jsxs=u,Za}var Jy;function sI(){return Jy||(Jy=1,af.exports=iI()),af.exports}var O=sI(),H=Op(),lc={},uf={exports:{}},rn={},cf={exports:{}},hf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yy;function oI(){return Yy||(Yy=1,function(n){function e(ae,ve){var le=ae.length;ae.push(ve);e:for(;0<le;){var j=le-1>>>1,X=ae[j];if(0<o(X,ve))ae[j]=ve,ae[le]=X,le=j;else break e}}function t(ae){return ae.length===0?null:ae[0]}function r(ae){if(ae.length===0)return null;var ve=ae[0],le=ae.pop();if(le!==ve){ae[0]=le;e:for(var j=0,X=ae.length,ge=X>>>1;j<ge;){var xe=2*(j+1)-1,Ce=ae[xe],Oe=xe+1,ke=ae[Oe];if(0>o(Ce,le))Oe<X&&0>o(ke,Ce)?(ae[j]=ke,ae[Oe]=le,j=Oe):(ae[j]=Ce,ae[xe]=le,j=xe);else if(Oe<X&&0>o(ke,le))ae[j]=ke,ae[Oe]=le,j=Oe;else break e}}return ve}function o(ae,ve){var le=ae.sortIndex-ve.sortIndex;return le!==0?le:ae.id-ve.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var u=Date,d=u.now();n.unstable_now=function(){return u.now()-d}}var f=[],m=[],v=1,w=null,E=3,P=!1,C=!1,L=!1,D=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function B(ae){for(var ve=t(m);ve!==null;){if(ve.callback===null)r(m);else if(ve.startTime<=ae)r(m),ve.sortIndex=ve.expirationTime,e(f,ve);else break;ve=t(m)}}function J(ae){if(L=!1,B(ae),!C)if(t(f)!==null)C=!0,st(ie);else{var ve=t(m);ve!==null&&$e(J,ve.startTime-ae)}}function ie(ae,ve){C=!1,L&&(L=!1,U(I),I=-1),P=!0;var le=E;try{for(B(ve),w=t(f);w!==null&&(!(w.expirationTime>ve)||ae&&!N());){var j=w.callback;if(typeof j=="function"){w.callback=null,E=w.priorityLevel;var X=j(w.expirationTime<=ve);ve=n.unstable_now(),typeof X=="function"?w.callback=X:w===t(f)&&r(f),B(ve)}else r(f);w=t(f)}if(w!==null)var ge=!0;else{var xe=t(m);xe!==null&&$e(J,xe.startTime-ve),ge=!1}return ge}finally{w=null,E=le,P=!1}}var Y=!1,k=null,I=-1,S=5,x=-1;function N(){return!(n.unstable_now()-x<S)}function V(){if(k!==null){var ae=n.unstable_now();x=ae;var ve=!0;try{ve=k(!0,ae)}finally{ve?A():(Y=!1,k=null)}}else Y=!1}var A;if(typeof W=="function")A=function(){W(V)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,We=ce.port2;ce.port1.onmessage=V,A=function(){We.postMessage(null)}}else A=function(){D(V,0)};function st(ae){k=ae,Y||(Y=!0,A())}function $e(ae,ve){I=D(function(){ae(n.unstable_now())},ve)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ae){ae.callback=null},n.unstable_continueExecution=function(){C||P||(C=!0,st(ie))},n.unstable_forceFrameRate=function(ae){0>ae||125<ae?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<ae?Math.floor(1e3/ae):5},n.unstable_getCurrentPriorityLevel=function(){return E},n.unstable_getFirstCallbackNode=function(){return t(f)},n.unstable_next=function(ae){switch(E){case 1:case 2:case 3:var ve=3;break;default:ve=E}var le=E;E=ve;try{return ae()}finally{E=le}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ae,ve){switch(ae){case 1:case 2:case 3:case 4:case 5:break;default:ae=3}var le=E;E=ae;try{return ve()}finally{E=le}},n.unstable_scheduleCallback=function(ae,ve,le){var j=n.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?j+le:j):le=j,ae){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=le+X,ae={id:v++,callback:ve,priorityLevel:ae,startTime:le,expirationTime:X,sortIndex:-1},le>j?(ae.sortIndex=le,e(m,ae),t(f)===null&&ae===t(m)&&(L?(U(I),I=-1):L=!0,$e(J,le-j))):(ae.sortIndex=X,e(f,ae),C||P||(C=!0,st(ie))),ae},n.unstable_shouldYield=N,n.unstable_wrapCallback=function(ae){var ve=E;return function(){var le=E;E=ve;try{return ae.apply(this,arguments)}finally{E=le}}}}(hf)),hf}var Xy;function aI(){return Xy||(Xy=1,cf.exports=oI()),cf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zy;function lI(){if(Zy)return rn;Zy=1;var n=Op(),e=aI();function t(i){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+i,l=1;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,o={};function a(i,s){u(i,s),u(i+"Capture",s)}function u(i,s){for(o[i]=s,i=0;i<s.length;i++)r.add(s[i])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},w={};function E(i){return f.call(w,i)?!0:f.call(v,i)?!1:m.test(i)?w[i]=!0:(v[i]=!0,!1)}function P(i,s,l,h){if(l!==null&&l.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return h?!1:l!==null?!l.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function C(i,s,l,h){if(s===null||typeof s>"u"||P(i,s,l,h))return!0;if(h)return!1;if(l!==null)switch(l.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function L(i,s,l,h,p,y,T){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=h,this.attributeNamespace=p,this.mustUseProperty=l,this.propertyName=i,this.type=s,this.sanitizeURL=y,this.removeEmptyString=T}var D={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){D[i]=new L(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var s=i[0];D[s]=new L(s,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){D[i]=new L(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){D[i]=new L(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){D[i]=new L(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){D[i]=new L(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){D[i]=new L(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){D[i]=new L(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){D[i]=new L(i,5,!1,i.toLowerCase(),null,!1,!1)});var U=/[\-:]([a-z])/g;function W(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var s=i.replace(U,W);D[s]=new L(s,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var s=i.replace(U,W);D[s]=new L(s,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var s=i.replace(U,W);D[s]=new L(s,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){D[i]=new L(i,1,!1,i.toLowerCase(),null,!1,!1)}),D.xlinkHref=new L("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){D[i]=new L(i,1,!1,i.toLowerCase(),null,!0,!0)});function B(i,s,l,h){var p=D.hasOwnProperty(s)?D[s]:null;(p!==null?p.type!==0:h||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(C(s,l,p,h)&&(l=null),h||p===null?E(s)&&(l===null?i.removeAttribute(s):i.setAttribute(s,""+l)):p.mustUseProperty?i[p.propertyName]=l===null?p.type===3?!1:"":l:(s=p.attributeName,h=p.attributeNamespace,l===null?i.removeAttribute(s):(p=p.type,l=p===3||p===4&&l===!0?"":""+l,h?i.setAttributeNS(h,s,l):i.setAttribute(s,l))))}var J=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ie=Symbol.for("react.element"),Y=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),N=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),ce=Symbol.for("react.suspense_list"),We=Symbol.for("react.memo"),st=Symbol.for("react.lazy"),$e=Symbol.for("react.offscreen"),ae=Symbol.iterator;function ve(i){return i===null||typeof i!="object"?null:(i=ae&&i[ae]||i["@@iterator"],typeof i=="function"?i:null)}var le=Object.assign,j;function X(i){if(j===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);j=s&&s[1]||""}return`
`+j+i}var ge=!1;function xe(i,s){if(!i||ge)return"";ge=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(K){var h=K}Reflect.construct(i,[],s)}else{try{s.call()}catch(K){h=K}i.call(s.prototype)}else{try{throw Error()}catch(K){h=K}i()}}catch(K){if(K&&h&&typeof K.stack=="string"){for(var p=K.stack.split(`
`),y=h.stack.split(`
`),T=p.length-1,b=y.length-1;1<=T&&0<=b&&p[T]!==y[b];)b--;for(;1<=T&&0<=b;T--,b--)if(p[T]!==y[b]){if(T!==1||b!==1)do if(T--,b--,0>b||p[T]!==y[b]){var M=`
`+p[T].replace(" at new "," at ");return i.displayName&&M.includes("<anonymous>")&&(M=M.replace("<anonymous>",i.displayName)),M}while(1<=T&&0<=b);break}}}finally{ge=!1,Error.prepareStackTrace=l}return(i=i?i.displayName||i.name:"")?X(i):""}function Ce(i){switch(i.tag){case 5:return X(i.type);case 16:return X("Lazy");case 13:return X("Suspense");case 19:return X("SuspenseList");case 0:case 2:case 15:return i=xe(i.type,!1),i;case 11:return i=xe(i.type.render,!1),i;case 1:return i=xe(i.type,!0),i;default:return""}}function Oe(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case k:return"Fragment";case Y:return"Portal";case S:return"Profiler";case I:return"StrictMode";case A:return"Suspense";case ce:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case N:return(i.displayName||"Context")+".Consumer";case x:return(i._context.displayName||"Context")+".Provider";case V:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case We:return s=i.displayName||null,s!==null?s:Oe(i.type)||"Memo";case st:s=i._payload,i=i._init;try{return Oe(i(s))}catch{}}return null}function ke(i){var s=i.type;switch(i.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=s.render,i=i.displayName||i.name||"",s.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Oe(s);case 8:return s===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Ne(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function je(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function ot(i){var s=je(i)?"checked":"value",l=Object.getOwnPropertyDescriptor(i.constructor.prototype,s),h=""+i[s];if(!i.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var p=l.get,y=l.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return p.call(this)},set:function(T){h=""+T,y.call(this,T)}}),Object.defineProperty(i,s,{enumerable:l.enumerable}),{getValue:function(){return h},setValue:function(T){h=""+T},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function vr(i){i._valueTracker||(i._valueTracker=ot(i))}function Ls(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var l=s.getValue(),h="";return i&&(h=je(i)?i.checked?"true":"false":i.value),i=h,i!==l?(s.setValue(i),!0):!1}function Qr(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function zi(i,s){var l=s.checked;return le({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??i._wrapperState.initialChecked})}function Vs(i,s){var l=s.defaultValue==null?"":s.defaultValue,h=s.checked!=null?s.checked:s.defaultChecked;l=Ne(s.value!=null?s.value:l),i._wrapperState={initialChecked:h,initialValue:l,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function sa(i,s){s=s.checked,s!=null&&B(i,"checked",s,!1)}function oa(i,s){sa(i,s);var l=Ne(s.value),h=s.type;if(l!=null)h==="number"?(l===0&&i.value===""||i.value!=l)&&(i.value=""+l):i.value!==""+l&&(i.value=""+l);else if(h==="submit"||h==="reset"){i.removeAttribute("value");return}s.hasOwnProperty("value")?Ms(i,s.type,l):s.hasOwnProperty("defaultValue")&&Ms(i,s.type,Ne(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(i.defaultChecked=!!s.defaultChecked)}function Kl(i,s,l){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var h=s.type;if(!(h!=="submit"&&h!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+i._wrapperState.initialValue,l||s===i.value||(i.value=s),i.defaultValue=s}l=i.name,l!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,l!==""&&(i.name=l)}function Ms(i,s,l){(s!=="number"||Qr(i.ownerDocument)!==i)&&(l==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+l&&(i.defaultValue=""+l))}var _r=Array.isArray;function wr(i,s,l,h){if(i=i.options,s){s={};for(var p=0;p<l.length;p++)s["$"+l[p]]=!0;for(l=0;l<i.length;l++)p=s.hasOwnProperty("$"+i[l].value),i[l].selected!==p&&(i[l].selected=p),p&&h&&(i[l].defaultSelected=!0)}else{for(l=""+Ne(l),s=null,p=0;p<i.length;p++){if(i[p].value===l){i[p].selected=!0,h&&(i[p].defaultSelected=!0);return}s!==null||i[p].disabled||(s=i[p])}s!==null&&(s.selected=!0)}}function aa(i,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return le({},s,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function Fs(i,s){var l=s.value;if(l==null){if(l=s.children,s=s.defaultValue,l!=null){if(s!=null)throw Error(t(92));if(_r(l)){if(1<l.length)throw Error(t(93));l=l[0]}s=l}s==null&&(s=""),l=s}i._wrapperState={initialValue:Ne(l)}}function Us(i,s){var l=Ne(s.value),h=Ne(s.defaultValue);l!=null&&(l=""+l,l!==i.value&&(i.value=l),s.defaultValue==null&&i.defaultValue!==l&&(i.defaultValue=l)),h!=null&&(i.defaultValue=""+h)}function la(i){var s=i.textContent;s===i._wrapperState.initialValue&&s!==""&&s!==null&&(i.value=s)}function gt(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yt(i,s){return i==null||i==="http://www.w3.org/1999/xhtml"?gt(s):i==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Er,ua=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,l,h,p){MSApp.execUnsafeLocalFunction(function(){return i(s,l,h,p)})}:i}(function(i,s){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=s;else{for(Er=Er||document.createElement("div"),Er.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Er.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;s.firstChild;)i.appendChild(s.firstChild)}});function Jr(i,s){if(s){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=s;return}}i.textContent=s}var $i={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qi=["Webkit","ms","Moz","O"];Object.keys($i).forEach(function(i){qi.forEach(function(s){s=s+i.charAt(0).toUpperCase()+i.substring(1),$i[s]=$i[i]})});function ca(i,s,l){return s==null||typeof s=="boolean"||s===""?"":l||typeof s!="number"||s===0||$i.hasOwnProperty(i)&&$i[i]?(""+s).trim():s+"px"}function ha(i,s){i=i.style;for(var l in s)if(s.hasOwnProperty(l)){var h=l.indexOf("--")===0,p=ca(l,s[l],h);l==="float"&&(l="cssFloat"),h?i.setProperty(l,p):i[l]=p}}var da=le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fa(i,s){if(s){if(da[i]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function pa(i,s){if(i.indexOf("-")===-1)return typeof s.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hi=null;function js(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Bs=null,yn=null,Xn=null;function zs(i){if(i=Fa(i)){if(typeof Bs!="function")throw Error(t(280));var s=i.stateNode;s&&(s=Iu(s),Bs(i.stateNode,i.type,s))}}function Zn(i){yn?Xn?Xn.push(i):Xn=[i]:yn=i}function ma(){if(yn){var i=yn,s=Xn;if(Xn=yn=null,zs(i),s)for(i=0;i<s.length;i++)zs(s[i])}}function Wi(i,s){return i(s)}function ga(){}var Tr=!1;function ya(i,s,l){if(Tr)return i(s,l);Tr=!0;try{return Wi(i,s,l)}finally{Tr=!1,(yn!==null||Xn!==null)&&(ga(),ma())}}function ut(i,s){var l=i.stateNode;if(l===null)return null;var h=Iu(l);if(h===null)return null;l=h[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(i=i.type,h=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!h;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(t(231,s,typeof l));return l}var $s=!1;if(d)try{var Nn={};Object.defineProperty(Nn,"passive",{get:function(){$s=!0}}),window.addEventListener("test",Nn,Nn),window.removeEventListener("test",Nn,Nn)}catch{$s=!1}function Ki(i,s,l,h,p,y,T,b,M){var K=Array.prototype.slice.call(arguments,3);try{s.apply(l,K)}catch(ne){this.onError(ne)}}var Gi=!1,qs=null,bn=!1,va=null,Oh={onError:function(i){Gi=!0,qs=i}};function Hs(i,s,l,h,p,y,T,b,M){Gi=!1,qs=null,Ki.apply(Oh,arguments)}function Gl(i,s,l,h,p,y,T,b,M){if(Hs.apply(this,arguments),Gi){if(Gi){var K=qs;Gi=!1,qs=null}else throw Error(t(198));bn||(bn=!0,va=K)}}function Dn(i){var s=i,l=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(l=s.return),i=s.return;while(i)}return s.tag===3?l:null}function Qi(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function On(i){if(Dn(i)!==i)throw Error(t(188))}function Ql(i){var s=i.alternate;if(!s){if(s=Dn(i),s===null)throw Error(t(188));return s!==i?null:i}for(var l=i,h=s;;){var p=l.return;if(p===null)break;var y=p.alternate;if(y===null){if(h=p.return,h!==null){l=h;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===l)return On(p),i;if(y===h)return On(p),s;y=y.sibling}throw Error(t(188))}if(l.return!==h.return)l=p,h=y;else{for(var T=!1,b=p.child;b;){if(b===l){T=!0,l=p,h=y;break}if(b===h){T=!0,h=p,l=y;break}b=b.sibling}if(!T){for(b=y.child;b;){if(b===l){T=!0,l=y,h=p;break}if(b===h){T=!0,h=y,l=p;break}b=b.sibling}if(!T)throw Error(t(189))}}if(l.alternate!==h)throw Error(t(190))}if(l.tag!==3)throw Error(t(188));return l.stateNode.current===l?i:s}function _a(i){return i=Ql(i),i!==null?Ws(i):null}function Ws(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var s=Ws(i);if(s!==null)return s;i=i.sibling}return null}var Ks=e.unstable_scheduleCallback,wa=e.unstable_cancelCallback,Jl=e.unstable_shouldYield,Lh=e.unstable_requestPaint,Ge=e.unstable_now,Yl=e.unstable_getCurrentPriorityLevel,Ji=e.unstable_ImmediatePriority,Yr=e.unstable_UserBlockingPriority,vn=e.unstable_NormalPriority,Ea=e.unstable_LowPriority,Xl=e.unstable_IdlePriority,Yi=null,un=null;function Zl(i){if(un&&typeof un.onCommitFiberRoot=="function")try{un.onCommitFiberRoot(Yi,i,void 0,(i.current.flags&128)===128)}catch{}}var Ht=Math.clz32?Math.clz32:tu,Ta=Math.log,eu=Math.LN2;function tu(i){return i>>>=0,i===0?32:31-(Ta(i)/eu|0)|0}var Gs=64,Qs=4194304;function Xr(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Xi(i,s){var l=i.pendingLanes;if(l===0)return 0;var h=0,p=i.suspendedLanes,y=i.pingedLanes,T=l&268435455;if(T!==0){var b=T&~p;b!==0?h=Xr(b):(y&=T,y!==0&&(h=Xr(y)))}else T=l&~p,T!==0?h=Xr(T):y!==0&&(h=Xr(y));if(h===0)return 0;if(s!==0&&s!==h&&(s&p)===0&&(p=h&-h,y=s&-s,p>=y||p===16&&(y&4194240)!==0))return s;if((h&4)!==0&&(h|=l&16),s=i.entangledLanes,s!==0)for(i=i.entanglements,s&=h;0<s;)l=31-Ht(s),p=1<<l,h|=i[l],s&=~p;return h}function Vh(i,s){switch(i){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ir(i,s){for(var l=i.suspendedLanes,h=i.pingedLanes,p=i.expirationTimes,y=i.pendingLanes;0<y;){var T=31-Ht(y),b=1<<T,M=p[T];M===-1?((b&l)===0||(b&h)!==0)&&(p[T]=Vh(b,s)):M<=s&&(i.expiredLanes|=b),y&=~b}}function cn(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Zi(){var i=Gs;return Gs<<=1,(Gs&4194240)===0&&(Gs=64),i}function Zr(i){for(var s=[],l=0;31>l;l++)s.push(i);return s}function ei(i,s,l){i.pendingLanes|=s,s!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,s=31-Ht(s),i[s]=l}function Ke(i,s){var l=i.pendingLanes&~s;i.pendingLanes=s,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=s,i.mutableReadLanes&=s,i.entangledLanes&=s,s=i.entanglements;var h=i.eventTimes;for(i=i.expirationTimes;0<l;){var p=31-Ht(l),y=1<<p;s[p]=0,h[p]=-1,i[p]=-1,l&=~y}}function ti(i,s){var l=i.entangledLanes|=s;for(i=i.entanglements;l;){var h=31-Ht(l),p=1<<h;p&s|i[h]&s&&(i[h]|=s),l&=~p}}var Me=0;function ni(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var nu,Js,ru,iu,su,Ia=!1,er=[],xt=null,Ln=null,Vn=null,ri=new Map,_n=new Map,tr=[],Mh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ou(i,s){switch(i){case"focusin":case"focusout":xt=null;break;case"dragenter":case"dragleave":Ln=null;break;case"mouseover":case"mouseout":Vn=null;break;case"pointerover":case"pointerout":ri.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":_n.delete(s.pointerId)}}function Jt(i,s,l,h,p,y){return i===null||i.nativeEvent!==y?(i={blockedOn:s,domEventName:l,eventSystemFlags:h,nativeEvent:y,targetContainers:[p]},s!==null&&(s=Fa(s),s!==null&&Js(s)),i):(i.eventSystemFlags|=h,s=i.targetContainers,p!==null&&s.indexOf(p)===-1&&s.push(p),i)}function Fh(i,s,l,h,p){switch(s){case"focusin":return xt=Jt(xt,i,s,l,h,p),!0;case"dragenter":return Ln=Jt(Ln,i,s,l,h,p),!0;case"mouseover":return Vn=Jt(Vn,i,s,l,h,p),!0;case"pointerover":var y=p.pointerId;return ri.set(y,Jt(ri.get(y)||null,i,s,l,h,p)),!0;case"gotpointercapture":return y=p.pointerId,_n.set(y,Jt(_n.get(y)||null,i,s,l,h,p)),!0}return!1}function au(i){var s=is(i.target);if(s!==null){var l=Dn(s);if(l!==null){if(s=l.tag,s===13){if(s=Qi(l),s!==null){i.blockedOn=s,su(i.priority,function(){ru(l)});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Sr(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var l=Ys(i.domEventName,i.eventSystemFlags,s[0],i.nativeEvent);if(l===null){l=i.nativeEvent;var h=new l.constructor(l.type,l);Hi=h,l.target.dispatchEvent(h),Hi=null}else return s=Fa(l),s!==null&&Js(s),i.blockedOn=l,!1;s.shift()}return!0}function es(i,s,l){Sr(i)&&l.delete(s)}function lu(){Ia=!1,xt!==null&&Sr(xt)&&(xt=null),Ln!==null&&Sr(Ln)&&(Ln=null),Vn!==null&&Sr(Vn)&&(Vn=null),ri.forEach(es),_n.forEach(es)}function Mn(i,s){i.blockedOn===s&&(i.blockedOn=null,Ia||(Ia=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,lu)))}function Fn(i){function s(p){return Mn(p,i)}if(0<er.length){Mn(er[0],i);for(var l=1;l<er.length;l++){var h=er[l];h.blockedOn===i&&(h.blockedOn=null)}}for(xt!==null&&Mn(xt,i),Ln!==null&&Mn(Ln,i),Vn!==null&&Mn(Vn,i),ri.forEach(s),_n.forEach(s),l=0;l<tr.length;l++)h=tr[l],h.blockedOn===i&&(h.blockedOn=null);for(;0<tr.length&&(l=tr[0],l.blockedOn===null);)au(l),l.blockedOn===null&&tr.shift()}var Rr=J.ReactCurrentBatchConfig,ii=!0;function Ze(i,s,l,h){var p=Me,y=Rr.transition;Rr.transition=null;try{Me=1,Sa(i,s,l,h)}finally{Me=p,Rr.transition=y}}function Uh(i,s,l,h){var p=Me,y=Rr.transition;Rr.transition=null;try{Me=4,Sa(i,s,l,h)}finally{Me=p,Rr.transition=y}}function Sa(i,s,l,h){if(ii){var p=Ys(i,s,l,h);if(p===null)Jh(i,s,h,ts,l),ou(i,h);else if(Fh(p,i,s,l,h))h.stopPropagation();else if(ou(i,h),s&4&&-1<Mh.indexOf(i)){for(;p!==null;){var y=Fa(p);if(y!==null&&nu(y),y=Ys(i,s,l,h),y===null&&Jh(i,s,h,ts,l),y===p)break;p=y}p!==null&&h.stopPropagation()}else Jh(i,s,h,null,l)}}var ts=null;function Ys(i,s,l,h){if(ts=null,i=js(h),i=is(i),i!==null)if(s=Dn(i),s===null)i=null;else if(l=s.tag,l===13){if(i=Qi(s),i!==null)return i;i=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null);return ts=i,null}function Ra(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Yl()){case Ji:return 1;case Yr:return 4;case vn:case Ea:return 16;case Xl:return 536870912;default:return 16}default:return 16}}var hn=null,Xs=null,Yt=null;function Aa(){if(Yt)return Yt;var i,s=Xs,l=s.length,h,p="value"in hn?hn.value:hn.textContent,y=p.length;for(i=0;i<l&&s[i]===p[i];i++);var T=l-i;for(h=1;h<=T&&s[l-h]===p[y-h];h++);return Yt=p.slice(i,1<h?1-h:void 0)}function Zs(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function nr(){return!0}function Ca(){return!1}function kt(i){function s(l,h,p,y,T){this._reactName=l,this._targetInst=p,this.type=h,this.nativeEvent=y,this.target=T,this.currentTarget=null;for(var b in i)i.hasOwnProperty(b)&&(l=i[b],this[b]=l?l(y):y[b]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?nr:Ca,this.isPropagationStopped=Ca,this}return le(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=nr)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=nr)},persist:function(){},isPersistent:nr}),s}var Un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},eo=kt(Un),rr=le({},Un,{view:0,detail:0}),jh=kt(rr),to,Ar,si,ns=le({},rr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ir,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==si&&(si&&i.type==="mousemove"?(to=i.screenX-si.screenX,Ar=i.screenY-si.screenY):Ar=to=0,si=i),to)},movementY:function(i){return"movementY"in i?i.movementY:Ar}}),no=kt(ns),Pa=le({},ns,{dataTransfer:0}),uu=kt(Pa),ro=le({},rr,{relatedTarget:0}),io=kt(ro),cu=le({},Un,{animationName:0,elapsedTime:0,pseudoElement:0}),Cr=kt(cu),hu=le({},Un,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),du=kt(hu),fu=le({},Un,{data:0}),xa=kt(fu),so={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mu(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=pu[i])?!!s[i]:!1}function ir(){return mu}var c=le({},rr,{key:function(i){if(i.key){var s=so[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=Zs(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Wt[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ir,charCode:function(i){return i.type==="keypress"?Zs(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Zs(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),g=kt(c),_=le({},ns,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),R=kt(_),z=le({},rr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ir}),G=kt(z),oe=le({},Un,{propertyName:0,elapsedTime:0,pseudoElement:0}),He=kt(oe),vt=le({},ns,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Fe=kt(vt),St=[9,13,27,32],dt=d&&"CompositionEvent"in window,wn=null;d&&"documentMode"in document&&(wn=document.documentMode);var dn=d&&"TextEvent"in window&&!wn,rs=d&&(!dt||wn&&8<wn&&11>=wn),oo=" ",Bm=!1;function zm(i,s){switch(i){case"keyup":return St.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $m(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ao=!1;function ZT(i,s){switch(i){case"compositionend":return $m(s);case"keypress":return s.which!==32?null:(Bm=!0,oo);case"textInput":return i=s.data,i===oo&&Bm?null:i;default:return null}}function e1(i,s){if(ao)return i==="compositionend"||!dt&&zm(i,s)?(i=Aa(),Yt=Xs=hn=null,ao=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return rs&&s.locale!=="ko"?null:s.data;default:return null}}var t1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qm(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!t1[i.type]:s==="textarea"}function Hm(i,s,l,h){Zn(h),s=wu(s,"onChange"),0<s.length&&(l=new eo("onChange","change",null,l,h),i.push({event:l,listeners:s}))}var ka=null,Na=null;function n1(i){ug(i,0)}function gu(i){var s=fo(i);if(Ls(s))return i}function r1(i,s){if(i==="change")return s}var Wm=!1;if(d){var Bh;if(d){var zh="oninput"in document;if(!zh){var Km=document.createElement("div");Km.setAttribute("oninput","return;"),zh=typeof Km.oninput=="function"}Bh=zh}else Bh=!1;Wm=Bh&&(!document.documentMode||9<document.documentMode)}function Gm(){ka&&(ka.detachEvent("onpropertychange",Qm),Na=ka=null)}function Qm(i){if(i.propertyName==="value"&&gu(Na)){var s=[];Hm(s,Na,i,js(i)),ya(n1,s)}}function i1(i,s,l){i==="focusin"?(Gm(),ka=s,Na=l,ka.attachEvent("onpropertychange",Qm)):i==="focusout"&&Gm()}function s1(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return gu(Na)}function o1(i,s){if(i==="click")return gu(s)}function a1(i,s){if(i==="input"||i==="change")return gu(s)}function l1(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var jn=typeof Object.is=="function"?Object.is:l1;function ba(i,s){if(jn(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var l=Object.keys(i),h=Object.keys(s);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var p=l[h];if(!f.call(s,p)||!jn(i[p],s[p]))return!1}return!0}function Jm(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Ym(i,s){var l=Jm(i);i=0;for(var h;l;){if(l.nodeType===3){if(h=i+l.textContent.length,i<=s&&h>=s)return{node:l,offset:s-i};i=h}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Jm(l)}}function Xm(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?Xm(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function Zm(){for(var i=window,s=Qr();s instanceof i.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)i=s.contentWindow;else break;s=Qr(i.document)}return s}function $h(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}function u1(i){var s=Zm(),l=i.focusedElem,h=i.selectionRange;if(s!==l&&l&&l.ownerDocument&&Xm(l.ownerDocument.documentElement,l)){if(h!==null&&$h(l)){if(s=h.start,i=h.end,i===void 0&&(i=s),"selectionStart"in l)l.selectionStart=s,l.selectionEnd=Math.min(i,l.value.length);else if(i=(s=l.ownerDocument||document)&&s.defaultView||window,i.getSelection){i=i.getSelection();var p=l.textContent.length,y=Math.min(h.start,p);h=h.end===void 0?y:Math.min(h.end,p),!i.extend&&y>h&&(p=h,h=y,y=p),p=Ym(l,y);var T=Ym(l,h);p&&T&&(i.rangeCount!==1||i.anchorNode!==p.node||i.anchorOffset!==p.offset||i.focusNode!==T.node||i.focusOffset!==T.offset)&&(s=s.createRange(),s.setStart(p.node,p.offset),i.removeAllRanges(),y>h?(i.addRange(s),i.extend(T.node,T.offset)):(s.setEnd(T.node,T.offset),i.addRange(s)))}}for(s=[],i=l;i=i.parentNode;)i.nodeType===1&&s.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<s.length;l++)i=s[l],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var c1=d&&"documentMode"in document&&11>=document.documentMode,lo=null,qh=null,Da=null,Hh=!1;function eg(i,s,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Hh||lo==null||lo!==Qr(h)||(h=lo,"selectionStart"in h&&$h(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Da&&ba(Da,h)||(Da=h,h=wu(qh,"onSelect"),0<h.length&&(s=new eo("onSelect","select",null,s,l),i.push({event:s,listeners:h}),s.target=lo)))}function yu(i,s){var l={};return l[i.toLowerCase()]=s.toLowerCase(),l["Webkit"+i]="webkit"+s,l["Moz"+i]="moz"+s,l}var uo={animationend:yu("Animation","AnimationEnd"),animationiteration:yu("Animation","AnimationIteration"),animationstart:yu("Animation","AnimationStart"),transitionend:yu("Transition","TransitionEnd")},Wh={},tg={};d&&(tg=document.createElement("div").style,"AnimationEvent"in window||(delete uo.animationend.animation,delete uo.animationiteration.animation,delete uo.animationstart.animation),"TransitionEvent"in window||delete uo.transitionend.transition);function vu(i){if(Wh[i])return Wh[i];if(!uo[i])return i;var s=uo[i],l;for(l in s)if(s.hasOwnProperty(l)&&l in tg)return Wh[i]=s[l];return i}var ng=vu("animationend"),rg=vu("animationiteration"),ig=vu("animationstart"),sg=vu("transitionend"),og=new Map,ag="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function oi(i,s){og.set(i,s),a(s,[i])}for(var Kh=0;Kh<ag.length;Kh++){var Gh=ag[Kh],h1=Gh.toLowerCase(),d1=Gh[0].toUpperCase()+Gh.slice(1);oi(h1,"on"+d1)}oi(ng,"onAnimationEnd"),oi(rg,"onAnimationIteration"),oi(ig,"onAnimationStart"),oi("dblclick","onDoubleClick"),oi("focusin","onFocus"),oi("focusout","onBlur"),oi(sg,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Oa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),f1=new Set("cancel close invalid load scroll toggle".split(" ").concat(Oa));function lg(i,s,l){var h=i.type||"unknown-event";i.currentTarget=l,Gl(h,s,void 0,i),i.currentTarget=null}function ug(i,s){s=(s&4)!==0;for(var l=0;l<i.length;l++){var h=i[l],p=h.event;h=h.listeners;e:{var y=void 0;if(s)for(var T=h.length-1;0<=T;T--){var b=h[T],M=b.instance,K=b.currentTarget;if(b=b.listener,M!==y&&p.isPropagationStopped())break e;lg(p,b,K),y=M}else for(T=0;T<h.length;T++){if(b=h[T],M=b.instance,K=b.currentTarget,b=b.listener,M!==y&&p.isPropagationStopped())break e;lg(p,b,K),y=M}}}if(bn)throw i=va,bn=!1,va=null,i}function Je(i,s){var l=s[nd];l===void 0&&(l=s[nd]=new Set);var h=i+"__bubble";l.has(h)||(cg(s,i,2,!1),l.add(h))}function Qh(i,s,l){var h=0;s&&(h|=4),cg(l,i,h,s)}var _u="_reactListening"+Math.random().toString(36).slice(2);function La(i){if(!i[_u]){i[_u]=!0,r.forEach(function(l){l!=="selectionchange"&&(f1.has(l)||Qh(l,!1,i),Qh(l,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[_u]||(s[_u]=!0,Qh("selectionchange",!1,s))}}function cg(i,s,l,h){switch(Ra(s)){case 1:var p=Ze;break;case 4:p=Uh;break;default:p=Sa}l=p.bind(null,s,l,i),p=void 0,!$s||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(p=!0),h?p!==void 0?i.addEventListener(s,l,{capture:!0,passive:p}):i.addEventListener(s,l,!0):p!==void 0?i.addEventListener(s,l,{passive:p}):i.addEventListener(s,l,!1)}function Jh(i,s,l,h,p){var y=h;if((s&1)===0&&(s&2)===0&&h!==null)e:for(;;){if(h===null)return;var T=h.tag;if(T===3||T===4){var b=h.stateNode.containerInfo;if(b===p||b.nodeType===8&&b.parentNode===p)break;if(T===4)for(T=h.return;T!==null;){var M=T.tag;if((M===3||M===4)&&(M=T.stateNode.containerInfo,M===p||M.nodeType===8&&M.parentNode===p))return;T=T.return}for(;b!==null;){if(T=is(b),T===null)return;if(M=T.tag,M===5||M===6){h=y=T;continue e}b=b.parentNode}}h=h.return}ya(function(){var K=y,ne=js(l),re=[];e:{var te=og.get(i);if(te!==void 0){var ue=eo,pe=i;switch(i){case"keypress":if(Zs(l)===0)break e;case"keydown":case"keyup":ue=g;break;case"focusin":pe="focus",ue=io;break;case"focusout":pe="blur",ue=io;break;case"beforeblur":case"afterblur":ue=io;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ue=no;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ue=uu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ue=G;break;case ng:case rg:case ig:ue=Cr;break;case sg:ue=He;break;case"scroll":ue=jh;break;case"wheel":ue=Fe;break;case"copy":case"cut":case"paste":ue=du;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ue=R}var me=(s&4)!==0,ct=!me&&i==="scroll",$=me?te!==null?te+"Capture":null:te;me=[];for(var F=K,q;F!==null;){q=F;var se=q.stateNode;if(q.tag===5&&se!==null&&(q=se,$!==null&&(se=ut(F,$),se!=null&&me.push(Va(F,se,q)))),ct)break;F=F.return}0<me.length&&(te=new ue(te,pe,null,l,ne),re.push({event:te,listeners:me}))}}if((s&7)===0){e:{if(te=i==="mouseover"||i==="pointerover",ue=i==="mouseout"||i==="pointerout",te&&l!==Hi&&(pe=l.relatedTarget||l.fromElement)&&(is(pe)||pe[Pr]))break e;if((ue||te)&&(te=ne.window===ne?ne:(te=ne.ownerDocument)?te.defaultView||te.parentWindow:window,ue?(pe=l.relatedTarget||l.toElement,ue=K,pe=pe?is(pe):null,pe!==null&&(ct=Dn(pe),pe!==ct||pe.tag!==5&&pe.tag!==6)&&(pe=null)):(ue=null,pe=K),ue!==pe)){if(me=no,se="onMouseLeave",$="onMouseEnter",F="mouse",(i==="pointerout"||i==="pointerover")&&(me=R,se="onPointerLeave",$="onPointerEnter",F="pointer"),ct=ue==null?te:fo(ue),q=pe==null?te:fo(pe),te=new me(se,F+"leave",ue,l,ne),te.target=ct,te.relatedTarget=q,se=null,is(ne)===K&&(me=new me($,F+"enter",pe,l,ne),me.target=q,me.relatedTarget=ct,se=me),ct=se,ue&&pe)t:{for(me=ue,$=pe,F=0,q=me;q;q=co(q))F++;for(q=0,se=$;se;se=co(se))q++;for(;0<F-q;)me=co(me),F--;for(;0<q-F;)$=co($),q--;for(;F--;){if(me===$||$!==null&&me===$.alternate)break t;me=co(me),$=co($)}me=null}else me=null;ue!==null&&hg(re,te,ue,me,!1),pe!==null&&ct!==null&&hg(re,ct,pe,me,!0)}}e:{if(te=K?fo(K):window,ue=te.nodeName&&te.nodeName.toLowerCase(),ue==="select"||ue==="input"&&te.type==="file")var ye=r1;else if(qm(te))if(Wm)ye=a1;else{ye=s1;var we=i1}else(ue=te.nodeName)&&ue.toLowerCase()==="input"&&(te.type==="checkbox"||te.type==="radio")&&(ye=o1);if(ye&&(ye=ye(i,K))){Hm(re,ye,l,ne);break e}we&&we(i,te,K),i==="focusout"&&(we=te._wrapperState)&&we.controlled&&te.type==="number"&&Ms(te,"number",te.value)}switch(we=K?fo(K):window,i){case"focusin":(qm(we)||we.contentEditable==="true")&&(lo=we,qh=K,Da=null);break;case"focusout":Da=qh=lo=null;break;case"mousedown":Hh=!0;break;case"contextmenu":case"mouseup":case"dragend":Hh=!1,eg(re,l,ne);break;case"selectionchange":if(c1)break;case"keydown":case"keyup":eg(re,l,ne)}var Ee;if(dt)e:{switch(i){case"compositionstart":var Se="onCompositionStart";break e;case"compositionend":Se="onCompositionEnd";break e;case"compositionupdate":Se="onCompositionUpdate";break e}Se=void 0}else ao?zm(i,l)&&(Se="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(Se="onCompositionStart");Se&&(rs&&l.locale!=="ko"&&(ao||Se!=="onCompositionStart"?Se==="onCompositionEnd"&&ao&&(Ee=Aa()):(hn=ne,Xs="value"in hn?hn.value:hn.textContent,ao=!0)),we=wu(K,Se),0<we.length&&(Se=new xa(Se,i,null,l,ne),re.push({event:Se,listeners:we}),Ee?Se.data=Ee:(Ee=$m(l),Ee!==null&&(Se.data=Ee)))),(Ee=dn?ZT(i,l):e1(i,l))&&(K=wu(K,"onBeforeInput"),0<K.length&&(ne=new xa("onBeforeInput","beforeinput",null,l,ne),re.push({event:ne,listeners:K}),ne.data=Ee))}ug(re,s)})}function Va(i,s,l){return{instance:i,listener:s,currentTarget:l}}function wu(i,s){for(var l=s+"Capture",h=[];i!==null;){var p=i,y=p.stateNode;p.tag===5&&y!==null&&(p=y,y=ut(i,l),y!=null&&h.unshift(Va(i,y,p)),y=ut(i,s),y!=null&&h.push(Va(i,y,p))),i=i.return}return h}function co(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function hg(i,s,l,h,p){for(var y=s._reactName,T=[];l!==null&&l!==h;){var b=l,M=b.alternate,K=b.stateNode;if(M!==null&&M===h)break;b.tag===5&&K!==null&&(b=K,p?(M=ut(l,y),M!=null&&T.unshift(Va(l,M,b))):p||(M=ut(l,y),M!=null&&T.push(Va(l,M,b)))),l=l.return}T.length!==0&&i.push({event:s,listeners:T})}var p1=/\r\n?/g,m1=/\u0000|\uFFFD/g;function dg(i){return(typeof i=="string"?i:""+i).replace(p1,`
`).replace(m1,"")}function Eu(i,s,l){if(s=dg(s),dg(i)!==s&&l)throw Error(t(425))}function Tu(){}var Yh=null,Xh=null;function Zh(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var ed=typeof setTimeout=="function"?setTimeout:void 0,g1=typeof clearTimeout=="function"?clearTimeout:void 0,fg=typeof Promise=="function"?Promise:void 0,y1=typeof queueMicrotask=="function"?queueMicrotask:typeof fg<"u"?function(i){return fg.resolve(null).then(i).catch(v1)}:ed;function v1(i){setTimeout(function(){throw i})}function td(i,s){var l=s,h=0;do{var p=l.nextSibling;if(i.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"){if(h===0){i.removeChild(p),Fn(s);return}h--}else l!=="$"&&l!=="$?"&&l!=="$!"||h++;l=p}while(l);Fn(s)}function ai(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return i}function pg(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"){if(s===0)return i;s--}else l==="/$"&&s++}i=i.previousSibling}return null}var ho=Math.random().toString(36).slice(2),sr="__reactFiber$"+ho,Ma="__reactProps$"+ho,Pr="__reactContainer$"+ho,nd="__reactEvents$"+ho,_1="__reactListeners$"+ho,w1="__reactHandles$"+ho;function is(i){var s=i[sr];if(s)return s;for(var l=i.parentNode;l;){if(s=l[Pr]||l[sr]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(i=pg(i);i!==null;){if(l=i[sr])return l;i=pg(i)}return s}i=l,l=i.parentNode}return null}function Fa(i){return i=i[sr]||i[Pr],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function fo(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function Iu(i){return i[Ma]||null}var rd=[],po=-1;function li(i){return{current:i}}function Ye(i){0>po||(i.current=rd[po],rd[po]=null,po--)}function Qe(i,s){po++,rd[po]=i.current,i.current=s}var ui={},Vt=li(ui),Xt=li(!1),ss=ui;function mo(i,s){var l=i.type.contextTypes;if(!l)return ui;var h=i.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===s)return h.__reactInternalMemoizedMaskedChildContext;var p={},y;for(y in l)p[y]=s[y];return h&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=s,i.__reactInternalMemoizedMaskedChildContext=p),p}function Zt(i){return i=i.childContextTypes,i!=null}function Su(){Ye(Xt),Ye(Vt)}function mg(i,s,l){if(Vt.current!==ui)throw Error(t(168));Qe(Vt,s),Qe(Xt,l)}function gg(i,s,l){var h=i.stateNode;if(s=s.childContextTypes,typeof h.getChildContext!="function")return l;h=h.getChildContext();for(var p in h)if(!(p in s))throw Error(t(108,ke(i)||"Unknown",p));return le({},l,h)}function Ru(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||ui,ss=Vt.current,Qe(Vt,i),Qe(Xt,Xt.current),!0}function yg(i,s,l){var h=i.stateNode;if(!h)throw Error(t(169));l?(i=gg(i,s,ss),h.__reactInternalMemoizedMergedChildContext=i,Ye(Xt),Ye(Vt),Qe(Vt,i)):Ye(Xt),Qe(Xt,l)}var xr=null,Au=!1,id=!1;function vg(i){xr===null?xr=[i]:xr.push(i)}function E1(i){Au=!0,vg(i)}function ci(){if(!id&&xr!==null){id=!0;var i=0,s=Me;try{var l=xr;for(Me=1;i<l.length;i++){var h=l[i];do h=h(!0);while(h!==null)}xr=null,Au=!1}catch(p){throw xr!==null&&(xr=xr.slice(i+1)),Ks(Ji,ci),p}finally{Me=s,id=!1}}return null}var go=[],yo=0,Cu=null,Pu=0,En=[],Tn=0,os=null,kr=1,Nr="";function as(i,s){go[yo++]=Pu,go[yo++]=Cu,Cu=i,Pu=s}function _g(i,s,l){En[Tn++]=kr,En[Tn++]=Nr,En[Tn++]=os,os=i;var h=kr;i=Nr;var p=32-Ht(h)-1;h&=~(1<<p),l+=1;var y=32-Ht(s)+p;if(30<y){var T=p-p%5;y=(h&(1<<T)-1).toString(32),h>>=T,p-=T,kr=1<<32-Ht(s)+p|l<<p|h,Nr=y+i}else kr=1<<y|l<<p|h,Nr=i}function sd(i){i.return!==null&&(as(i,1),_g(i,1,0))}function od(i){for(;i===Cu;)Cu=go[--yo],go[yo]=null,Pu=go[--yo],go[yo]=null;for(;i===os;)os=En[--Tn],En[Tn]=null,Nr=En[--Tn],En[Tn]=null,kr=En[--Tn],En[Tn]=null}var fn=null,pn=null,et=!1,Bn=null;function wg(i,s){var l=An(5,null,null,0);l.elementType="DELETED",l.stateNode=s,l.return=i,s=i.deletions,s===null?(i.deletions=[l],i.flags|=16):s.push(l)}function Eg(i,s){switch(i.tag){case 5:var l=i.type;return s=s.nodeType!==1||l.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(i.stateNode=s,fn=i,pn=ai(s.firstChild),!0):!1;case 6:return s=i.pendingProps===""||s.nodeType!==3?null:s,s!==null?(i.stateNode=s,fn=i,pn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(l=os!==null?{id:kr,overflow:Nr}:null,i.memoizedState={dehydrated:s,treeContext:l,retryLane:1073741824},l=An(18,null,null,0),l.stateNode=s,l.return=i,i.child=l,fn=i,pn=null,!0):!1;default:return!1}}function ad(i){return(i.mode&1)!==0&&(i.flags&128)===0}function ld(i){if(et){var s=pn;if(s){var l=s;if(!Eg(i,s)){if(ad(i))throw Error(t(418));s=ai(l.nextSibling);var h=fn;s&&Eg(i,s)?wg(h,l):(i.flags=i.flags&-4097|2,et=!1,fn=i)}}else{if(ad(i))throw Error(t(418));i.flags=i.flags&-4097|2,et=!1,fn=i}}}function Tg(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;fn=i}function xu(i){if(i!==fn)return!1;if(!et)return Tg(i),et=!0,!1;var s;if((s=i.tag!==3)&&!(s=i.tag!==5)&&(s=i.type,s=s!=="head"&&s!=="body"&&!Zh(i.type,i.memoizedProps)),s&&(s=pn)){if(ad(i))throw Ig(),Error(t(418));for(;s;)wg(i,s),s=ai(s.nextSibling)}if(Tg(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,s=0;i;){if(i.nodeType===8){var l=i.data;if(l==="/$"){if(s===0){pn=ai(i.nextSibling);break e}s--}else l!=="$"&&l!=="$!"&&l!=="$?"||s++}i=i.nextSibling}pn=null}}else pn=fn?ai(i.stateNode.nextSibling):null;return!0}function Ig(){for(var i=pn;i;)i=ai(i.nextSibling)}function vo(){pn=fn=null,et=!1}function ud(i){Bn===null?Bn=[i]:Bn.push(i)}var T1=J.ReactCurrentBatchConfig;function Ua(i,s,l){if(i=l.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(t(309));var h=l.stateNode}if(!h)throw Error(t(147,i));var p=h,y=""+i;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===y?s.ref:(s=function(T){var b=p.refs;T===null?delete b[y]:b[y]=T},s._stringRef=y,s)}if(typeof i!="string")throw Error(t(284));if(!l._owner)throw Error(t(290,i))}return i}function ku(i,s){throw i=Object.prototype.toString.call(s),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i))}function Sg(i){var s=i._init;return s(i._payload)}function Rg(i){function s($,F){if(i){var q=$.deletions;q===null?($.deletions=[F],$.flags|=16):q.push(F)}}function l($,F){if(!i)return null;for(;F!==null;)s($,F),F=F.sibling;return null}function h($,F){for($=new Map;F!==null;)F.key!==null?$.set(F.key,F):$.set(F.index,F),F=F.sibling;return $}function p($,F){return $=vi($,F),$.index=0,$.sibling=null,$}function y($,F,q){return $.index=q,i?(q=$.alternate,q!==null?(q=q.index,q<F?($.flags|=2,F):q):($.flags|=2,F)):($.flags|=1048576,F)}function T($){return i&&$.alternate===null&&($.flags|=2),$}function b($,F,q,se){return F===null||F.tag!==6?(F=ef(q,$.mode,se),F.return=$,F):(F=p(F,q),F.return=$,F)}function M($,F,q,se){var ye=q.type;return ye===k?ne($,F,q.props.children,se,q.key):F!==null&&(F.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===st&&Sg(ye)===F.type)?(se=p(F,q.props),se.ref=Ua($,F,q),se.return=$,se):(se=ec(q.type,q.key,q.props,null,$.mode,se),se.ref=Ua($,F,q),se.return=$,se)}function K($,F,q,se){return F===null||F.tag!==4||F.stateNode.containerInfo!==q.containerInfo||F.stateNode.implementation!==q.implementation?(F=tf(q,$.mode,se),F.return=$,F):(F=p(F,q.children||[]),F.return=$,F)}function ne($,F,q,se,ye){return F===null||F.tag!==7?(F=ms(q,$.mode,se,ye),F.return=$,F):(F=p(F,q),F.return=$,F)}function re($,F,q){if(typeof F=="string"&&F!==""||typeof F=="number")return F=ef(""+F,$.mode,q),F.return=$,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case ie:return q=ec(F.type,F.key,F.props,null,$.mode,q),q.ref=Ua($,null,F),q.return=$,q;case Y:return F=tf(F,$.mode,q),F.return=$,F;case st:var se=F._init;return re($,se(F._payload),q)}if(_r(F)||ve(F))return F=ms(F,$.mode,q,null),F.return=$,F;ku($,F)}return null}function te($,F,q,se){var ye=F!==null?F.key:null;if(typeof q=="string"&&q!==""||typeof q=="number")return ye!==null?null:b($,F,""+q,se);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case ie:return q.key===ye?M($,F,q,se):null;case Y:return q.key===ye?K($,F,q,se):null;case st:return ye=q._init,te($,F,ye(q._payload),se)}if(_r(q)||ve(q))return ye!==null?null:ne($,F,q,se,null);ku($,q)}return null}function ue($,F,q,se,ye){if(typeof se=="string"&&se!==""||typeof se=="number")return $=$.get(q)||null,b(F,$,""+se,ye);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case ie:return $=$.get(se.key===null?q:se.key)||null,M(F,$,se,ye);case Y:return $=$.get(se.key===null?q:se.key)||null,K(F,$,se,ye);case st:var we=se._init;return ue($,F,q,we(se._payload),ye)}if(_r(se)||ve(se))return $=$.get(q)||null,ne(F,$,se,ye,null);ku(F,se)}return null}function pe($,F,q,se){for(var ye=null,we=null,Ee=F,Se=F=0,Ct=null;Ee!==null&&Se<q.length;Se++){Ee.index>Se?(Ct=Ee,Ee=null):Ct=Ee.sibling;var ze=te($,Ee,q[Se],se);if(ze===null){Ee===null&&(Ee=Ct);break}i&&Ee&&ze.alternate===null&&s($,Ee),F=y(ze,F,Se),we===null?ye=ze:we.sibling=ze,we=ze,Ee=Ct}if(Se===q.length)return l($,Ee),et&&as($,Se),ye;if(Ee===null){for(;Se<q.length;Se++)Ee=re($,q[Se],se),Ee!==null&&(F=y(Ee,F,Se),we===null?ye=Ee:we.sibling=Ee,we=Ee);return et&&as($,Se),ye}for(Ee=h($,Ee);Se<q.length;Se++)Ct=ue(Ee,$,Se,q[Se],se),Ct!==null&&(i&&Ct.alternate!==null&&Ee.delete(Ct.key===null?Se:Ct.key),F=y(Ct,F,Se),we===null?ye=Ct:we.sibling=Ct,we=Ct);return i&&Ee.forEach(function(_i){return s($,_i)}),et&&as($,Se),ye}function me($,F,q,se){var ye=ve(q);if(typeof ye!="function")throw Error(t(150));if(q=ye.call(q),q==null)throw Error(t(151));for(var we=ye=null,Ee=F,Se=F=0,Ct=null,ze=q.next();Ee!==null&&!ze.done;Se++,ze=q.next()){Ee.index>Se?(Ct=Ee,Ee=null):Ct=Ee.sibling;var _i=te($,Ee,ze.value,se);if(_i===null){Ee===null&&(Ee=Ct);break}i&&Ee&&_i.alternate===null&&s($,Ee),F=y(_i,F,Se),we===null?ye=_i:we.sibling=_i,we=_i,Ee=Ct}if(ze.done)return l($,Ee),et&&as($,Se),ye;if(Ee===null){for(;!ze.done;Se++,ze=q.next())ze=re($,ze.value,se),ze!==null&&(F=y(ze,F,Se),we===null?ye=ze:we.sibling=ze,we=ze);return et&&as($,Se),ye}for(Ee=h($,Ee);!ze.done;Se++,ze=q.next())ze=ue(Ee,$,Se,ze.value,se),ze!==null&&(i&&ze.alternate!==null&&Ee.delete(ze.key===null?Se:ze.key),F=y(ze,F,Se),we===null?ye=ze:we.sibling=ze,we=ze);return i&&Ee.forEach(function(tI){return s($,tI)}),et&&as($,Se),ye}function ct($,F,q,se){if(typeof q=="object"&&q!==null&&q.type===k&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case ie:e:{for(var ye=q.key,we=F;we!==null;){if(we.key===ye){if(ye=q.type,ye===k){if(we.tag===7){l($,we.sibling),F=p(we,q.props.children),F.return=$,$=F;break e}}else if(we.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===st&&Sg(ye)===we.type){l($,we.sibling),F=p(we,q.props),F.ref=Ua($,we,q),F.return=$,$=F;break e}l($,we);break}else s($,we);we=we.sibling}q.type===k?(F=ms(q.props.children,$.mode,se,q.key),F.return=$,$=F):(se=ec(q.type,q.key,q.props,null,$.mode,se),se.ref=Ua($,F,q),se.return=$,$=se)}return T($);case Y:e:{for(we=q.key;F!==null;){if(F.key===we)if(F.tag===4&&F.stateNode.containerInfo===q.containerInfo&&F.stateNode.implementation===q.implementation){l($,F.sibling),F=p(F,q.children||[]),F.return=$,$=F;break e}else{l($,F);break}else s($,F);F=F.sibling}F=tf(q,$.mode,se),F.return=$,$=F}return T($);case st:return we=q._init,ct($,F,we(q._payload),se)}if(_r(q))return pe($,F,q,se);if(ve(q))return me($,F,q,se);ku($,q)}return typeof q=="string"&&q!==""||typeof q=="number"?(q=""+q,F!==null&&F.tag===6?(l($,F.sibling),F=p(F,q),F.return=$,$=F):(l($,F),F=ef(q,$.mode,se),F.return=$,$=F),T($)):l($,F)}return ct}var _o=Rg(!0),Ag=Rg(!1),Nu=li(null),bu=null,wo=null,cd=null;function hd(){cd=wo=bu=null}function dd(i){var s=Nu.current;Ye(Nu),i._currentValue=s}function fd(i,s,l){for(;i!==null;){var h=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,h!==null&&(h.childLanes|=s)):h!==null&&(h.childLanes&s)!==s&&(h.childLanes|=s),i===l)break;i=i.return}}function Eo(i,s){bu=i,cd=wo=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&s)!==0&&(en=!0),i.firstContext=null)}function In(i){var s=i._currentValue;if(cd!==i)if(i={context:i,memoizedValue:s,next:null},wo===null){if(bu===null)throw Error(t(308));wo=i,bu.dependencies={lanes:0,firstContext:i}}else wo=wo.next=i;return s}var ls=null;function pd(i){ls===null?ls=[i]:ls.push(i)}function Cg(i,s,l,h){var p=s.interleaved;return p===null?(l.next=l,pd(s)):(l.next=p.next,p.next=l),s.interleaved=l,br(i,h)}function br(i,s){i.lanes|=s;var l=i.alternate;for(l!==null&&(l.lanes|=s),l=i,i=i.return;i!==null;)i.childLanes|=s,l=i.alternate,l!==null&&(l.childLanes|=s),l=i,i=i.return;return l.tag===3?l.stateNode:null}var hi=!1;function md(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Pg(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Dr(i,s){return{eventTime:i,lane:s,tag:0,payload:null,callback:null,next:null}}function di(i,s,l){var h=i.updateQueue;if(h===null)return null;if(h=h.shared,(Be&2)!==0){var p=h.pending;return p===null?s.next=s:(s.next=p.next,p.next=s),h.pending=s,br(i,l)}return p=h.interleaved,p===null?(s.next=s,pd(h)):(s.next=p.next,p.next=s),h.interleaved=s,br(i,l)}function Du(i,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194240)!==0)){var h=s.lanes;h&=i.pendingLanes,l|=h,s.lanes=l,ti(i,l)}}function xg(i,s){var l=i.updateQueue,h=i.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var p=null,y=null;if(l=l.firstBaseUpdate,l!==null){do{var T={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};y===null?p=y=T:y=y.next=T,l=l.next}while(l!==null);y===null?p=y=s:y=y.next=s}else p=y=s;l={baseState:h.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:h.shared,effects:h.effects},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=s:i.next=s,l.lastBaseUpdate=s}function Ou(i,s,l,h){var p=i.updateQueue;hi=!1;var y=p.firstBaseUpdate,T=p.lastBaseUpdate,b=p.shared.pending;if(b!==null){p.shared.pending=null;var M=b,K=M.next;M.next=null,T===null?y=K:T.next=K,T=M;var ne=i.alternate;ne!==null&&(ne=ne.updateQueue,b=ne.lastBaseUpdate,b!==T&&(b===null?ne.firstBaseUpdate=K:b.next=K,ne.lastBaseUpdate=M))}if(y!==null){var re=p.baseState;T=0,ne=K=M=null,b=y;do{var te=b.lane,ue=b.eventTime;if((h&te)===te){ne!==null&&(ne=ne.next={eventTime:ue,lane:0,tag:b.tag,payload:b.payload,callback:b.callback,next:null});e:{var pe=i,me=b;switch(te=s,ue=l,me.tag){case 1:if(pe=me.payload,typeof pe=="function"){re=pe.call(ue,re,te);break e}re=pe;break e;case 3:pe.flags=pe.flags&-65537|128;case 0:if(pe=me.payload,te=typeof pe=="function"?pe.call(ue,re,te):pe,te==null)break e;re=le({},re,te);break e;case 2:hi=!0}}b.callback!==null&&b.lane!==0&&(i.flags|=64,te=p.effects,te===null?p.effects=[b]:te.push(b))}else ue={eventTime:ue,lane:te,tag:b.tag,payload:b.payload,callback:b.callback,next:null},ne===null?(K=ne=ue,M=re):ne=ne.next=ue,T|=te;if(b=b.next,b===null){if(b=p.shared.pending,b===null)break;te=b,b=te.next,te.next=null,p.lastBaseUpdate=te,p.shared.pending=null}}while(!0);if(ne===null&&(M=re),p.baseState=M,p.firstBaseUpdate=K,p.lastBaseUpdate=ne,s=p.shared.interleaved,s!==null){p=s;do T|=p.lane,p=p.next;while(p!==s)}else y===null&&(p.shared.lanes=0);hs|=T,i.lanes=T,i.memoizedState=re}}function kg(i,s,l){if(i=s.effects,s.effects=null,i!==null)for(s=0;s<i.length;s++){var h=i[s],p=h.callback;if(p!==null){if(h.callback=null,h=l,typeof p!="function")throw Error(t(191,p));p.call(h)}}}var ja={},or=li(ja),Ba=li(ja),za=li(ja);function us(i){if(i===ja)throw Error(t(174));return i}function gd(i,s){switch(Qe(za,s),Qe(Ba,i),Qe(or,ja),i=s.nodeType,i){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:yt(null,"");break;default:i=i===8?s.parentNode:s,s=i.namespaceURI||null,i=i.tagName,s=yt(s,i)}Ye(or),Qe(or,s)}function To(){Ye(or),Ye(Ba),Ye(za)}function Ng(i){us(za.current);var s=us(or.current),l=yt(s,i.type);s!==l&&(Qe(Ba,i),Qe(or,l))}function yd(i){Ba.current===i&&(Ye(or),Ye(Ba))}var nt=li(0);function Lu(i){for(var s=i;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var vd=[];function _d(){for(var i=0;i<vd.length;i++)vd[i]._workInProgressVersionPrimary=null;vd.length=0}var Vu=J.ReactCurrentDispatcher,wd=J.ReactCurrentBatchConfig,cs=0,rt=null,_t=null,Rt=null,Mu=!1,$a=!1,qa=0,I1=0;function Mt(){throw Error(t(321))}function Ed(i,s){if(s===null)return!1;for(var l=0;l<s.length&&l<i.length;l++)if(!jn(i[l],s[l]))return!1;return!0}function Td(i,s,l,h,p,y){if(cs=y,rt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Vu.current=i===null||i.memoizedState===null?C1:P1,i=l(h,p),$a){y=0;do{if($a=!1,qa=0,25<=y)throw Error(t(301));y+=1,Rt=_t=null,s.updateQueue=null,Vu.current=x1,i=l(h,p)}while($a)}if(Vu.current=ju,s=_t!==null&&_t.next!==null,cs=0,Rt=_t=rt=null,Mu=!1,s)throw Error(t(300));return i}function Id(){var i=qa!==0;return qa=0,i}function ar(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rt===null?rt.memoizedState=Rt=i:Rt=Rt.next=i,Rt}function Sn(){if(_t===null){var i=rt.alternate;i=i!==null?i.memoizedState:null}else i=_t.next;var s=Rt===null?rt.memoizedState:Rt.next;if(s!==null)Rt=s,_t=i;else{if(i===null)throw Error(t(310));_t=i,i={memoizedState:_t.memoizedState,baseState:_t.baseState,baseQueue:_t.baseQueue,queue:_t.queue,next:null},Rt===null?rt.memoizedState=Rt=i:Rt=Rt.next=i}return Rt}function Ha(i,s){return typeof s=="function"?s(i):s}function Sd(i){var s=Sn(),l=s.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=i;var h=_t,p=h.baseQueue,y=l.pending;if(y!==null){if(p!==null){var T=p.next;p.next=y.next,y.next=T}h.baseQueue=p=y,l.pending=null}if(p!==null){y=p.next,h=h.baseState;var b=T=null,M=null,K=y;do{var ne=K.lane;if((cs&ne)===ne)M!==null&&(M=M.next={lane:0,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),h=K.hasEagerState?K.eagerState:i(h,K.action);else{var re={lane:ne,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null};M===null?(b=M=re,T=h):M=M.next=re,rt.lanes|=ne,hs|=ne}K=K.next}while(K!==null&&K!==y);M===null?T=h:M.next=b,jn(h,s.memoizedState)||(en=!0),s.memoizedState=h,s.baseState=T,s.baseQueue=M,l.lastRenderedState=h}if(i=l.interleaved,i!==null){p=i;do y=p.lane,rt.lanes|=y,hs|=y,p=p.next;while(p!==i)}else p===null&&(l.lanes=0);return[s.memoizedState,l.dispatch]}function Rd(i){var s=Sn(),l=s.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=i;var h=l.dispatch,p=l.pending,y=s.memoizedState;if(p!==null){l.pending=null;var T=p=p.next;do y=i(y,T.action),T=T.next;while(T!==p);jn(y,s.memoizedState)||(en=!0),s.memoizedState=y,s.baseQueue===null&&(s.baseState=y),l.lastRenderedState=y}return[y,h]}function bg(){}function Dg(i,s){var l=rt,h=Sn(),p=s(),y=!jn(h.memoizedState,p);if(y&&(h.memoizedState=p,en=!0),h=h.queue,Ad(Vg.bind(null,l,h,i),[i]),h.getSnapshot!==s||y||Rt!==null&&Rt.memoizedState.tag&1){if(l.flags|=2048,Wa(9,Lg.bind(null,l,h,p,s),void 0,null),At===null)throw Error(t(349));(cs&30)!==0||Og(l,s,p)}return p}function Og(i,s,l){i.flags|=16384,i={getSnapshot:s,value:l},s=rt.updateQueue,s===null?(s={lastEffect:null,stores:null},rt.updateQueue=s,s.stores=[i]):(l=s.stores,l===null?s.stores=[i]:l.push(i))}function Lg(i,s,l,h){s.value=l,s.getSnapshot=h,Mg(s)&&Fg(i)}function Vg(i,s,l){return l(function(){Mg(s)&&Fg(i)})}function Mg(i){var s=i.getSnapshot;i=i.value;try{var l=s();return!jn(i,l)}catch{return!0}}function Fg(i){var s=br(i,1);s!==null&&Hn(s,i,1,-1)}function Ug(i){var s=ar();return typeof i=="function"&&(i=i()),s.memoizedState=s.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ha,lastRenderedState:i},s.queue=i,i=i.dispatch=A1.bind(null,rt,i),[s.memoizedState,i]}function Wa(i,s,l,h){return i={tag:i,create:s,destroy:l,deps:h,next:null},s=rt.updateQueue,s===null?(s={lastEffect:null,stores:null},rt.updateQueue=s,s.lastEffect=i.next=i):(l=s.lastEffect,l===null?s.lastEffect=i.next=i:(h=l.next,l.next=i,i.next=h,s.lastEffect=i)),i}function jg(){return Sn().memoizedState}function Fu(i,s,l,h){var p=ar();rt.flags|=i,p.memoizedState=Wa(1|s,l,void 0,h===void 0?null:h)}function Uu(i,s,l,h){var p=Sn();h=h===void 0?null:h;var y=void 0;if(_t!==null){var T=_t.memoizedState;if(y=T.destroy,h!==null&&Ed(h,T.deps)){p.memoizedState=Wa(s,l,y,h);return}}rt.flags|=i,p.memoizedState=Wa(1|s,l,y,h)}function Bg(i,s){return Fu(8390656,8,i,s)}function Ad(i,s){return Uu(2048,8,i,s)}function zg(i,s){return Uu(4,2,i,s)}function $g(i,s){return Uu(4,4,i,s)}function qg(i,s){if(typeof s=="function")return i=i(),s(i),function(){s(null)};if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function Hg(i,s,l){return l=l!=null?l.concat([i]):null,Uu(4,4,qg.bind(null,s,i),l)}function Cd(){}function Wg(i,s){var l=Sn();s=s===void 0?null:s;var h=l.memoizedState;return h!==null&&s!==null&&Ed(s,h[1])?h[0]:(l.memoizedState=[i,s],i)}function Kg(i,s){var l=Sn();s=s===void 0?null:s;var h=l.memoizedState;return h!==null&&s!==null&&Ed(s,h[1])?h[0]:(i=i(),l.memoizedState=[i,s],i)}function Gg(i,s,l){return(cs&21)===0?(i.baseState&&(i.baseState=!1,en=!0),i.memoizedState=l):(jn(l,s)||(l=Zi(),rt.lanes|=l,hs|=l,i.baseState=!0),s)}function S1(i,s){var l=Me;Me=l!==0&&4>l?l:4,i(!0);var h=wd.transition;wd.transition={};try{i(!1),s()}finally{Me=l,wd.transition=h}}function Qg(){return Sn().memoizedState}function R1(i,s,l){var h=gi(i);if(l={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null},Jg(i))Yg(s,l);else if(l=Cg(i,s,l,h),l!==null){var p=Gt();Hn(l,i,h,p),Xg(l,s,h)}}function A1(i,s,l){var h=gi(i),p={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null};if(Jg(i))Yg(s,p);else{var y=i.alternate;if(i.lanes===0&&(y===null||y.lanes===0)&&(y=s.lastRenderedReducer,y!==null))try{var T=s.lastRenderedState,b=y(T,l);if(p.hasEagerState=!0,p.eagerState=b,jn(b,T)){var M=s.interleaved;M===null?(p.next=p,pd(s)):(p.next=M.next,M.next=p),s.interleaved=p;return}}catch{}finally{}l=Cg(i,s,p,h),l!==null&&(p=Gt(),Hn(l,i,h,p),Xg(l,s,h))}}function Jg(i){var s=i.alternate;return i===rt||s!==null&&s===rt}function Yg(i,s){$a=Mu=!0;var l=i.pending;l===null?s.next=s:(s.next=l.next,l.next=s),i.pending=s}function Xg(i,s,l){if((l&4194240)!==0){var h=s.lanes;h&=i.pendingLanes,l|=h,s.lanes=l,ti(i,l)}}var ju={readContext:In,useCallback:Mt,useContext:Mt,useEffect:Mt,useImperativeHandle:Mt,useInsertionEffect:Mt,useLayoutEffect:Mt,useMemo:Mt,useReducer:Mt,useRef:Mt,useState:Mt,useDebugValue:Mt,useDeferredValue:Mt,useTransition:Mt,useMutableSource:Mt,useSyncExternalStore:Mt,useId:Mt,unstable_isNewReconciler:!1},C1={readContext:In,useCallback:function(i,s){return ar().memoizedState=[i,s===void 0?null:s],i},useContext:In,useEffect:Bg,useImperativeHandle:function(i,s,l){return l=l!=null?l.concat([i]):null,Fu(4194308,4,qg.bind(null,s,i),l)},useLayoutEffect:function(i,s){return Fu(4194308,4,i,s)},useInsertionEffect:function(i,s){return Fu(4,2,i,s)},useMemo:function(i,s){var l=ar();return s=s===void 0?null:s,i=i(),l.memoizedState=[i,s],i},useReducer:function(i,s,l){var h=ar();return s=l!==void 0?l(s):s,h.memoizedState=h.baseState=s,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:s},h.queue=i,i=i.dispatch=R1.bind(null,rt,i),[h.memoizedState,i]},useRef:function(i){var s=ar();return i={current:i},s.memoizedState=i},useState:Ug,useDebugValue:Cd,useDeferredValue:function(i){return ar().memoizedState=i},useTransition:function(){var i=Ug(!1),s=i[0];return i=S1.bind(null,i[1]),ar().memoizedState=i,[s,i]},useMutableSource:function(){},useSyncExternalStore:function(i,s,l){var h=rt,p=ar();if(et){if(l===void 0)throw Error(t(407));l=l()}else{if(l=s(),At===null)throw Error(t(349));(cs&30)!==0||Og(h,s,l)}p.memoizedState=l;var y={value:l,getSnapshot:s};return p.queue=y,Bg(Vg.bind(null,h,y,i),[i]),h.flags|=2048,Wa(9,Lg.bind(null,h,y,l,s),void 0,null),l},useId:function(){var i=ar(),s=At.identifierPrefix;if(et){var l=Nr,h=kr;l=(h&~(1<<32-Ht(h)-1)).toString(32)+l,s=":"+s+"R"+l,l=qa++,0<l&&(s+="H"+l.toString(32)),s+=":"}else l=I1++,s=":"+s+"r"+l.toString(32)+":";return i.memoizedState=s},unstable_isNewReconciler:!1},P1={readContext:In,useCallback:Wg,useContext:In,useEffect:Ad,useImperativeHandle:Hg,useInsertionEffect:zg,useLayoutEffect:$g,useMemo:Kg,useReducer:Sd,useRef:jg,useState:function(){return Sd(Ha)},useDebugValue:Cd,useDeferredValue:function(i){var s=Sn();return Gg(s,_t.memoizedState,i)},useTransition:function(){var i=Sd(Ha)[0],s=Sn().memoizedState;return[i,s]},useMutableSource:bg,useSyncExternalStore:Dg,useId:Qg,unstable_isNewReconciler:!1},x1={readContext:In,useCallback:Wg,useContext:In,useEffect:Ad,useImperativeHandle:Hg,useInsertionEffect:zg,useLayoutEffect:$g,useMemo:Kg,useReducer:Rd,useRef:jg,useState:function(){return Rd(Ha)},useDebugValue:Cd,useDeferredValue:function(i){var s=Sn();return _t===null?s.memoizedState=i:Gg(s,_t.memoizedState,i)},useTransition:function(){var i=Rd(Ha)[0],s=Sn().memoizedState;return[i,s]},useMutableSource:bg,useSyncExternalStore:Dg,useId:Qg,unstable_isNewReconciler:!1};function zn(i,s){if(i&&i.defaultProps){s=le({},s),i=i.defaultProps;for(var l in i)s[l]===void 0&&(s[l]=i[l]);return s}return s}function Pd(i,s,l,h){s=i.memoizedState,l=l(h,s),l=l==null?s:le({},s,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var Bu={isMounted:function(i){return(i=i._reactInternals)?Dn(i)===i:!1},enqueueSetState:function(i,s,l){i=i._reactInternals;var h=Gt(),p=gi(i),y=Dr(h,p);y.payload=s,l!=null&&(y.callback=l),s=di(i,y,p),s!==null&&(Hn(s,i,p,h),Du(s,i,p))},enqueueReplaceState:function(i,s,l){i=i._reactInternals;var h=Gt(),p=gi(i),y=Dr(h,p);y.tag=1,y.payload=s,l!=null&&(y.callback=l),s=di(i,y,p),s!==null&&(Hn(s,i,p,h),Du(s,i,p))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var l=Gt(),h=gi(i),p=Dr(l,h);p.tag=2,s!=null&&(p.callback=s),s=di(i,p,h),s!==null&&(Hn(s,i,h,l),Du(s,i,h))}};function Zg(i,s,l,h,p,y,T){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(h,y,T):s.prototype&&s.prototype.isPureReactComponent?!ba(l,h)||!ba(p,y):!0}function ey(i,s,l){var h=!1,p=ui,y=s.contextType;return typeof y=="object"&&y!==null?y=In(y):(p=Zt(s)?ss:Vt.current,h=s.contextTypes,y=(h=h!=null)?mo(i,p):ui),s=new s(l,y),i.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Bu,i.stateNode=s,s._reactInternals=i,h&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=p,i.__reactInternalMemoizedMaskedChildContext=y),s}function ty(i,s,l,h){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,h),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,h),s.state!==i&&Bu.enqueueReplaceState(s,s.state,null)}function xd(i,s,l,h){var p=i.stateNode;p.props=l,p.state=i.memoizedState,p.refs={},md(i);var y=s.contextType;typeof y=="object"&&y!==null?p.context=In(y):(y=Zt(s)?ss:Vt.current,p.context=mo(i,y)),p.state=i.memoizedState,y=s.getDerivedStateFromProps,typeof y=="function"&&(Pd(i,s,y,l),p.state=i.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(s=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),s!==p.state&&Bu.enqueueReplaceState(p,p.state,null),Ou(i,l,p,h),p.state=i.memoizedState),typeof p.componentDidMount=="function"&&(i.flags|=4194308)}function Io(i,s){try{var l="",h=s;do l+=Ce(h),h=h.return;while(h);var p=l}catch(y){p=`
Error generating stack: `+y.message+`
`+y.stack}return{value:i,source:s,stack:p,digest:null}}function kd(i,s,l){return{value:i,source:null,stack:l??null,digest:s??null}}function Nd(i,s){try{console.error(s.value)}catch(l){setTimeout(function(){throw l})}}var k1=typeof WeakMap=="function"?WeakMap:Map;function ny(i,s,l){l=Dr(-1,l),l.tag=3,l.payload={element:null};var h=s.value;return l.callback=function(){Gu||(Gu=!0,Wd=h),Nd(i,s)},l}function ry(i,s,l){l=Dr(-1,l),l.tag=3;var h=i.type.getDerivedStateFromError;if(typeof h=="function"){var p=s.value;l.payload=function(){return h(p)},l.callback=function(){Nd(i,s)}}var y=i.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(l.callback=function(){Nd(i,s),typeof h!="function"&&(pi===null?pi=new Set([this]):pi.add(this));var T=s.stack;this.componentDidCatch(s.value,{componentStack:T!==null?T:""})}),l}function iy(i,s,l){var h=i.pingCache;if(h===null){h=i.pingCache=new k1;var p=new Set;h.set(s,p)}else p=h.get(s),p===void 0&&(p=new Set,h.set(s,p));p.has(l)||(p.add(l),i=q1.bind(null,i,s,l),s.then(i,i))}function sy(i){do{var s;if((s=i.tag===13)&&(s=i.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return i;i=i.return}while(i!==null);return null}function oy(i,s,l,h,p){return(i.mode&1)===0?(i===s?i.flags|=65536:(i.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(s=Dr(-1,1),s.tag=2,di(l,s,1))),l.lanes|=1),i):(i.flags|=65536,i.lanes=p,i)}var N1=J.ReactCurrentOwner,en=!1;function Kt(i,s,l,h){s.child=i===null?Ag(s,null,l,h):_o(s,i.child,l,h)}function ay(i,s,l,h,p){l=l.render;var y=s.ref;return Eo(s,p),h=Td(i,s,l,h,y,p),l=Id(),i!==null&&!en?(s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~p,Or(i,s,p)):(et&&l&&sd(s),s.flags|=1,Kt(i,s,h,p),s.child)}function ly(i,s,l,h,p){if(i===null){var y=l.type;return typeof y=="function"&&!Zd(y)&&y.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(s.tag=15,s.type=y,uy(i,s,y,h,p)):(i=ec(l.type,null,h,s,s.mode,p),i.ref=s.ref,i.return=s,s.child=i)}if(y=i.child,(i.lanes&p)===0){var T=y.memoizedProps;if(l=l.compare,l=l!==null?l:ba,l(T,h)&&i.ref===s.ref)return Or(i,s,p)}return s.flags|=1,i=vi(y,h),i.ref=s.ref,i.return=s,s.child=i}function uy(i,s,l,h,p){if(i!==null){var y=i.memoizedProps;if(ba(y,h)&&i.ref===s.ref)if(en=!1,s.pendingProps=h=y,(i.lanes&p)!==0)(i.flags&131072)!==0&&(en=!0);else return s.lanes=i.lanes,Or(i,s,p)}return bd(i,s,l,h,p)}function cy(i,s,l){var h=s.pendingProps,p=h.children,y=i!==null?i.memoizedState:null;if(h.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qe(Ro,mn),mn|=l;else{if((l&1073741824)===0)return i=y!==null?y.baseLanes|l:l,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:i,cachePool:null,transitions:null},s.updateQueue=null,Qe(Ro,mn),mn|=i,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=y!==null?y.baseLanes:l,Qe(Ro,mn),mn|=h}else y!==null?(h=y.baseLanes|l,s.memoizedState=null):h=l,Qe(Ro,mn),mn|=h;return Kt(i,s,p,l),s.child}function hy(i,s){var l=s.ref;(i===null&&l!==null||i!==null&&i.ref!==l)&&(s.flags|=512,s.flags|=2097152)}function bd(i,s,l,h,p){var y=Zt(l)?ss:Vt.current;return y=mo(s,y),Eo(s,p),l=Td(i,s,l,h,y,p),h=Id(),i!==null&&!en?(s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~p,Or(i,s,p)):(et&&h&&sd(s),s.flags|=1,Kt(i,s,l,p),s.child)}function dy(i,s,l,h,p){if(Zt(l)){var y=!0;Ru(s)}else y=!1;if(Eo(s,p),s.stateNode===null)$u(i,s),ey(s,l,h),xd(s,l,h,p),h=!0;else if(i===null){var T=s.stateNode,b=s.memoizedProps;T.props=b;var M=T.context,K=l.contextType;typeof K=="object"&&K!==null?K=In(K):(K=Zt(l)?ss:Vt.current,K=mo(s,K));var ne=l.getDerivedStateFromProps,re=typeof ne=="function"||typeof T.getSnapshotBeforeUpdate=="function";re||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(b!==h||M!==K)&&ty(s,T,h,K),hi=!1;var te=s.memoizedState;T.state=te,Ou(s,h,T,p),M=s.memoizedState,b!==h||te!==M||Xt.current||hi?(typeof ne=="function"&&(Pd(s,l,ne,h),M=s.memoizedState),(b=hi||Zg(s,l,b,h,te,M,K))?(re||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(s.flags|=4194308)):(typeof T.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=h,s.memoizedState=M),T.props=h,T.state=M,T.context=K,h=b):(typeof T.componentDidMount=="function"&&(s.flags|=4194308),h=!1)}else{T=s.stateNode,Pg(i,s),b=s.memoizedProps,K=s.type===s.elementType?b:zn(s.type,b),T.props=K,re=s.pendingProps,te=T.context,M=l.contextType,typeof M=="object"&&M!==null?M=In(M):(M=Zt(l)?ss:Vt.current,M=mo(s,M));var ue=l.getDerivedStateFromProps;(ne=typeof ue=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(b!==re||te!==M)&&ty(s,T,h,M),hi=!1,te=s.memoizedState,T.state=te,Ou(s,h,T,p);var pe=s.memoizedState;b!==re||te!==pe||Xt.current||hi?(typeof ue=="function"&&(Pd(s,l,ue,h),pe=s.memoizedState),(K=hi||Zg(s,l,K,h,te,pe,M)||!1)?(ne||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(h,pe,M),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(h,pe,M)),typeof T.componentDidUpdate=="function"&&(s.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof T.componentDidUpdate!="function"||b===i.memoizedProps&&te===i.memoizedState||(s.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||b===i.memoizedProps&&te===i.memoizedState||(s.flags|=1024),s.memoizedProps=h,s.memoizedState=pe),T.props=h,T.state=pe,T.context=M,h=K):(typeof T.componentDidUpdate!="function"||b===i.memoizedProps&&te===i.memoizedState||(s.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||b===i.memoizedProps&&te===i.memoizedState||(s.flags|=1024),h=!1)}return Dd(i,s,l,h,y,p)}function Dd(i,s,l,h,p,y){hy(i,s);var T=(s.flags&128)!==0;if(!h&&!T)return p&&yg(s,l,!1),Or(i,s,y);h=s.stateNode,N1.current=s;var b=T&&typeof l.getDerivedStateFromError!="function"?null:h.render();return s.flags|=1,i!==null&&T?(s.child=_o(s,i.child,null,y),s.child=_o(s,null,b,y)):Kt(i,s,b,y),s.memoizedState=h.state,p&&yg(s,l,!0),s.child}function fy(i){var s=i.stateNode;s.pendingContext?mg(i,s.pendingContext,s.pendingContext!==s.context):s.context&&mg(i,s.context,!1),gd(i,s.containerInfo)}function py(i,s,l,h,p){return vo(),ud(p),s.flags|=256,Kt(i,s,l,h),s.child}var Od={dehydrated:null,treeContext:null,retryLane:0};function Ld(i){return{baseLanes:i,cachePool:null,transitions:null}}function my(i,s,l){var h=s.pendingProps,p=nt.current,y=!1,T=(s.flags&128)!==0,b;if((b=T)||(b=i!==null&&i.memoizedState===null?!1:(p&2)!==0),b?(y=!0,s.flags&=-129):(i===null||i.memoizedState!==null)&&(p|=1),Qe(nt,p&1),i===null)return ld(s),i=s.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((s.mode&1)===0?s.lanes=1:i.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(T=h.children,i=h.fallback,y?(h=s.mode,y=s.child,T={mode:"hidden",children:T},(h&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=T):y=tc(T,h,0,null),i=ms(i,h,l,null),y.return=s,i.return=s,y.sibling=i,s.child=y,s.child.memoizedState=Ld(l),s.memoizedState=Od,i):Vd(s,T));if(p=i.memoizedState,p!==null&&(b=p.dehydrated,b!==null))return b1(i,s,T,h,b,p,l);if(y){y=h.fallback,T=s.mode,p=i.child,b=p.sibling;var M={mode:"hidden",children:h.children};return(T&1)===0&&s.child!==p?(h=s.child,h.childLanes=0,h.pendingProps=M,s.deletions=null):(h=vi(p,M),h.subtreeFlags=p.subtreeFlags&14680064),b!==null?y=vi(b,y):(y=ms(y,T,l,null),y.flags|=2),y.return=s,h.return=s,h.sibling=y,s.child=h,h=y,y=s.child,T=i.child.memoizedState,T=T===null?Ld(l):{baseLanes:T.baseLanes|l,cachePool:null,transitions:T.transitions},y.memoizedState=T,y.childLanes=i.childLanes&~l,s.memoizedState=Od,h}return y=i.child,i=y.sibling,h=vi(y,{mode:"visible",children:h.children}),(s.mode&1)===0&&(h.lanes=l),h.return=s,h.sibling=null,i!==null&&(l=s.deletions,l===null?(s.deletions=[i],s.flags|=16):l.push(i)),s.child=h,s.memoizedState=null,h}function Vd(i,s){return s=tc({mode:"visible",children:s},i.mode,0,null),s.return=i,i.child=s}function zu(i,s,l,h){return h!==null&&ud(h),_o(s,i.child,null,l),i=Vd(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function b1(i,s,l,h,p,y,T){if(l)return s.flags&256?(s.flags&=-257,h=kd(Error(t(422))),zu(i,s,T,h)):s.memoizedState!==null?(s.child=i.child,s.flags|=128,null):(y=h.fallback,p=s.mode,h=tc({mode:"visible",children:h.children},p,0,null),y=ms(y,p,T,null),y.flags|=2,h.return=s,y.return=s,h.sibling=y,s.child=h,(s.mode&1)!==0&&_o(s,i.child,null,T),s.child.memoizedState=Ld(T),s.memoizedState=Od,y);if((s.mode&1)===0)return zu(i,s,T,null);if(p.data==="$!"){if(h=p.nextSibling&&p.nextSibling.dataset,h)var b=h.dgst;return h=b,y=Error(t(419)),h=kd(y,h,void 0),zu(i,s,T,h)}if(b=(T&i.childLanes)!==0,en||b){if(h=At,h!==null){switch(T&-T){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=(p&(h.suspendedLanes|T))!==0?0:p,p!==0&&p!==y.retryLane&&(y.retryLane=p,br(i,p),Hn(h,i,p,-1))}return Xd(),h=kd(Error(t(421))),zu(i,s,T,h)}return p.data==="$?"?(s.flags|=128,s.child=i.child,s=H1.bind(null,i),p._reactRetry=s,null):(i=y.treeContext,pn=ai(p.nextSibling),fn=s,et=!0,Bn=null,i!==null&&(En[Tn++]=kr,En[Tn++]=Nr,En[Tn++]=os,kr=i.id,Nr=i.overflow,os=s),s=Vd(s,h.children),s.flags|=4096,s)}function gy(i,s,l){i.lanes|=s;var h=i.alternate;h!==null&&(h.lanes|=s),fd(i.return,s,l)}function Md(i,s,l,h,p){var y=i.memoizedState;y===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:p}:(y.isBackwards=s,y.rendering=null,y.renderingStartTime=0,y.last=h,y.tail=l,y.tailMode=p)}function yy(i,s,l){var h=s.pendingProps,p=h.revealOrder,y=h.tail;if(Kt(i,s,h.children,l),h=nt.current,(h&2)!==0)h=h&1|2,s.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&gy(i,l,s);else if(i.tag===19)gy(i,l,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}h&=1}if(Qe(nt,h),(s.mode&1)===0)s.memoizedState=null;else switch(p){case"forwards":for(l=s.child,p=null;l!==null;)i=l.alternate,i!==null&&Lu(i)===null&&(p=l),l=l.sibling;l=p,l===null?(p=s.child,s.child=null):(p=l.sibling,l.sibling=null),Md(s,!1,p,l,y);break;case"backwards":for(l=null,p=s.child,s.child=null;p!==null;){if(i=p.alternate,i!==null&&Lu(i)===null){s.child=p;break}i=p.sibling,p.sibling=l,l=p,p=i}Md(s,!0,l,null,y);break;case"together":Md(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function $u(i,s){(s.mode&1)===0&&i!==null&&(i.alternate=null,s.alternate=null,s.flags|=2)}function Or(i,s,l){if(i!==null&&(s.dependencies=i.dependencies),hs|=s.lanes,(l&s.childLanes)===0)return null;if(i!==null&&s.child!==i.child)throw Error(t(153));if(s.child!==null){for(i=s.child,l=vi(i,i.pendingProps),s.child=l,l.return=s;i.sibling!==null;)i=i.sibling,l=l.sibling=vi(i,i.pendingProps),l.return=s;l.sibling=null}return s.child}function D1(i,s,l){switch(s.tag){case 3:fy(s),vo();break;case 5:Ng(s);break;case 1:Zt(s.type)&&Ru(s);break;case 4:gd(s,s.stateNode.containerInfo);break;case 10:var h=s.type._context,p=s.memoizedProps.value;Qe(Nu,h._currentValue),h._currentValue=p;break;case 13:if(h=s.memoizedState,h!==null)return h.dehydrated!==null?(Qe(nt,nt.current&1),s.flags|=128,null):(l&s.child.childLanes)!==0?my(i,s,l):(Qe(nt,nt.current&1),i=Or(i,s,l),i!==null?i.sibling:null);Qe(nt,nt.current&1);break;case 19:if(h=(l&s.childLanes)!==0,(i.flags&128)!==0){if(h)return yy(i,s,l);s.flags|=128}if(p=s.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),Qe(nt,nt.current),h)break;return null;case 22:case 23:return s.lanes=0,cy(i,s,l)}return Or(i,s,l)}var vy,Fd,_y,wy;vy=function(i,s){for(var l=s.child;l!==null;){if(l.tag===5||l.tag===6)i.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},Fd=function(){},_y=function(i,s,l,h){var p=i.memoizedProps;if(p!==h){i=s.stateNode,us(or.current);var y=null;switch(l){case"input":p=zi(i,p),h=zi(i,h),y=[];break;case"select":p=le({},p,{value:void 0}),h=le({},h,{value:void 0}),y=[];break;case"textarea":p=aa(i,p),h=aa(i,h),y=[];break;default:typeof p.onClick!="function"&&typeof h.onClick=="function"&&(i.onclick=Tu)}fa(l,h);var T;l=null;for(K in p)if(!h.hasOwnProperty(K)&&p.hasOwnProperty(K)&&p[K]!=null)if(K==="style"){var b=p[K];for(T in b)b.hasOwnProperty(T)&&(l||(l={}),l[T]="")}else K!=="dangerouslySetInnerHTML"&&K!=="children"&&K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&K!=="autoFocus"&&(o.hasOwnProperty(K)?y||(y=[]):(y=y||[]).push(K,null));for(K in h){var M=h[K];if(b=p!=null?p[K]:void 0,h.hasOwnProperty(K)&&M!==b&&(M!=null||b!=null))if(K==="style")if(b){for(T in b)!b.hasOwnProperty(T)||M&&M.hasOwnProperty(T)||(l||(l={}),l[T]="");for(T in M)M.hasOwnProperty(T)&&b[T]!==M[T]&&(l||(l={}),l[T]=M[T])}else l||(y||(y=[]),y.push(K,l)),l=M;else K==="dangerouslySetInnerHTML"?(M=M?M.__html:void 0,b=b?b.__html:void 0,M!=null&&b!==M&&(y=y||[]).push(K,M)):K==="children"?typeof M!="string"&&typeof M!="number"||(y=y||[]).push(K,""+M):K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&(o.hasOwnProperty(K)?(M!=null&&K==="onScroll"&&Je("scroll",i),y||b===M||(y=[])):(y=y||[]).push(K,M))}l&&(y=y||[]).push("style",l);var K=y;(s.updateQueue=K)&&(s.flags|=4)}},wy=function(i,s,l,h){l!==h&&(s.flags|=4)};function Ka(i,s){if(!et)switch(i.tailMode){case"hidden":s=i.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:h.sibling=null}}function Ft(i){var s=i.alternate!==null&&i.alternate.child===i.child,l=0,h=0;if(s)for(var p=i.child;p!==null;)l|=p.lanes|p.childLanes,h|=p.subtreeFlags&14680064,h|=p.flags&14680064,p.return=i,p=p.sibling;else for(p=i.child;p!==null;)l|=p.lanes|p.childLanes,h|=p.subtreeFlags,h|=p.flags,p.return=i,p=p.sibling;return i.subtreeFlags|=h,i.childLanes=l,s}function O1(i,s,l){var h=s.pendingProps;switch(od(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ft(s),null;case 1:return Zt(s.type)&&Su(),Ft(s),null;case 3:return h=s.stateNode,To(),Ye(Xt),Ye(Vt),_d(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(i===null||i.child===null)&&(xu(s)?s.flags|=4:i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Bn!==null&&(Qd(Bn),Bn=null))),Fd(i,s),Ft(s),null;case 5:yd(s);var p=us(za.current);if(l=s.type,i!==null&&s.stateNode!=null)_y(i,s,l,h,p),i.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!h){if(s.stateNode===null)throw Error(t(166));return Ft(s),null}if(i=us(or.current),xu(s)){h=s.stateNode,l=s.type;var y=s.memoizedProps;switch(h[sr]=s,h[Ma]=y,i=(s.mode&1)!==0,l){case"dialog":Je("cancel",h),Je("close",h);break;case"iframe":case"object":case"embed":Je("load",h);break;case"video":case"audio":for(p=0;p<Oa.length;p++)Je(Oa[p],h);break;case"source":Je("error",h);break;case"img":case"image":case"link":Je("error",h),Je("load",h);break;case"details":Je("toggle",h);break;case"input":Vs(h,y),Je("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!y.multiple},Je("invalid",h);break;case"textarea":Fs(h,y),Je("invalid",h)}fa(l,y),p=null;for(var T in y)if(y.hasOwnProperty(T)){var b=y[T];T==="children"?typeof b=="string"?h.textContent!==b&&(y.suppressHydrationWarning!==!0&&Eu(h.textContent,b,i),p=["children",b]):typeof b=="number"&&h.textContent!==""+b&&(y.suppressHydrationWarning!==!0&&Eu(h.textContent,b,i),p=["children",""+b]):o.hasOwnProperty(T)&&b!=null&&T==="onScroll"&&Je("scroll",h)}switch(l){case"input":vr(h),Kl(h,y,!0);break;case"textarea":vr(h),la(h);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(h.onclick=Tu)}h=p,s.updateQueue=h,h!==null&&(s.flags|=4)}else{T=p.nodeType===9?p:p.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=gt(l)),i==="http://www.w3.org/1999/xhtml"?l==="script"?(i=T.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof h.is=="string"?i=T.createElement(l,{is:h.is}):(i=T.createElement(l),l==="select"&&(T=i,h.multiple?T.multiple=!0:h.size&&(T.size=h.size))):i=T.createElementNS(i,l),i[sr]=s,i[Ma]=h,vy(i,s,!1,!1),s.stateNode=i;e:{switch(T=pa(l,h),l){case"dialog":Je("cancel",i),Je("close",i),p=h;break;case"iframe":case"object":case"embed":Je("load",i),p=h;break;case"video":case"audio":for(p=0;p<Oa.length;p++)Je(Oa[p],i);p=h;break;case"source":Je("error",i),p=h;break;case"img":case"image":case"link":Je("error",i),Je("load",i),p=h;break;case"details":Je("toggle",i),p=h;break;case"input":Vs(i,h),p=zi(i,h),Je("invalid",i);break;case"option":p=h;break;case"select":i._wrapperState={wasMultiple:!!h.multiple},p=le({},h,{value:void 0}),Je("invalid",i);break;case"textarea":Fs(i,h),p=aa(i,h),Je("invalid",i);break;default:p=h}fa(l,p),b=p;for(y in b)if(b.hasOwnProperty(y)){var M=b[y];y==="style"?ha(i,M):y==="dangerouslySetInnerHTML"?(M=M?M.__html:void 0,M!=null&&ua(i,M)):y==="children"?typeof M=="string"?(l!=="textarea"||M!=="")&&Jr(i,M):typeof M=="number"&&Jr(i,""+M):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(o.hasOwnProperty(y)?M!=null&&y==="onScroll"&&Je("scroll",i):M!=null&&B(i,y,M,T))}switch(l){case"input":vr(i),Kl(i,h,!1);break;case"textarea":vr(i),la(i);break;case"option":h.value!=null&&i.setAttribute("value",""+Ne(h.value));break;case"select":i.multiple=!!h.multiple,y=h.value,y!=null?wr(i,!!h.multiple,y,!1):h.defaultValue!=null&&wr(i,!!h.multiple,h.defaultValue,!0);break;default:typeof p.onClick=="function"&&(i.onclick=Tu)}switch(l){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Ft(s),null;case 6:if(i&&s.stateNode!=null)wy(i,s,i.memoizedProps,h);else{if(typeof h!="string"&&s.stateNode===null)throw Error(t(166));if(l=us(za.current),us(or.current),xu(s)){if(h=s.stateNode,l=s.memoizedProps,h[sr]=s,(y=h.nodeValue!==l)&&(i=fn,i!==null))switch(i.tag){case 3:Eu(h.nodeValue,l,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Eu(h.nodeValue,l,(i.mode&1)!==0)}y&&(s.flags|=4)}else h=(l.nodeType===9?l:l.ownerDocument).createTextNode(h),h[sr]=s,s.stateNode=h}return Ft(s),null;case 13:if(Ye(nt),h=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(et&&pn!==null&&(s.mode&1)!==0&&(s.flags&128)===0)Ig(),vo(),s.flags|=98560,y=!1;else if(y=xu(s),h!==null&&h.dehydrated!==null){if(i===null){if(!y)throw Error(t(318));if(y=s.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(t(317));y[sr]=s}else vo(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ft(s),y=!1}else Bn!==null&&(Qd(Bn),Bn=null),y=!0;if(!y)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=l,s):(h=h!==null,h!==(i!==null&&i.memoizedState!==null)&&h&&(s.child.flags|=8192,(s.mode&1)!==0&&(i===null||(nt.current&1)!==0?wt===0&&(wt=3):Xd())),s.updateQueue!==null&&(s.flags|=4),Ft(s),null);case 4:return To(),Fd(i,s),i===null&&La(s.stateNode.containerInfo),Ft(s),null;case 10:return dd(s.type._context),Ft(s),null;case 17:return Zt(s.type)&&Su(),Ft(s),null;case 19:if(Ye(nt),y=s.memoizedState,y===null)return Ft(s),null;if(h=(s.flags&128)!==0,T=y.rendering,T===null)if(h)Ka(y,!1);else{if(wt!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(T=Lu(i),T!==null){for(s.flags|=128,Ka(y,!1),h=T.updateQueue,h!==null&&(s.updateQueue=h,s.flags|=4),s.subtreeFlags=0,h=l,l=s.child;l!==null;)y=l,i=h,y.flags&=14680066,T=y.alternate,T===null?(y.childLanes=0,y.lanes=i,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=T.childLanes,y.lanes=T.lanes,y.child=T.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=T.memoizedProps,y.memoizedState=T.memoizedState,y.updateQueue=T.updateQueue,y.type=T.type,i=T.dependencies,y.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),l=l.sibling;return Qe(nt,nt.current&1|2),s.child}i=i.sibling}y.tail!==null&&Ge()>Ao&&(s.flags|=128,h=!0,Ka(y,!1),s.lanes=4194304)}else{if(!h)if(i=Lu(T),i!==null){if(s.flags|=128,h=!0,l=i.updateQueue,l!==null&&(s.updateQueue=l,s.flags|=4),Ka(y,!0),y.tail===null&&y.tailMode==="hidden"&&!T.alternate&&!et)return Ft(s),null}else 2*Ge()-y.renderingStartTime>Ao&&l!==1073741824&&(s.flags|=128,h=!0,Ka(y,!1),s.lanes=4194304);y.isBackwards?(T.sibling=s.child,s.child=T):(l=y.last,l!==null?l.sibling=T:s.child=T,y.last=T)}return y.tail!==null?(s=y.tail,y.rendering=s,y.tail=s.sibling,y.renderingStartTime=Ge(),s.sibling=null,l=nt.current,Qe(nt,h?l&1|2:l&1),s):(Ft(s),null);case 22:case 23:return Yd(),h=s.memoizedState!==null,i!==null&&i.memoizedState!==null!==h&&(s.flags|=8192),h&&(s.mode&1)!==0?(mn&1073741824)!==0&&(Ft(s),s.subtreeFlags&6&&(s.flags|=8192)):Ft(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function L1(i,s){switch(od(s),s.tag){case 1:return Zt(s.type)&&Su(),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return To(),Ye(Xt),Ye(Vt),_d(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 5:return yd(s),null;case 13:if(Ye(nt),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(t(340));vo()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return Ye(nt),null;case 4:return To(),null;case 10:return dd(s.type._context),null;case 22:case 23:return Yd(),null;case 24:return null;default:return null}}var qu=!1,Ut=!1,V1=typeof WeakSet=="function"?WeakSet:Set,fe=null;function So(i,s){var l=i.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(h){at(i,s,h)}else l.current=null}function Ud(i,s,l){try{l()}catch(h){at(i,s,h)}}var Ey=!1;function M1(i,s){if(Yh=ii,i=Zm(),$h(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var p=h.anchorOffset,y=h.focusNode;h=h.focusOffset;try{l.nodeType,y.nodeType}catch{l=null;break e}var T=0,b=-1,M=-1,K=0,ne=0,re=i,te=null;t:for(;;){for(var ue;re!==l||p!==0&&re.nodeType!==3||(b=T+p),re!==y||h!==0&&re.nodeType!==3||(M=T+h),re.nodeType===3&&(T+=re.nodeValue.length),(ue=re.firstChild)!==null;)te=re,re=ue;for(;;){if(re===i)break t;if(te===l&&++K===p&&(b=T),te===y&&++ne===h&&(M=T),(ue=re.nextSibling)!==null)break;re=te,te=re.parentNode}re=ue}l=b===-1||M===-1?null:{start:b,end:M}}else l=null}l=l||{start:0,end:0}}else l=null;for(Xh={focusedElem:i,selectionRange:l},ii=!1,fe=s;fe!==null;)if(s=fe,i=s.child,(s.subtreeFlags&1028)!==0&&i!==null)i.return=s,fe=i;else for(;fe!==null;){s=fe;try{var pe=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(pe!==null){var me=pe.memoizedProps,ct=pe.memoizedState,$=s.stateNode,F=$.getSnapshotBeforeUpdate(s.elementType===s.type?me:zn(s.type,me),ct);$.__reactInternalSnapshotBeforeUpdate=F}break;case 3:var q=s.stateNode.containerInfo;q.nodeType===1?q.textContent="":q.nodeType===9&&q.documentElement&&q.removeChild(q.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(se){at(s,s.return,se)}if(i=s.sibling,i!==null){i.return=s.return,fe=i;break}fe=s.return}return pe=Ey,Ey=!1,pe}function Ga(i,s,l){var h=s.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var p=h=h.next;do{if((p.tag&i)===i){var y=p.destroy;p.destroy=void 0,y!==void 0&&Ud(s,l,y)}p=p.next}while(p!==h)}}function Hu(i,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var l=s=s.next;do{if((l.tag&i)===i){var h=l.create;l.destroy=h()}l=l.next}while(l!==s)}}function jd(i){var s=i.ref;if(s!==null){var l=i.stateNode;switch(i.tag){case 5:i=l;break;default:i=l}typeof s=="function"?s(i):s.current=i}}function Ty(i){var s=i.alternate;s!==null&&(i.alternate=null,Ty(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&(delete s[sr],delete s[Ma],delete s[nd],delete s[_1],delete s[w1])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Iy(i){return i.tag===5||i.tag===3||i.tag===4}function Sy(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Iy(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Bd(i,s,l){var h=i.tag;if(h===5||h===6)i=i.stateNode,s?l.nodeType===8?l.parentNode.insertBefore(i,s):l.insertBefore(i,s):(l.nodeType===8?(s=l.parentNode,s.insertBefore(i,l)):(s=l,s.appendChild(i)),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=Tu));else if(h!==4&&(i=i.child,i!==null))for(Bd(i,s,l),i=i.sibling;i!==null;)Bd(i,s,l),i=i.sibling}function zd(i,s,l){var h=i.tag;if(h===5||h===6)i=i.stateNode,s?l.insertBefore(i,s):l.appendChild(i);else if(h!==4&&(i=i.child,i!==null))for(zd(i,s,l),i=i.sibling;i!==null;)zd(i,s,l),i=i.sibling}var Nt=null,$n=!1;function fi(i,s,l){for(l=l.child;l!==null;)Ry(i,s,l),l=l.sibling}function Ry(i,s,l){if(un&&typeof un.onCommitFiberUnmount=="function")try{un.onCommitFiberUnmount(Yi,l)}catch{}switch(l.tag){case 5:Ut||So(l,s);case 6:var h=Nt,p=$n;Nt=null,fi(i,s,l),Nt=h,$n=p,Nt!==null&&($n?(i=Nt,l=l.stateNode,i.nodeType===8?i.parentNode.removeChild(l):i.removeChild(l)):Nt.removeChild(l.stateNode));break;case 18:Nt!==null&&($n?(i=Nt,l=l.stateNode,i.nodeType===8?td(i.parentNode,l):i.nodeType===1&&td(i,l),Fn(i)):td(Nt,l.stateNode));break;case 4:h=Nt,p=$n,Nt=l.stateNode.containerInfo,$n=!0,fi(i,s,l),Nt=h,$n=p;break;case 0:case 11:case 14:case 15:if(!Ut&&(h=l.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){p=h=h.next;do{var y=p,T=y.destroy;y=y.tag,T!==void 0&&((y&2)!==0||(y&4)!==0)&&Ud(l,s,T),p=p.next}while(p!==h)}fi(i,s,l);break;case 1:if(!Ut&&(So(l,s),h=l.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=l.memoizedProps,h.state=l.memoizedState,h.componentWillUnmount()}catch(b){at(l,s,b)}fi(i,s,l);break;case 21:fi(i,s,l);break;case 22:l.mode&1?(Ut=(h=Ut)||l.memoizedState!==null,fi(i,s,l),Ut=h):fi(i,s,l);break;default:fi(i,s,l)}}function Ay(i){var s=i.updateQueue;if(s!==null){i.updateQueue=null;var l=i.stateNode;l===null&&(l=i.stateNode=new V1),s.forEach(function(h){var p=W1.bind(null,i,h);l.has(h)||(l.add(h),h.then(p,p))})}}function qn(i,s){var l=s.deletions;if(l!==null)for(var h=0;h<l.length;h++){var p=l[h];try{var y=i,T=s,b=T;e:for(;b!==null;){switch(b.tag){case 5:Nt=b.stateNode,$n=!1;break e;case 3:Nt=b.stateNode.containerInfo,$n=!0;break e;case 4:Nt=b.stateNode.containerInfo,$n=!0;break e}b=b.return}if(Nt===null)throw Error(t(160));Ry(y,T,p),Nt=null,$n=!1;var M=p.alternate;M!==null&&(M.return=null),p.return=null}catch(K){at(p,s,K)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)Cy(s,i),s=s.sibling}function Cy(i,s){var l=i.alternate,h=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(qn(s,i),lr(i),h&4){try{Ga(3,i,i.return),Hu(3,i)}catch(me){at(i,i.return,me)}try{Ga(5,i,i.return)}catch(me){at(i,i.return,me)}}break;case 1:qn(s,i),lr(i),h&512&&l!==null&&So(l,l.return);break;case 5:if(qn(s,i),lr(i),h&512&&l!==null&&So(l,l.return),i.flags&32){var p=i.stateNode;try{Jr(p,"")}catch(me){at(i,i.return,me)}}if(h&4&&(p=i.stateNode,p!=null)){var y=i.memoizedProps,T=l!==null?l.memoizedProps:y,b=i.type,M=i.updateQueue;if(i.updateQueue=null,M!==null)try{b==="input"&&y.type==="radio"&&y.name!=null&&sa(p,y),pa(b,T);var K=pa(b,y);for(T=0;T<M.length;T+=2){var ne=M[T],re=M[T+1];ne==="style"?ha(p,re):ne==="dangerouslySetInnerHTML"?ua(p,re):ne==="children"?Jr(p,re):B(p,ne,re,K)}switch(b){case"input":oa(p,y);break;case"textarea":Us(p,y);break;case"select":var te=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!y.multiple;var ue=y.value;ue!=null?wr(p,!!y.multiple,ue,!1):te!==!!y.multiple&&(y.defaultValue!=null?wr(p,!!y.multiple,y.defaultValue,!0):wr(p,!!y.multiple,y.multiple?[]:"",!1))}p[Ma]=y}catch(me){at(i,i.return,me)}}break;case 6:if(qn(s,i),lr(i),h&4){if(i.stateNode===null)throw Error(t(162));p=i.stateNode,y=i.memoizedProps;try{p.nodeValue=y}catch(me){at(i,i.return,me)}}break;case 3:if(qn(s,i),lr(i),h&4&&l!==null&&l.memoizedState.isDehydrated)try{Fn(s.containerInfo)}catch(me){at(i,i.return,me)}break;case 4:qn(s,i),lr(i);break;case 13:qn(s,i),lr(i),p=i.child,p.flags&8192&&(y=p.memoizedState!==null,p.stateNode.isHidden=y,!y||p.alternate!==null&&p.alternate.memoizedState!==null||(Hd=Ge())),h&4&&Ay(i);break;case 22:if(ne=l!==null&&l.memoizedState!==null,i.mode&1?(Ut=(K=Ut)||ne,qn(s,i),Ut=K):qn(s,i),lr(i),h&8192){if(K=i.memoizedState!==null,(i.stateNode.isHidden=K)&&!ne&&(i.mode&1)!==0)for(fe=i,ne=i.child;ne!==null;){for(re=fe=ne;fe!==null;){switch(te=fe,ue=te.child,te.tag){case 0:case 11:case 14:case 15:Ga(4,te,te.return);break;case 1:So(te,te.return);var pe=te.stateNode;if(typeof pe.componentWillUnmount=="function"){h=te,l=te.return;try{s=h,pe.props=s.memoizedProps,pe.state=s.memoizedState,pe.componentWillUnmount()}catch(me){at(h,l,me)}}break;case 5:So(te,te.return);break;case 22:if(te.memoizedState!==null){ky(re);continue}}ue!==null?(ue.return=te,fe=ue):ky(re)}ne=ne.sibling}e:for(ne=null,re=i;;){if(re.tag===5){if(ne===null){ne=re;try{p=re.stateNode,K?(y=p.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(b=re.stateNode,M=re.memoizedProps.style,T=M!=null&&M.hasOwnProperty("display")?M.display:null,b.style.display=ca("display",T))}catch(me){at(i,i.return,me)}}}else if(re.tag===6){if(ne===null)try{re.stateNode.nodeValue=K?"":re.memoizedProps}catch(me){at(i,i.return,me)}}else if((re.tag!==22&&re.tag!==23||re.memoizedState===null||re===i)&&re.child!==null){re.child.return=re,re=re.child;continue}if(re===i)break e;for(;re.sibling===null;){if(re.return===null||re.return===i)break e;ne===re&&(ne=null),re=re.return}ne===re&&(ne=null),re.sibling.return=re.return,re=re.sibling}}break;case 19:qn(s,i),lr(i),h&4&&Ay(i);break;case 21:break;default:qn(s,i),lr(i)}}function lr(i){var s=i.flags;if(s&2){try{e:{for(var l=i.return;l!==null;){if(Iy(l)){var h=l;break e}l=l.return}throw Error(t(160))}switch(h.tag){case 5:var p=h.stateNode;h.flags&32&&(Jr(p,""),h.flags&=-33);var y=Sy(i);zd(i,y,p);break;case 3:case 4:var T=h.stateNode.containerInfo,b=Sy(i);Bd(i,b,T);break;default:throw Error(t(161))}}catch(M){at(i,i.return,M)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function F1(i,s,l){fe=i,Py(i)}function Py(i,s,l){for(var h=(i.mode&1)!==0;fe!==null;){var p=fe,y=p.child;if(p.tag===22&&h){var T=p.memoizedState!==null||qu;if(!T){var b=p.alternate,M=b!==null&&b.memoizedState!==null||Ut;b=qu;var K=Ut;if(qu=T,(Ut=M)&&!K)for(fe=p;fe!==null;)T=fe,M=T.child,T.tag===22&&T.memoizedState!==null?Ny(p):M!==null?(M.return=T,fe=M):Ny(p);for(;y!==null;)fe=y,Py(y),y=y.sibling;fe=p,qu=b,Ut=K}xy(i)}else(p.subtreeFlags&8772)!==0&&y!==null?(y.return=p,fe=y):xy(i)}}function xy(i){for(;fe!==null;){var s=fe;if((s.flags&8772)!==0){var l=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Ut||Hu(5,s);break;case 1:var h=s.stateNode;if(s.flags&4&&!Ut)if(l===null)h.componentDidMount();else{var p=s.elementType===s.type?l.memoizedProps:zn(s.type,l.memoizedProps);h.componentDidUpdate(p,l.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var y=s.updateQueue;y!==null&&kg(s,y,h);break;case 3:var T=s.updateQueue;if(T!==null){if(l=null,s.child!==null)switch(s.child.tag){case 5:l=s.child.stateNode;break;case 1:l=s.child.stateNode}kg(s,T,l)}break;case 5:var b=s.stateNode;if(l===null&&s.flags&4){l=b;var M=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":M.autoFocus&&l.focus();break;case"img":M.src&&(l.src=M.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var K=s.alternate;if(K!==null){var ne=K.memoizedState;if(ne!==null){var re=ne.dehydrated;re!==null&&Fn(re)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Ut||s.flags&512&&jd(s)}catch(te){at(s,s.return,te)}}if(s===i){fe=null;break}if(l=s.sibling,l!==null){l.return=s.return,fe=l;break}fe=s.return}}function ky(i){for(;fe!==null;){var s=fe;if(s===i){fe=null;break}var l=s.sibling;if(l!==null){l.return=s.return,fe=l;break}fe=s.return}}function Ny(i){for(;fe!==null;){var s=fe;try{switch(s.tag){case 0:case 11:case 15:var l=s.return;try{Hu(4,s)}catch(M){at(s,l,M)}break;case 1:var h=s.stateNode;if(typeof h.componentDidMount=="function"){var p=s.return;try{h.componentDidMount()}catch(M){at(s,p,M)}}var y=s.return;try{jd(s)}catch(M){at(s,y,M)}break;case 5:var T=s.return;try{jd(s)}catch(M){at(s,T,M)}}}catch(M){at(s,s.return,M)}if(s===i){fe=null;break}var b=s.sibling;if(b!==null){b.return=s.return,fe=b;break}fe=s.return}}var U1=Math.ceil,Wu=J.ReactCurrentDispatcher,$d=J.ReactCurrentOwner,Rn=J.ReactCurrentBatchConfig,Be=0,At=null,ft=null,bt=0,mn=0,Ro=li(0),wt=0,Qa=null,hs=0,Ku=0,qd=0,Ja=null,tn=null,Hd=0,Ao=1/0,Lr=null,Gu=!1,Wd=null,pi=null,Qu=!1,mi=null,Ju=0,Ya=0,Kd=null,Yu=-1,Xu=0;function Gt(){return(Be&6)!==0?Ge():Yu!==-1?Yu:Yu=Ge()}function gi(i){return(i.mode&1)===0?1:(Be&2)!==0&&bt!==0?bt&-bt:T1.transition!==null?(Xu===0&&(Xu=Zi()),Xu):(i=Me,i!==0||(i=window.event,i=i===void 0?16:Ra(i.type)),i)}function Hn(i,s,l,h){if(50<Ya)throw Ya=0,Kd=null,Error(t(185));ei(i,l,h),((Be&2)===0||i!==At)&&(i===At&&((Be&2)===0&&(Ku|=l),wt===4&&yi(i,bt)),nn(i,h),l===1&&Be===0&&(s.mode&1)===0&&(Ao=Ge()+500,Au&&ci()))}function nn(i,s){var l=i.callbackNode;Ir(i,s);var h=Xi(i,i===At?bt:0);if(h===0)l!==null&&wa(l),i.callbackNode=null,i.callbackPriority=0;else if(s=h&-h,i.callbackPriority!==s){if(l!=null&&wa(l),s===1)i.tag===0?E1(Dy.bind(null,i)):vg(Dy.bind(null,i)),y1(function(){(Be&6)===0&&ci()}),l=null;else{switch(ni(h)){case 1:l=Ji;break;case 4:l=Yr;break;case 16:l=vn;break;case 536870912:l=Xl;break;default:l=vn}l=By(l,by.bind(null,i))}i.callbackPriority=s,i.callbackNode=l}}function by(i,s){if(Yu=-1,Xu=0,(Be&6)!==0)throw Error(t(327));var l=i.callbackNode;if(Co()&&i.callbackNode!==l)return null;var h=Xi(i,i===At?bt:0);if(h===0)return null;if((h&30)!==0||(h&i.expiredLanes)!==0||s)s=Zu(i,h);else{s=h;var p=Be;Be|=2;var y=Ly();(At!==i||bt!==s)&&(Lr=null,Ao=Ge()+500,fs(i,s));do try{z1();break}catch(b){Oy(i,b)}while(!0);hd(),Wu.current=y,Be=p,ft!==null?s=0:(At=null,bt=0,s=wt)}if(s!==0){if(s===2&&(p=cn(i),p!==0&&(h=p,s=Gd(i,p))),s===1)throw l=Qa,fs(i,0),yi(i,h),nn(i,Ge()),l;if(s===6)yi(i,h);else{if(p=i.current.alternate,(h&30)===0&&!j1(p)&&(s=Zu(i,h),s===2&&(y=cn(i),y!==0&&(h=y,s=Gd(i,y))),s===1))throw l=Qa,fs(i,0),yi(i,h),nn(i,Ge()),l;switch(i.finishedWork=p,i.finishedLanes=h,s){case 0:case 1:throw Error(t(345));case 2:ps(i,tn,Lr);break;case 3:if(yi(i,h),(h&130023424)===h&&(s=Hd+500-Ge(),10<s)){if(Xi(i,0)!==0)break;if(p=i.suspendedLanes,(p&h)!==h){Gt(),i.pingedLanes|=i.suspendedLanes&p;break}i.timeoutHandle=ed(ps.bind(null,i,tn,Lr),s);break}ps(i,tn,Lr);break;case 4:if(yi(i,h),(h&4194240)===h)break;for(s=i.eventTimes,p=-1;0<h;){var T=31-Ht(h);y=1<<T,T=s[T],T>p&&(p=T),h&=~y}if(h=p,h=Ge()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*U1(h/1960))-h,10<h){i.timeoutHandle=ed(ps.bind(null,i,tn,Lr),h);break}ps(i,tn,Lr);break;case 5:ps(i,tn,Lr);break;default:throw Error(t(329))}}}return nn(i,Ge()),i.callbackNode===l?by.bind(null,i):null}function Gd(i,s){var l=Ja;return i.current.memoizedState.isDehydrated&&(fs(i,s).flags|=256),i=Zu(i,s),i!==2&&(s=tn,tn=l,s!==null&&Qd(s)),i}function Qd(i){tn===null?tn=i:tn.push.apply(tn,i)}function j1(i){for(var s=i;;){if(s.flags&16384){var l=s.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var h=0;h<l.length;h++){var p=l[h],y=p.getSnapshot;p=p.value;try{if(!jn(y(),p))return!1}catch{return!1}}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function yi(i,s){for(s&=~qd,s&=~Ku,i.suspendedLanes|=s,i.pingedLanes&=~s,i=i.expirationTimes;0<s;){var l=31-Ht(s),h=1<<l;i[l]=-1,s&=~h}}function Dy(i){if((Be&6)!==0)throw Error(t(327));Co();var s=Xi(i,0);if((s&1)===0)return nn(i,Ge()),null;var l=Zu(i,s);if(i.tag!==0&&l===2){var h=cn(i);h!==0&&(s=h,l=Gd(i,h))}if(l===1)throw l=Qa,fs(i,0),yi(i,s),nn(i,Ge()),l;if(l===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=s,ps(i,tn,Lr),nn(i,Ge()),null}function Jd(i,s){var l=Be;Be|=1;try{return i(s)}finally{Be=l,Be===0&&(Ao=Ge()+500,Au&&ci())}}function ds(i){mi!==null&&mi.tag===0&&(Be&6)===0&&Co();var s=Be;Be|=1;var l=Rn.transition,h=Me;try{if(Rn.transition=null,Me=1,i)return i()}finally{Me=h,Rn.transition=l,Be=s,(Be&6)===0&&ci()}}function Yd(){mn=Ro.current,Ye(Ro)}function fs(i,s){i.finishedWork=null,i.finishedLanes=0;var l=i.timeoutHandle;if(l!==-1&&(i.timeoutHandle=-1,g1(l)),ft!==null)for(l=ft.return;l!==null;){var h=l;switch(od(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&Su();break;case 3:To(),Ye(Xt),Ye(Vt),_d();break;case 5:yd(h);break;case 4:To();break;case 13:Ye(nt);break;case 19:Ye(nt);break;case 10:dd(h.type._context);break;case 22:case 23:Yd()}l=l.return}if(At=i,ft=i=vi(i.current,null),bt=mn=s,wt=0,Qa=null,qd=Ku=hs=0,tn=Ja=null,ls!==null){for(s=0;s<ls.length;s++)if(l=ls[s],h=l.interleaved,h!==null){l.interleaved=null;var p=h.next,y=l.pending;if(y!==null){var T=y.next;y.next=p,h.next=T}l.pending=h}ls=null}return i}function Oy(i,s){do{var l=ft;try{if(hd(),Vu.current=ju,Mu){for(var h=rt.memoizedState;h!==null;){var p=h.queue;p!==null&&(p.pending=null),h=h.next}Mu=!1}if(cs=0,Rt=_t=rt=null,$a=!1,qa=0,$d.current=null,l===null||l.return===null){wt=1,Qa=s,ft=null;break}e:{var y=i,T=l.return,b=l,M=s;if(s=bt,b.flags|=32768,M!==null&&typeof M=="object"&&typeof M.then=="function"){var K=M,ne=b,re=ne.tag;if((ne.mode&1)===0&&(re===0||re===11||re===15)){var te=ne.alternate;te?(ne.updateQueue=te.updateQueue,ne.memoizedState=te.memoizedState,ne.lanes=te.lanes):(ne.updateQueue=null,ne.memoizedState=null)}var ue=sy(T);if(ue!==null){ue.flags&=-257,oy(ue,T,b,y,s),ue.mode&1&&iy(y,K,s),s=ue,M=K;var pe=s.updateQueue;if(pe===null){var me=new Set;me.add(M),s.updateQueue=me}else pe.add(M);break e}else{if((s&1)===0){iy(y,K,s),Xd();break e}M=Error(t(426))}}else if(et&&b.mode&1){var ct=sy(T);if(ct!==null){(ct.flags&65536)===0&&(ct.flags|=256),oy(ct,T,b,y,s),ud(Io(M,b));break e}}y=M=Io(M,b),wt!==4&&(wt=2),Ja===null?Ja=[y]:Ja.push(y),y=T;do{switch(y.tag){case 3:y.flags|=65536,s&=-s,y.lanes|=s;var $=ny(y,M,s);xg(y,$);break e;case 1:b=M;var F=y.type,q=y.stateNode;if((y.flags&128)===0&&(typeof F.getDerivedStateFromError=="function"||q!==null&&typeof q.componentDidCatch=="function"&&(pi===null||!pi.has(q)))){y.flags|=65536,s&=-s,y.lanes|=s;var se=ry(y,b,s);xg(y,se);break e}}y=y.return}while(y!==null)}My(l)}catch(ye){s=ye,ft===l&&l!==null&&(ft=l=l.return);continue}break}while(!0)}function Ly(){var i=Wu.current;return Wu.current=ju,i===null?ju:i}function Xd(){(wt===0||wt===3||wt===2)&&(wt=4),At===null||(hs&268435455)===0&&(Ku&268435455)===0||yi(At,bt)}function Zu(i,s){var l=Be;Be|=2;var h=Ly();(At!==i||bt!==s)&&(Lr=null,fs(i,s));do try{B1();break}catch(p){Oy(i,p)}while(!0);if(hd(),Be=l,Wu.current=h,ft!==null)throw Error(t(261));return At=null,bt=0,wt}function B1(){for(;ft!==null;)Vy(ft)}function z1(){for(;ft!==null&&!Jl();)Vy(ft)}function Vy(i){var s=jy(i.alternate,i,mn);i.memoizedProps=i.pendingProps,s===null?My(i):ft=s,$d.current=null}function My(i){var s=i;do{var l=s.alternate;if(i=s.return,(s.flags&32768)===0){if(l=O1(l,s,mn),l!==null){ft=l;return}}else{if(l=L1(l,s),l!==null){l.flags&=32767,ft=l;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{wt=6,ft=null;return}}if(s=s.sibling,s!==null){ft=s;return}ft=s=i}while(s!==null);wt===0&&(wt=5)}function ps(i,s,l){var h=Me,p=Rn.transition;try{Rn.transition=null,Me=1,$1(i,s,l,h)}finally{Rn.transition=p,Me=h}return null}function $1(i,s,l,h){do Co();while(mi!==null);if((Be&6)!==0)throw Error(t(327));l=i.finishedWork;var p=i.finishedLanes;if(l===null)return null;if(i.finishedWork=null,i.finishedLanes=0,l===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var y=l.lanes|l.childLanes;if(Ke(i,y),i===At&&(ft=At=null,bt=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||Qu||(Qu=!0,By(vn,function(){return Co(),null})),y=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||y){y=Rn.transition,Rn.transition=null;var T=Me;Me=1;var b=Be;Be|=4,$d.current=null,M1(i,l),Cy(l,i),u1(Xh),ii=!!Yh,Xh=Yh=null,i.current=l,F1(l),Lh(),Be=b,Me=T,Rn.transition=y}else i.current=l;if(Qu&&(Qu=!1,mi=i,Ju=p),y=i.pendingLanes,y===0&&(pi=null),Zl(l.stateNode),nn(i,Ge()),s!==null)for(h=i.onRecoverableError,l=0;l<s.length;l++)p=s[l],h(p.value,{componentStack:p.stack,digest:p.digest});if(Gu)throw Gu=!1,i=Wd,Wd=null,i;return(Ju&1)!==0&&i.tag!==0&&Co(),y=i.pendingLanes,(y&1)!==0?i===Kd?Ya++:(Ya=0,Kd=i):Ya=0,ci(),null}function Co(){if(mi!==null){var i=ni(Ju),s=Rn.transition,l=Me;try{if(Rn.transition=null,Me=16>i?16:i,mi===null)var h=!1;else{if(i=mi,mi=null,Ju=0,(Be&6)!==0)throw Error(t(331));var p=Be;for(Be|=4,fe=i.current;fe!==null;){var y=fe,T=y.child;if((fe.flags&16)!==0){var b=y.deletions;if(b!==null){for(var M=0;M<b.length;M++){var K=b[M];for(fe=K;fe!==null;){var ne=fe;switch(ne.tag){case 0:case 11:case 15:Ga(8,ne,y)}var re=ne.child;if(re!==null)re.return=ne,fe=re;else for(;fe!==null;){ne=fe;var te=ne.sibling,ue=ne.return;if(Ty(ne),ne===K){fe=null;break}if(te!==null){te.return=ue,fe=te;break}fe=ue}}}var pe=y.alternate;if(pe!==null){var me=pe.child;if(me!==null){pe.child=null;do{var ct=me.sibling;me.sibling=null,me=ct}while(me!==null)}}fe=y}}if((y.subtreeFlags&2064)!==0&&T!==null)T.return=y,fe=T;else e:for(;fe!==null;){if(y=fe,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:Ga(9,y,y.return)}var $=y.sibling;if($!==null){$.return=y.return,fe=$;break e}fe=y.return}}var F=i.current;for(fe=F;fe!==null;){T=fe;var q=T.child;if((T.subtreeFlags&2064)!==0&&q!==null)q.return=T,fe=q;else e:for(T=F;fe!==null;){if(b=fe,(b.flags&2048)!==0)try{switch(b.tag){case 0:case 11:case 15:Hu(9,b)}}catch(ye){at(b,b.return,ye)}if(b===T){fe=null;break e}var se=b.sibling;if(se!==null){se.return=b.return,fe=se;break e}fe=b.return}}if(Be=p,ci(),un&&typeof un.onPostCommitFiberRoot=="function")try{un.onPostCommitFiberRoot(Yi,i)}catch{}h=!0}return h}finally{Me=l,Rn.transition=s}}return!1}function Fy(i,s,l){s=Io(l,s),s=ny(i,s,1),i=di(i,s,1),s=Gt(),i!==null&&(ei(i,1,s),nn(i,s))}function at(i,s,l){if(i.tag===3)Fy(i,i,l);else for(;s!==null;){if(s.tag===3){Fy(s,i,l);break}else if(s.tag===1){var h=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(pi===null||!pi.has(h))){i=Io(l,i),i=ry(s,i,1),s=di(s,i,1),i=Gt(),s!==null&&(ei(s,1,i),nn(s,i));break}}s=s.return}}function q1(i,s,l){var h=i.pingCache;h!==null&&h.delete(s),s=Gt(),i.pingedLanes|=i.suspendedLanes&l,At===i&&(bt&l)===l&&(wt===4||wt===3&&(bt&130023424)===bt&&500>Ge()-Hd?fs(i,0):qd|=l),nn(i,s)}function Uy(i,s){s===0&&((i.mode&1)===0?s=1:(s=Qs,Qs<<=1,(Qs&130023424)===0&&(Qs=4194304)));var l=Gt();i=br(i,s),i!==null&&(ei(i,s,l),nn(i,l))}function H1(i){var s=i.memoizedState,l=0;s!==null&&(l=s.retryLane),Uy(i,l)}function W1(i,s){var l=0;switch(i.tag){case 13:var h=i.stateNode,p=i.memoizedState;p!==null&&(l=p.retryLane);break;case 19:h=i.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(s),Uy(i,l)}var jy;jy=function(i,s,l){if(i!==null)if(i.memoizedProps!==s.pendingProps||Xt.current)en=!0;else{if((i.lanes&l)===0&&(s.flags&128)===0)return en=!1,D1(i,s,l);en=(i.flags&131072)!==0}else en=!1,et&&(s.flags&1048576)!==0&&_g(s,Pu,s.index);switch(s.lanes=0,s.tag){case 2:var h=s.type;$u(i,s),i=s.pendingProps;var p=mo(s,Vt.current);Eo(s,l),p=Td(null,s,h,i,p,l);var y=Id();return s.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Zt(h)?(y=!0,Ru(s)):y=!1,s.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,md(s),p.updater=Bu,s.stateNode=p,p._reactInternals=s,xd(s,h,i,l),s=Dd(null,s,h,!0,y,l)):(s.tag=0,et&&y&&sd(s),Kt(null,s,p,l),s=s.child),s;case 16:h=s.elementType;e:{switch($u(i,s),i=s.pendingProps,p=h._init,h=p(h._payload),s.type=h,p=s.tag=G1(h),i=zn(h,i),p){case 0:s=bd(null,s,h,i,l);break e;case 1:s=dy(null,s,h,i,l);break e;case 11:s=ay(null,s,h,i,l);break e;case 14:s=ly(null,s,h,zn(h.type,i),l);break e}throw Error(t(306,h,""))}return s;case 0:return h=s.type,p=s.pendingProps,p=s.elementType===h?p:zn(h,p),bd(i,s,h,p,l);case 1:return h=s.type,p=s.pendingProps,p=s.elementType===h?p:zn(h,p),dy(i,s,h,p,l);case 3:e:{if(fy(s),i===null)throw Error(t(387));h=s.pendingProps,y=s.memoizedState,p=y.element,Pg(i,s),Ou(s,h,null,l);var T=s.memoizedState;if(h=T.element,y.isDehydrated)if(y={element:h,isDehydrated:!1,cache:T.cache,pendingSuspenseBoundaries:T.pendingSuspenseBoundaries,transitions:T.transitions},s.updateQueue.baseState=y,s.memoizedState=y,s.flags&256){p=Io(Error(t(423)),s),s=py(i,s,h,l,p);break e}else if(h!==p){p=Io(Error(t(424)),s),s=py(i,s,h,l,p);break e}else for(pn=ai(s.stateNode.containerInfo.firstChild),fn=s,et=!0,Bn=null,l=Ag(s,null,h,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(vo(),h===p){s=Or(i,s,l);break e}Kt(i,s,h,l)}s=s.child}return s;case 5:return Ng(s),i===null&&ld(s),h=s.type,p=s.pendingProps,y=i!==null?i.memoizedProps:null,T=p.children,Zh(h,p)?T=null:y!==null&&Zh(h,y)&&(s.flags|=32),hy(i,s),Kt(i,s,T,l),s.child;case 6:return i===null&&ld(s),null;case 13:return my(i,s,l);case 4:return gd(s,s.stateNode.containerInfo),h=s.pendingProps,i===null?s.child=_o(s,null,h,l):Kt(i,s,h,l),s.child;case 11:return h=s.type,p=s.pendingProps,p=s.elementType===h?p:zn(h,p),ay(i,s,h,p,l);case 7:return Kt(i,s,s.pendingProps,l),s.child;case 8:return Kt(i,s,s.pendingProps.children,l),s.child;case 12:return Kt(i,s,s.pendingProps.children,l),s.child;case 10:e:{if(h=s.type._context,p=s.pendingProps,y=s.memoizedProps,T=p.value,Qe(Nu,h._currentValue),h._currentValue=T,y!==null)if(jn(y.value,T)){if(y.children===p.children&&!Xt.current){s=Or(i,s,l);break e}}else for(y=s.child,y!==null&&(y.return=s);y!==null;){var b=y.dependencies;if(b!==null){T=y.child;for(var M=b.firstContext;M!==null;){if(M.context===h){if(y.tag===1){M=Dr(-1,l&-l),M.tag=2;var K=y.updateQueue;if(K!==null){K=K.shared;var ne=K.pending;ne===null?M.next=M:(M.next=ne.next,ne.next=M),K.pending=M}}y.lanes|=l,M=y.alternate,M!==null&&(M.lanes|=l),fd(y.return,l,s),b.lanes|=l;break}M=M.next}}else if(y.tag===10)T=y.type===s.type?null:y.child;else if(y.tag===18){if(T=y.return,T===null)throw Error(t(341));T.lanes|=l,b=T.alternate,b!==null&&(b.lanes|=l),fd(T,l,s),T=y.sibling}else T=y.child;if(T!==null)T.return=y;else for(T=y;T!==null;){if(T===s){T=null;break}if(y=T.sibling,y!==null){y.return=T.return,T=y;break}T=T.return}y=T}Kt(i,s,p.children,l),s=s.child}return s;case 9:return p=s.type,h=s.pendingProps.children,Eo(s,l),p=In(p),h=h(p),s.flags|=1,Kt(i,s,h,l),s.child;case 14:return h=s.type,p=zn(h,s.pendingProps),p=zn(h.type,p),ly(i,s,h,p,l);case 15:return uy(i,s,s.type,s.pendingProps,l);case 17:return h=s.type,p=s.pendingProps,p=s.elementType===h?p:zn(h,p),$u(i,s),s.tag=1,Zt(h)?(i=!0,Ru(s)):i=!1,Eo(s,l),ey(s,h,p),xd(s,h,p,l),Dd(null,s,h,!0,i,l);case 19:return yy(i,s,l);case 22:return cy(i,s,l)}throw Error(t(156,s.tag))};function By(i,s){return Ks(i,s)}function K1(i,s,l,h){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function An(i,s,l,h){return new K1(i,s,l,h)}function Zd(i){return i=i.prototype,!(!i||!i.isReactComponent)}function G1(i){if(typeof i=="function")return Zd(i)?1:0;if(i!=null){if(i=i.$$typeof,i===V)return 11;if(i===We)return 14}return 2}function vi(i,s){var l=i.alternate;return l===null?(l=An(i.tag,s,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=s,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&14680064,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,s=i.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l}function ec(i,s,l,h,p,y){var T=2;if(h=i,typeof i=="function")Zd(i)&&(T=1);else if(typeof i=="string")T=5;else e:switch(i){case k:return ms(l.children,p,y,s);case I:T=8,p|=8;break;case S:return i=An(12,l,s,p|2),i.elementType=S,i.lanes=y,i;case A:return i=An(13,l,s,p),i.elementType=A,i.lanes=y,i;case ce:return i=An(19,l,s,p),i.elementType=ce,i.lanes=y,i;case $e:return tc(l,p,y,s);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case x:T=10;break e;case N:T=9;break e;case V:T=11;break e;case We:T=14;break e;case st:T=16,h=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return s=An(T,l,s,p),s.elementType=i,s.type=h,s.lanes=y,s}function ms(i,s,l,h){return i=An(7,i,h,s),i.lanes=l,i}function tc(i,s,l,h){return i=An(22,i,h,s),i.elementType=$e,i.lanes=l,i.stateNode={isHidden:!1},i}function ef(i,s,l){return i=An(6,i,null,s),i.lanes=l,i}function tf(i,s,l){return s=An(4,i.children!==null?i.children:[],i.key,s),s.lanes=l,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}function Q1(i,s,l,h,p){this.tag=s,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Zr(0),this.expirationTimes=Zr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zr(0),this.identifierPrefix=h,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function nf(i,s,l,h,p,y,T,b,M){return i=new Q1(i,s,l,b,M),s===1?(s=1,y===!0&&(s|=8)):s=0,y=An(3,null,null,s),i.current=y,y.stateNode=i,y.memoizedState={element:h,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},md(y),i}function J1(i,s,l){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Y,key:h==null?null:""+h,children:i,containerInfo:s,implementation:l}}function zy(i){if(!i)return ui;i=i._reactInternals;e:{if(Dn(i)!==i||i.tag!==1)throw Error(t(170));var s=i;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Zt(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(i.tag===1){var l=i.type;if(Zt(l))return gg(i,l,s)}return s}function $y(i,s,l,h,p,y,T,b,M){return i=nf(l,h,!0,i,p,y,T,b,M),i.context=zy(null),l=i.current,h=Gt(),p=gi(l),y=Dr(h,p),y.callback=s??null,di(l,y,p),i.current.lanes=p,ei(i,p,h),nn(i,h),i}function nc(i,s,l,h){var p=s.current,y=Gt(),T=gi(p);return l=zy(l),s.context===null?s.context=l:s.pendingContext=l,s=Dr(y,T),s.payload={element:i},h=h===void 0?null:h,h!==null&&(s.callback=h),i=di(p,s,T),i!==null&&(Hn(i,p,T,y),Du(i,p,T)),T}function rc(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function qy(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<s?l:s}}function rf(i,s){qy(i,s),(i=i.alternate)&&qy(i,s)}function Y1(){return null}var Hy=typeof reportError=="function"?reportError:function(i){console.error(i)};function sf(i){this._internalRoot=i}ic.prototype.render=sf.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(t(409));nc(i,s,null,null)},ic.prototype.unmount=sf.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;ds(function(){nc(null,i,null,null)}),s[Pr]=null}};function ic(i){this._internalRoot=i}ic.prototype.unstable_scheduleHydration=function(i){if(i){var s=iu();i={blockedOn:null,target:i,priority:s};for(var l=0;l<tr.length&&s!==0&&s<tr[l].priority;l++);tr.splice(l,0,i),l===0&&au(i)}};function of(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function sc(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function Wy(){}function X1(i,s,l,h,p){if(p){if(typeof h=="function"){var y=h;h=function(){var K=rc(T);y.call(K)}}var T=$y(s,h,i,0,null,!1,!1,"",Wy);return i._reactRootContainer=T,i[Pr]=T.current,La(i.nodeType===8?i.parentNode:i),ds(),T}for(;p=i.lastChild;)i.removeChild(p);if(typeof h=="function"){var b=h;h=function(){var K=rc(M);b.call(K)}}var M=nf(i,0,!1,null,null,!1,!1,"",Wy);return i._reactRootContainer=M,i[Pr]=M.current,La(i.nodeType===8?i.parentNode:i),ds(function(){nc(s,M,l,h)}),M}function oc(i,s,l,h,p){var y=l._reactRootContainer;if(y){var T=y;if(typeof p=="function"){var b=p;p=function(){var M=rc(T);b.call(M)}}nc(s,T,i,p)}else T=X1(l,s,i,p,h);return rc(T)}nu=function(i){switch(i.tag){case 3:var s=i.stateNode;if(s.current.memoizedState.isDehydrated){var l=Xr(s.pendingLanes);l!==0&&(ti(s,l|1),nn(s,Ge()),(Be&6)===0&&(Ao=Ge()+500,ci()))}break;case 13:ds(function(){var h=br(i,1);if(h!==null){var p=Gt();Hn(h,i,1,p)}}),rf(i,1)}},Js=function(i){if(i.tag===13){var s=br(i,134217728);if(s!==null){var l=Gt();Hn(s,i,134217728,l)}rf(i,134217728)}},ru=function(i){if(i.tag===13){var s=gi(i),l=br(i,s);if(l!==null){var h=Gt();Hn(l,i,s,h)}rf(i,s)}},iu=function(){return Me},su=function(i,s){var l=Me;try{return Me=i,s()}finally{Me=l}},Bs=function(i,s,l){switch(s){case"input":if(oa(i,l),s=l.name,l.type==="radio"&&s!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<l.length;s++){var h=l[s];if(h!==i&&h.form===i.form){var p=Iu(h);if(!p)throw Error(t(90));Ls(h),oa(h,p)}}}break;case"textarea":Us(i,l);break;case"select":s=l.value,s!=null&&wr(i,!!l.multiple,s,!1)}},Wi=Jd,ga=ds;var Z1={usingClientEntryPoint:!1,Events:[Fa,fo,Iu,Zn,ma,Jd]},Xa={findFiberByHostInstance:is,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},eI={bundleType:Xa.bundleType,version:Xa.version,rendererPackageName:Xa.rendererPackageName,rendererConfig:Xa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:J.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=_a(i),i===null?null:i.stateNode},findFiberByHostInstance:Xa.findFiberByHostInstance||Y1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ac=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ac.isDisabled&&ac.supportsFiber)try{Yi=ac.inject(eI),un=ac}catch{}}return rn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Z1,rn.createPortal=function(i,s){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!of(s))throw Error(t(200));return J1(i,s,null,l)},rn.createRoot=function(i,s){if(!of(i))throw Error(t(299));var l=!1,h="",p=Hy;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onRecoverableError!==void 0&&(p=s.onRecoverableError)),s=nf(i,1,!1,null,null,l,!1,h,p),i[Pr]=s.current,La(i.nodeType===8?i.parentNode:i),new sf(s)},rn.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=_a(s),i=i===null?null:i.stateNode,i},rn.flushSync=function(i){return ds(i)},rn.hydrate=function(i,s,l){if(!sc(s))throw Error(t(200));return oc(null,i,s,!0,l)},rn.hydrateRoot=function(i,s,l){if(!of(i))throw Error(t(405));var h=l!=null&&l.hydratedSources||null,p=!1,y="",T=Hy;if(l!=null&&(l.unstable_strictMode===!0&&(p=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onRecoverableError!==void 0&&(T=l.onRecoverableError)),s=$y(s,null,i,1,l??null,p,!1,y,T),i[Pr]=s.current,La(i),h)for(i=0;i<h.length;i++)l=h[i],p=l._getVersion,p=p(l._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[l,p]:s.mutableSourceEagerHydrationData.push(l,p);return new ic(s)},rn.render=function(i,s,l){if(!sc(s))throw Error(t(200));return oc(null,i,s,!1,l)},rn.unmountComponentAtNode=function(i){if(!sc(i))throw Error(t(40));return i._reactRootContainer?(ds(function(){oc(null,null,i,!1,function(){i._reactRootContainer=null,i[Pr]=null})}),!0):!1},rn.unstable_batchedUpdates=Jd,rn.unstable_renderSubtreeIntoContainer=function(i,s,l,h){if(!sc(l))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return oc(i,s,l,!1,h)},rn.version="18.3.1-next-f1338f8080-20240426",rn}var ev;function uI(){if(ev)return uf.exports;ev=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),uf.exports=lI(),uf.exports}var tv;function cI(){if(tv)return lc;tv=1;var n=uI();return lc.createRoot=n.createRoot,lc.hydrateRoot=n.hydrateRoot,lc}var hI=cI(),el={},nv;function dI(){if(nv)return el;nv=1,Object.defineProperty(el,"__esModule",{value:!0}),el.parse=u,el.serialize=m;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,a=(()=>{const E=function(){};return E.prototype=Object.create(null),E})();function u(E,P){const C=new a,L=E.length;if(L<2)return C;const D=(P==null?void 0:P.decode)||v;let U=0;do{const W=E.indexOf("=",U);if(W===-1)break;const B=E.indexOf(";",U),J=B===-1?L:B;if(W>J){U=E.lastIndexOf(";",W-1)+1;continue}const ie=d(E,U,W),Y=f(E,W,ie),k=E.slice(ie,Y);if(C[k]===void 0){let I=d(E,W+1,J),S=f(E,J,I);const x=D(E.slice(I,S));C[k]=x}U=J+1}while(U<L);return C}function d(E,P,C){do{const L=E.charCodeAt(P);if(L!==32&&L!==9)return P}while(++P<C);return C}function f(E,P,C){for(;P>C;){const L=E.charCodeAt(--P);if(L!==32&&L!==9)return P+1}return C}function m(E,P,C){const L=(C==null?void 0:C.encode)||encodeURIComponent;if(!n.test(E))throw new TypeError(`argument name is invalid: ${E}`);const D=L(P);if(!e.test(D))throw new TypeError(`argument val is invalid: ${P}`);let U=E+"="+D;if(!C)return U;if(C.maxAge!==void 0){if(!Number.isInteger(C.maxAge))throw new TypeError(`option maxAge is invalid: ${C.maxAge}`);U+="; Max-Age="+C.maxAge}if(C.domain){if(!t.test(C.domain))throw new TypeError(`option domain is invalid: ${C.domain}`);U+="; Domain="+C.domain}if(C.path){if(!r.test(C.path))throw new TypeError(`option path is invalid: ${C.path}`);U+="; Path="+C.path}if(C.expires){if(!w(C.expires)||!Number.isFinite(C.expires.valueOf()))throw new TypeError(`option expires is invalid: ${C.expires}`);U+="; Expires="+C.expires.toUTCString()}if(C.httpOnly&&(U+="; HttpOnly"),C.secure&&(U+="; Secure"),C.partitioned&&(U+="; Partitioned"),C.priority)switch(typeof C.priority=="string"?C.priority.toLowerCase():void 0){case"low":U+="; Priority=Low";break;case"medium":U+="; Priority=Medium";break;case"high":U+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${C.priority}`)}if(C.sameSite)switch(typeof C.sameSite=="string"?C.sameSite.toLowerCase():C.sameSite){case!0:case"strict":U+="; SameSite=Strict";break;case"lax":U+="; SameSite=Lax";break;case"none":U+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${C.sameSite}`)}return U}function v(E){if(E.indexOf("%")===-1)return E;try{return decodeURIComponent(E)}catch{return E}}function w(E){return o.call(E)==="[object Date]"}return el}dI();var rv="popstate";function fI(n={}){function e(r,o){let{pathname:a,search:u,hash:d}=r.location;return Xf("",{pathname:a,search:u,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(r,o){return typeof o=="string"?o:_l(o)}return mI(e,t,null,n)}function tt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function kn(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function pI(){return Math.random().toString(36).substring(2,10)}function iv(n,e){return{usr:n.state,key:n.key,idx:e}}function Xf(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Ko(e):e,state:t,key:e&&e.key||r||pI()}}function _l({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Ko(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function mI(n,e,t,r={}){let{window:o=document.defaultView,v5Compat:a=!1}=r,u=o.history,d="POP",f=null,m=v();m==null&&(m=0,u.replaceState({...u.state,idx:m},""));function v(){return(u.state||{idx:null}).idx}function w(){d="POP";let D=v(),U=D==null?null:D-m;m=D,f&&f({action:d,location:L.location,delta:U})}function E(D,U){d="PUSH";let W=Xf(L.location,D,U);m=v()+1;let B=iv(W,m),J=L.createHref(W);try{u.pushState(B,"",J)}catch(ie){if(ie instanceof DOMException&&ie.name==="DataCloneError")throw ie;o.location.assign(J)}a&&f&&f({action:d,location:L.location,delta:1})}function P(D,U){d="REPLACE";let W=Xf(L.location,D,U);m=v();let B=iv(W,m),J=L.createHref(W);u.replaceState(B,"",J),a&&f&&f({action:d,location:L.location,delta:0})}function C(D){return gI(D)}let L={get action(){return d},get location(){return n(o,u)},listen(D){if(f)throw new Error("A history only accepts one active listener");return o.addEventListener(rv,w),f=D,()=>{o.removeEventListener(rv,w),f=null}},createHref(D){return e(o,D)},createURL:C,encodeLocation(D){let U=C(D);return{pathname:U.pathname,search:U.search,hash:U.hash}},push:E,replace:P,go(D){return u.go(D)}};return L}function gI(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),tt(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:_l(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function k0(n,e,t="/"){return yI(n,e,t,!1)}function yI(n,e,t,r){let o=typeof e=="string"?Ko(e):e,a=Br(o.pathname||"/",t);if(a==null)return null;let u=N0(n);vI(u);let d=null;for(let f=0;d==null&&f<u.length;++f){let m=xI(a);d=CI(u[f],m,r)}return d}function N0(n,e=[],t=[],r=""){let o=(a,u,d)=>{let f={relativePath:d===void 0?a.path||"":d,caseSensitive:a.caseSensitive===!0,childrenIndex:u,route:a};f.relativePath.startsWith("/")&&(tt(f.relativePath.startsWith(r),`Absolute route path "${f.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(r.length));let m=Fr([r,f.relativePath]),v=t.concat(f);a.children&&a.children.length>0&&(tt(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),N0(a.children,e,v,m)),!(a.path==null&&!a.index)&&e.push({path:m,score:RI(m,a.index),routesMeta:v})};return n.forEach((a,u)=>{var d;if(a.path===""||!((d=a.path)!=null&&d.includes("?")))o(a,u);else for(let f of b0(a.path))o(a,u,f)}),e}function b0(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,o=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return o?[a,""]:[a];let u=b0(r.join("/")),d=[];return d.push(...u.map(f=>f===""?a:[a,f].join("/"))),o&&d.push(...u),d.map(f=>n.startsWith("/")&&f===""?"/":f)}function vI(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:AI(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var _I=/^:[\w-]+$/,wI=3,EI=2,TI=1,II=10,SI=-2,sv=n=>n==="*";function RI(n,e){let t=n.split("/"),r=t.length;return t.some(sv)&&(r+=SI),e&&(r+=EI),t.filter(o=>!sv(o)).reduce((o,a)=>o+(_I.test(a)?wI:a===""?TI:II),r)}function AI(n,e){return n.length===e.length&&n.slice(0,-1).every((r,o)=>r===e[o])?n[n.length-1]-e[e.length-1]:0}function CI(n,e,t=!1){let{routesMeta:r}=n,o={},a="/",u=[];for(let d=0;d<r.length;++d){let f=r[d],m=d===r.length-1,v=a==="/"?e:e.slice(a.length)||"/",w=Dc({path:f.relativePath,caseSensitive:f.caseSensitive,end:m},v),E=f.route;if(!w&&m&&t&&!r[r.length-1].route.index&&(w=Dc({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},v)),!w)return null;Object.assign(o,w.params),u.push({params:o,pathname:Fr([a,w.pathname]),pathnameBase:DI(Fr([a,w.pathnameBase])),route:E}),w.pathnameBase!=="/"&&(a=Fr([a,w.pathnameBase]))}return u}function Dc(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=PI(n.path,n.caseSensitive,n.end),o=e.match(t);if(!o)return null;let a=o[0],u=a.replace(/(.)\/+$/,"$1"),d=o.slice(1);return{params:r.reduce((m,{paramName:v,isOptional:w},E)=>{if(v==="*"){let C=d[E]||"";u=a.slice(0,a.length-C.length).replace(/(.)\/+$/,"$1")}const P=d[E];return w&&!P?m[v]=void 0:m[v]=(P||"").replace(/%2F/g,"/"),m},{}),pathname:a,pathnameBase:u,pattern:n}}function PI(n,e=!1,t=!0){kn(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],o="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,d,f)=>(r.push({paramName:d,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),o+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":n!==""&&n!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),r]}function xI(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return kn(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Br(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function kI(n,e="/"){let{pathname:t,search:r="",hash:o=""}=typeof n=="string"?Ko(n):n;return{pathname:t?t.startsWith("/")?t:NI(t,e):e,search:OI(r),hash:LI(o)}}function NI(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function df(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function bI(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Lp(n){let e=bI(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function Vp(n,e,t,r=!1){let o;typeof n=="string"?o=Ko(n):(o={...n},tt(!o.pathname||!o.pathname.includes("?"),df("?","pathname","search",o)),tt(!o.pathname||!o.pathname.includes("#"),df("#","pathname","hash",o)),tt(!o.search||!o.search.includes("#"),df("#","search","hash",o)));let a=n===""||o.pathname==="",u=a?"/":o.pathname,d;if(u==null)d=t;else{let w=e.length-1;if(!r&&u.startsWith("..")){let E=u.split("/");for(;E[0]==="..";)E.shift(),w-=1;o.pathname=E.join("/")}d=w>=0?e[w]:"/"}let f=kI(o,d),m=u&&u!=="/"&&u.endsWith("/"),v=(a||u===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(m||v)&&(f.pathname+="/"),f}var Fr=n=>n.join("/").replace(/\/\/+/g,"/"),DI=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),OI=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,LI=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function VI(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var D0=["POST","PUT","PATCH","DELETE"];new Set(D0);var MI=["GET",...D0];new Set(MI);var Go=H.createContext(null);Go.displayName="DataRouter";var nh=H.createContext(null);nh.displayName="DataRouterState";var O0=H.createContext({isTransitioning:!1});O0.displayName="ViewTransition";var FI=H.createContext(new Map);FI.displayName="Fetchers";var UI=H.createContext(null);UI.displayName="Await";var Jn=H.createContext(null);Jn.displayName="Navigation";var kl=H.createContext(null);kl.displayName="Location";var yr=H.createContext({outlet:null,matches:[],isDataRoute:!1});yr.displayName="Route";var Mp=H.createContext(null);Mp.displayName="RouteError";function jI(n,{relative:e}={}){tt(Qo(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=H.useContext(Jn),{hash:o,pathname:a,search:u}=bl(n,{relative:e}),d=a;return t!=="/"&&(d=a==="/"?t:Fr([t,a])),r.createHref({pathname:d,search:u,hash:o})}function Qo(){return H.useContext(kl)!=null}function Wr(){return tt(Qo(),"useLocation() may be used only in the context of a <Router> component."),H.useContext(kl).location}var L0="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function V0(n){H.useContext(Jn).static||H.useLayoutEffect(n)}function Nl(){let{isDataRoute:n}=H.useContext(yr);return n?ZI():BI()}function BI(){tt(Qo(),"useNavigate() may be used only in the context of a <Router> component.");let n=H.useContext(Go),{basename:e,navigator:t}=H.useContext(Jn),{matches:r}=H.useContext(yr),{pathname:o}=Wr(),a=JSON.stringify(Lp(r)),u=H.useRef(!1);return V0(()=>{u.current=!0}),H.useCallback((f,m={})=>{if(kn(u.current,L0),!u.current)return;if(typeof f=="number"){t.go(f);return}let v=Vp(f,JSON.parse(a),o,m.relative==="path");n==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:Fr([e,v.pathname])),(m.replace?t.replace:t.push)(v,m.state,m)},[e,t,a,o,n])}H.createContext(null);function bl(n,{relative:e}={}){let{matches:t}=H.useContext(yr),{pathname:r}=Wr(),o=JSON.stringify(Lp(t));return H.useMemo(()=>Vp(n,JSON.parse(o),r,e==="path"),[n,o,r,e])}function zI(n,e){return M0(n,e)}function M0(n,e,t,r){var W;tt(Qo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o,static:a}=H.useContext(Jn),{matches:u}=H.useContext(yr),d=u[u.length-1],f=d?d.params:{},m=d?d.pathname:"/",v=d?d.pathnameBase:"/",w=d&&d.route;{let B=w&&w.path||"";F0(m,!w||B.endsWith("*")||B.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${B}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${B}"> to <Route path="${B==="/"?"*":`${B}/*`}">.`)}let E=Wr(),P;if(e){let B=typeof e=="string"?Ko(e):e;tt(v==="/"||((W=B.pathname)==null?void 0:W.startsWith(v)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${B.pathname}" was given in the \`location\` prop.`),P=B}else P=E;let C=P.pathname||"/",L=C;if(v!=="/"){let B=v.replace(/^\//,"").split("/");L="/"+C.replace(/^\//,"").split("/").slice(B.length).join("/")}let D=!a&&t&&t.matches&&t.matches.length>0?t.matches:k0(n,{pathname:L});kn(w||D!=null,`No routes matched location "${P.pathname}${P.search}${P.hash}" `),kn(D==null||D[D.length-1].route.element!==void 0||D[D.length-1].route.Component!==void 0||D[D.length-1].route.lazy!==void 0,`Matched leaf route at location "${P.pathname}${P.search}${P.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let U=KI(D&&D.map(B=>Object.assign({},B,{params:Object.assign({},f,B.params),pathname:Fr([v,o.encodeLocation?o.encodeLocation(B.pathname).pathname:B.pathname]),pathnameBase:B.pathnameBase==="/"?v:Fr([v,o.encodeLocation?o.encodeLocation(B.pathnameBase).pathname:B.pathnameBase])})),u,t,r);return e&&U?H.createElement(kl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...P},navigationType:"POP"}},U):U}function $I(){let n=XI(),e=VI(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},u=null;return console.error("Error handled by React Router default ErrorBoundary:",n),u=H.createElement(H.Fragment,null,H.createElement("p",null,"💿 Hey developer 👋"),H.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",H.createElement("code",{style:a},"ErrorBoundary")," or"," ",H.createElement("code",{style:a},"errorElement")," prop on your route.")),H.createElement(H.Fragment,null,H.createElement("h2",null,"Unexpected Application Error!"),H.createElement("h3",{style:{fontStyle:"italic"}},e),t?H.createElement("pre",{style:o},t):null,u)}var qI=H.createElement($I,null),HI=class extends H.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?H.createElement(yr.Provider,{value:this.props.routeContext},H.createElement(Mp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function WI({routeContext:n,match:e,children:t}){let r=H.useContext(Go);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),H.createElement(yr.Provider,{value:n},t)}function KI(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,a=t==null?void 0:t.errors;if(a!=null){let f=o.findIndex(m=>m.route.id&&(a==null?void 0:a[m.route.id])!==void 0);tt(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),o=o.slice(0,Math.min(o.length,f+1))}let u=!1,d=-1;if(t)for(let f=0;f<o.length;f++){let m=o[f];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=f),m.route.id){let{loaderData:v,errors:w}=t,E=m.route.loader&&!v.hasOwnProperty(m.route.id)&&(!w||w[m.route.id]===void 0);if(m.route.lazy||E){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((f,m,v)=>{let w,E=!1,P=null,C=null;t&&(w=a&&m.route.id?a[m.route.id]:void 0,P=m.route.errorElement||qI,u&&(d<0&&v===0?(F0("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),E=!0,C=null):d===v&&(E=!0,C=m.route.hydrateFallbackElement||null)));let L=e.concat(o.slice(0,v+1)),D=()=>{let U;return w?U=P:E?U=C:m.route.Component?U=H.createElement(m.route.Component,null):m.route.element?U=m.route.element:U=f,H.createElement(WI,{match:m,routeContext:{outlet:f,matches:L,isDataRoute:t!=null},children:U})};return t&&(m.route.ErrorBoundary||m.route.errorElement||v===0)?H.createElement(HI,{location:t.location,revalidation:t.revalidation,component:P,error:w,children:D(),routeContext:{outlet:null,matches:L,isDataRoute:!0}}):D()},null)}function Fp(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function GI(n){let e=H.useContext(Go);return tt(e,Fp(n)),e}function QI(n){let e=H.useContext(nh);return tt(e,Fp(n)),e}function JI(n){let e=H.useContext(yr);return tt(e,Fp(n)),e}function Up(n){let e=JI(n),t=e.matches[e.matches.length-1];return tt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function YI(){return Up("useRouteId")}function XI(){var r;let n=H.useContext(Mp),e=QI("useRouteError"),t=Up("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function ZI(){let{router:n}=GI("useNavigate"),e=Up("useNavigate"),t=H.useRef(!1);return V0(()=>{t.current=!0}),H.useCallback(async(o,a={})=>{kn(t.current,L0),t.current&&(typeof o=="number"?n.navigate(o):await n.navigate(o,{fromRouteId:e,...a}))},[n,e])}var ov={};function F0(n,e,t){!e&&!ov[n]&&(ov[n]=!0,kn(!1,t))}H.memo(eS);function eS({routes:n,future:e,state:t}){return M0(n,void 0,t,e)}function tS({to:n,replace:e,state:t,relative:r}){tt(Qo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=H.useContext(Jn);kn(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=H.useContext(yr),{pathname:u}=Wr(),d=Nl(),f=Vp(n,Lp(a),u,r==="path"),m=JSON.stringify(f);return H.useEffect(()=>{d(JSON.parse(m),{replace:e,state:t,relative:r})},[d,m,r,e,t]),null}function gs(n){tt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function nS({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:o,static:a=!1}){tt(!Qo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=n.replace(/^\/*/,"/"),d=H.useMemo(()=>({basename:u,navigator:o,static:a,future:{}}),[u,o,a]);typeof t=="string"&&(t=Ko(t));let{pathname:f="/",search:m="",hash:v="",state:w=null,key:E="default"}=t,P=H.useMemo(()=>{let C=Br(f,u);return C==null?null:{location:{pathname:C,search:m,hash:v,state:w,key:E},navigationType:r}},[u,f,m,v,w,E,r]);return kn(P!=null,`<Router basename="${u}"> is not able to match the URL "${f}${m}${v}" because it does not start with the basename, so the <Router> won't render anything.`),P==null?null:H.createElement(Jn.Provider,{value:d},H.createElement(kl.Provider,{children:e,value:P}))}function rS({children:n,location:e}){return zI(Zf(n),e)}function Zf(n,e=[]){let t=[];return H.Children.forEach(n,(r,o)=>{if(!H.isValidElement(r))return;let a=[...e,o];if(r.type===H.Fragment){t.push.apply(t,Zf(r.props.children,a));return}tt(r.type===gs,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),tt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let u={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(u.children=Zf(r.props.children,a)),t.push(u)}),t}var yc="get",vc="application/x-www-form-urlencoded";function rh(n){return n!=null&&typeof n.tagName=="string"}function iS(n){return rh(n)&&n.tagName.toLowerCase()==="button"}function sS(n){return rh(n)&&n.tagName.toLowerCase()==="form"}function oS(n){return rh(n)&&n.tagName.toLowerCase()==="input"}function aS(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function lS(n,e){return n.button===0&&(!e||e==="_self")&&!aS(n)}function ep(n=""){return new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let r=n[t];return e.concat(Array.isArray(r)?r.map(o=>[t,o]):[[t,r]])},[]))}function uS(n,e){let t=ep(n);return e&&e.forEach((r,o)=>{t.has(o)||e.getAll(o).forEach(a=>{t.append(o,a)})}),t}var uc=null;function cS(){if(uc===null)try{new FormData(document.createElement("form"),0),uc=!1}catch{uc=!0}return uc}var hS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ff(n){return n!=null&&!hS.has(n)?(kn(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${vc}"`),null):n}function dS(n,e){let t,r,o,a,u;if(sS(n)){let d=n.getAttribute("action");r=d?Br(d,e):null,t=n.getAttribute("method")||yc,o=ff(n.getAttribute("enctype"))||vc,a=new FormData(n)}else if(iS(n)||oS(n)&&(n.type==="submit"||n.type==="image")){let d=n.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=n.getAttribute("formaction")||d.getAttribute("action");if(r=f?Br(f,e):null,t=n.getAttribute("formmethod")||d.getAttribute("method")||yc,o=ff(n.getAttribute("formenctype"))||ff(d.getAttribute("enctype"))||vc,a=new FormData(d,n),!cS()){let{name:m,type:v,value:w}=n;if(v==="image"){let E=m?`${m}.`:"";a.append(`${E}x`,"0"),a.append(`${E}y`,"0")}else m&&a.append(m,w)}}else{if(rh(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=yc,r=null,o=vc,u=n}return a&&o==="text/plain"&&(u=a,a=void 0),{action:r,method:t.toLowerCase(),encType:o,formData:a,body:u}}function jp(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function fS(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function pS(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function mS(n,e,t){let r=await Promise.all(n.map(async o=>{let a=e.routes[o.route.id];if(a){let u=await fS(a,t);return u.links?u.links():[]}return[]}));return _S(r.flat(1).filter(pS).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function av(n,e,t,r,o,a){let u=(f,m)=>t[m]?f.route.id!==t[m].route.id:!0,d=(f,m)=>{var v;return t[m].pathname!==f.pathname||((v=t[m].route.path)==null?void 0:v.endsWith("*"))&&t[m].params["*"]!==f.params["*"]};return a==="assets"?e.filter((f,m)=>u(f,m)||d(f,m)):a==="data"?e.filter((f,m)=>{var w;let v=r.routes[f.route.id];if(!v||!v.hasLoader)return!1;if(u(f,m)||d(f,m))return!0;if(f.route.shouldRevalidate){let E=f.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((w=t[0])==null?void 0:w.params)||{},nextUrl:new URL(n,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof E=="boolean")return E}return!0}):[]}function gS(n,e,{includeHydrateFallback:t}={}){return yS(n.map(r=>{let o=e.routes[r.route.id];if(!o)return[];let a=[o.module];return o.clientActionModule&&(a=a.concat(o.clientActionModule)),o.clientLoaderModule&&(a=a.concat(o.clientLoaderModule)),t&&o.hydrateFallbackModule&&(a=a.concat(o.hydrateFallbackModule)),o.imports&&(a=a.concat(o.imports)),a}).flat(1))}function yS(n){return[...new Set(n)]}function vS(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function _S(n,e){let t=new Set;return new Set(e),n.reduce((r,o)=>{let a=JSON.stringify(vS(o));return t.has(a)||(t.add(a),r.push({key:a,link:o})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var wS=new Set([100,101,204,205]);function ES(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&Br(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function U0(){let n=H.useContext(Go);return jp(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function TS(){let n=H.useContext(nh);return jp(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Bp=H.createContext(void 0);Bp.displayName="FrameworkContext";function j0(){let n=H.useContext(Bp);return jp(n,"You must render this element inside a <HydratedRouter> element"),n}function IS(n,e){let t=H.useContext(Bp),[r,o]=H.useState(!1),[a,u]=H.useState(!1),{onFocus:d,onBlur:f,onMouseEnter:m,onMouseLeave:v,onTouchStart:w}=e,E=H.useRef(null);H.useEffect(()=>{if(n==="render"&&u(!0),n==="viewport"){let L=U=>{U.forEach(W=>{u(W.isIntersecting)})},D=new IntersectionObserver(L,{threshold:.5});return E.current&&D.observe(E.current),()=>{D.disconnect()}}},[n]),H.useEffect(()=>{if(r){let L=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(L)}}},[r]);let P=()=>{o(!0)},C=()=>{o(!1),u(!1)};return t?n!=="intent"?[a,E,{}]:[a,E,{onFocus:tl(d,P),onBlur:tl(f,C),onMouseEnter:tl(m,P),onMouseLeave:tl(v,C),onTouchStart:tl(w,P)}]:[!1,E,{}]}function tl(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function SS({page:n,...e}){let{router:t}=U0(),r=H.useMemo(()=>k0(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?H.createElement(AS,{page:n,matches:r,...e}):null}function RS(n){let{manifest:e,routeModules:t}=j0(),[r,o]=H.useState([]);return H.useEffect(()=>{let a=!1;return mS(n,e,t).then(u=>{a||o(u)}),()=>{a=!0}},[n,e,t]),r}function AS({page:n,matches:e,...t}){let r=Wr(),{manifest:o,routeModules:a}=j0(),{basename:u}=U0(),{loaderData:d,matches:f}=TS(),m=H.useMemo(()=>av(n,e,f,o,r,"data"),[n,e,f,o,r]),v=H.useMemo(()=>av(n,e,f,o,r,"assets"),[n,e,f,o,r]),w=H.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let C=new Set,L=!1;if(e.forEach(U=>{var B;let W=o.routes[U.route.id];!W||!W.hasLoader||(!m.some(J=>J.route.id===U.route.id)&&U.route.id in d&&((B=a[U.route.id])!=null&&B.shouldRevalidate)||W.hasClientLoader?L=!0:C.add(U.route.id))}),C.size===0)return[];let D=ES(n,u);return L&&C.size>0&&D.searchParams.set("_routes",e.filter(U=>C.has(U.route.id)).map(U=>U.route.id).join(",")),[D.pathname+D.search]},[u,d,r,o,m,e,n,a]),E=H.useMemo(()=>gS(v,o),[v,o]),P=RS(v);return H.createElement(H.Fragment,null,w.map(C=>H.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...t})),E.map(C=>H.createElement("link",{key:C,rel:"modulepreload",href:C,...t})),P.map(({key:C,link:L})=>H.createElement("link",{key:C,...L})))}function CS(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var B0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{B0&&(window.__reactRouterVersion="7.6.0")}catch{}function PS({basename:n,children:e,window:t}){let r=H.useRef();r.current==null&&(r.current=fI({window:t,v5Compat:!0}));let o=r.current,[a,u]=H.useState({action:o.action,location:o.location}),d=H.useCallback(f=>{H.startTransition(()=>u(f))},[u]);return H.useLayoutEffect(()=>o.listen(d),[o,d]),H.createElement(nS,{basename:n,children:e,location:a.location,navigationType:a.action,navigator:o})}var z0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$0=H.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:o,reloadDocument:a,replace:u,state:d,target:f,to:m,preventScrollReset:v,viewTransition:w,...E},P){let{basename:C}=H.useContext(Jn),L=typeof m=="string"&&z0.test(m),D,U=!1;if(typeof m=="string"&&L&&(D=m,B0))try{let S=new URL(window.location.href),x=m.startsWith("//")?new URL(S.protocol+m):new URL(m),N=Br(x.pathname,C);x.origin===S.origin&&N!=null?m=N+x.search+x.hash:U=!0}catch{kn(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let W=jI(m,{relative:o}),[B,J,ie]=IS(r,E),Y=bS(m,{replace:u,state:d,target:f,preventScrollReset:v,relative:o,viewTransition:w});function k(S){e&&e(S),S.defaultPrevented||Y(S)}let I=H.createElement("a",{...E,...ie,href:D||W,onClick:U||a?e:k,ref:CS(P,J),target:f,"data-discover":!L&&t==="render"?"true":void 0});return B&&!L?H.createElement(H.Fragment,null,I,H.createElement(SS,{page:W})):I});$0.displayName="Link";var xS=H.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:o=!1,style:a,to:u,viewTransition:d,children:f,...m},v){let w=bl(u,{relative:m.relative}),E=Wr(),P=H.useContext(nh),{navigator:C,basename:L}=H.useContext(Jn),D=P!=null&&FS(w)&&d===!0,U=C.encodeLocation?C.encodeLocation(w).pathname:w.pathname,W=E.pathname,B=P&&P.navigation&&P.navigation.location?P.navigation.location.pathname:null;t||(W=W.toLowerCase(),B=B?B.toLowerCase():null,U=U.toLowerCase()),B&&L&&(B=Br(B,L)||B);const J=U!=="/"&&U.endsWith("/")?U.length-1:U.length;let ie=W===U||!o&&W.startsWith(U)&&W.charAt(J)==="/",Y=B!=null&&(B===U||!o&&B.startsWith(U)&&B.charAt(U.length)==="/"),k={isActive:ie,isPending:Y,isTransitioning:D},I=ie?e:void 0,S;typeof r=="function"?S=r(k):S=[r,ie?"active":null,Y?"pending":null,D?"transitioning":null].filter(Boolean).join(" ");let x=typeof a=="function"?a(k):a;return H.createElement($0,{...m,"aria-current":I,className:S,ref:v,style:x,to:u,viewTransition:d},typeof f=="function"?f(k):f)});xS.displayName="NavLink";var kS=H.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:o,state:a,method:u=yc,action:d,onSubmit:f,relative:m,preventScrollReset:v,viewTransition:w,...E},P)=>{let C=VS(),L=MS(d,{relative:m}),D=u.toLowerCase()==="get"?"get":"post",U=typeof d=="string"&&z0.test(d),W=B=>{if(f&&f(B),B.defaultPrevented)return;B.preventDefault();let J=B.nativeEvent.submitter,ie=(J==null?void 0:J.getAttribute("formmethod"))||u;C(J||B.currentTarget,{fetcherKey:e,method:ie,navigate:t,replace:o,state:a,relative:m,preventScrollReset:v,viewTransition:w})};return H.createElement("form",{ref:P,method:D,action:L,onSubmit:r?f:W,...E,"data-discover":!U&&n==="render"?"true":void 0})});kS.displayName="Form";function NS(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function q0(n){let e=H.useContext(Go);return tt(e,NS(n)),e}function bS(n,{target:e,replace:t,state:r,preventScrollReset:o,relative:a,viewTransition:u}={}){let d=Nl(),f=Wr(),m=bl(n,{relative:a});return H.useCallback(v=>{if(lS(v,e)){v.preventDefault();let w=t!==void 0?t:_l(f)===_l(m);d(n,{replace:w,state:r,preventScrollReset:o,relative:a,viewTransition:u})}},[f,d,m,t,r,e,n,o,a,u])}function DS(n){kn(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=H.useRef(ep(n)),t=H.useRef(!1),r=Wr(),o=H.useMemo(()=>uS(r.search,t.current?null:e.current),[r.search]),a=Nl(),u=H.useCallback((d,f)=>{const m=ep(typeof d=="function"?d(o):d);t.current=!0,a("?"+m,f)},[a,o]);return[o,u]}var OS=0,LS=()=>`__${String(++OS)}__`;function VS(){let{router:n}=q0("useSubmit"),{basename:e}=H.useContext(Jn),t=YI();return H.useCallback(async(r,o={})=>{let{action:a,method:u,encType:d,formData:f,body:m}=dS(r,e);if(o.navigate===!1){let v=o.fetcherKey||LS();await n.fetch(v,t,o.action||a,{preventScrollReset:o.preventScrollReset,formData:f,body:m,formMethod:o.method||u,formEncType:o.encType||d,flushSync:o.flushSync})}else await n.navigate(o.action||a,{preventScrollReset:o.preventScrollReset,formData:f,body:m,formMethod:o.method||u,formEncType:o.encType||d,replace:o.replace,state:o.state,fromRouteId:t,flushSync:o.flushSync,viewTransition:o.viewTransition})},[n,e,t])}function MS(n,{relative:e}={}){let{basename:t}=H.useContext(Jn),r=H.useContext(yr);tt(r,"useFormAction must be used inside a RouteContext");let[o]=r.matches.slice(-1),a={...bl(n||".",{relative:e})},u=Wr();if(n==null){a.search=u.search;let d=new URLSearchParams(a.search),f=d.getAll("index");if(f.some(v=>v==="")){d.delete("index"),f.filter(w=>w).forEach(w=>d.append("index",w));let v=d.toString();a.search=v?`?${v}`:""}}return(!n||n===".")&&o.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:Fr([t,a.pathname])),_l(a)}function FS(n,e={}){let t=H.useContext(O0);tt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=q0("useViewTransitionState"),o=bl(n,{relative:e.relative});if(!t.isTransitioning)return!1;let a=Br(t.currentLocation.pathname,r)||t.currentLocation.pathname,u=Br(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Dc(o.pathname,u)!=null||Dc(o.pathname,a)!=null}[...wS];var Po={},pf,lv;function US(){return lv||(lv=1,pf=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),pf}var mf={},wi={},uv;function Ps(){if(uv)return wi;uv=1;let n;const e=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return wi.getSymbolSize=function(r){if(!r)throw new Error('"version" cannot be null or undefined');if(r<1||r>40)throw new Error('"version" should be in range from 1 to 40');return r*4+17},wi.getSymbolTotalCodewords=function(r){return e[r]},wi.getBCHDigit=function(t){let r=0;for(;t!==0;)r++,t>>>=1;return r},wi.setToSJISFunction=function(r){if(typeof r!="function")throw new Error('"toSJISFunc" is not a valid function.');n=r},wi.isKanjiModeEnabled=function(){return typeof n<"u"},wi.toSJIS=function(r){return n(r)},wi}var gf={},cv;function zp(){return cv||(cv=1,function(n){n.L={bit:1},n.M={bit:0},n.Q={bit:3},n.H={bit:2};function e(t){if(typeof t!="string")throw new Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return n.L;case"m":case"medium":return n.M;case"q":case"quartile":return n.Q;case"h":case"high":return n.H;default:throw new Error("Unknown EC Level: "+t)}}n.isValid=function(r){return r&&typeof r.bit<"u"&&r.bit>=0&&r.bit<4},n.from=function(r,o){if(n.isValid(r))return r;try{return e(r)}catch{return o}}}(gf)),gf}var yf,hv;function jS(){if(hv)return yf;hv=1;function n(){this.buffer=[],this.length=0}return n.prototype={get:function(e){const t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)===1},put:function(e,t){for(let r=0;r<t;r++)this.putBit((e>>>t-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},yf=n,yf}var vf,dv;function BS(){if(dv)return vf;dv=1;function n(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}return n.prototype.set=function(e,t,r,o){const a=e*this.size+t;this.data[a]=r,o&&(this.reservedBit[a]=!0)},n.prototype.get=function(e,t){return this.data[e*this.size+t]},n.prototype.xor=function(e,t,r){this.data[e*this.size+t]^=r},n.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},vf=n,vf}var _f={},fv;function zS(){return fv||(fv=1,function(n){const e=Ps().getSymbolSize;n.getRowColCoords=function(r){if(r===1)return[];const o=Math.floor(r/7)+2,a=e(r),u=a===145?26:Math.ceil((a-13)/(2*o-2))*2,d=[a-7];for(let f=1;f<o-1;f++)d[f]=d[f-1]-u;return d.push(6),d.reverse()},n.getPositions=function(r){const o=[],a=n.getRowColCoords(r),u=a.length;for(let d=0;d<u;d++)for(let f=0;f<u;f++)d===0&&f===0||d===0&&f===u-1||d===u-1&&f===0||o.push([a[d],a[f]]);return o}}(_f)),_f}var wf={},pv;function $S(){if(pv)return wf;pv=1;const n=Ps().getSymbolSize,e=7;return wf.getPositions=function(r){const o=n(r);return[[0,0],[o-e,0],[0,o-e]]},wf}var Ef={},mv;function qS(){return mv||(mv=1,function(n){n.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};n.isValid=function(o){return o!=null&&o!==""&&!isNaN(o)&&o>=0&&o<=7},n.from=function(o){return n.isValid(o)?parseInt(o,10):void 0},n.getPenaltyN1=function(o){const a=o.size;let u=0,d=0,f=0,m=null,v=null;for(let w=0;w<a;w++){d=f=0,m=v=null;for(let E=0;E<a;E++){let P=o.get(w,E);P===m?d++:(d>=5&&(u+=e.N1+(d-5)),m=P,d=1),P=o.get(E,w),P===v?f++:(f>=5&&(u+=e.N1+(f-5)),v=P,f=1)}d>=5&&(u+=e.N1+(d-5)),f>=5&&(u+=e.N1+(f-5))}return u},n.getPenaltyN2=function(o){const a=o.size;let u=0;for(let d=0;d<a-1;d++)for(let f=0;f<a-1;f++){const m=o.get(d,f)+o.get(d,f+1)+o.get(d+1,f)+o.get(d+1,f+1);(m===4||m===0)&&u++}return u*e.N2},n.getPenaltyN3=function(o){const a=o.size;let u=0,d=0,f=0;for(let m=0;m<a;m++){d=f=0;for(let v=0;v<a;v++)d=d<<1&2047|o.get(m,v),v>=10&&(d===1488||d===93)&&u++,f=f<<1&2047|o.get(v,m),v>=10&&(f===1488||f===93)&&u++}return u*e.N3},n.getPenaltyN4=function(o){let a=0;const u=o.data.length;for(let f=0;f<u;f++)a+=o.data[f];return Math.abs(Math.ceil(a*100/u/5)-10)*e.N4};function t(r,o,a){switch(r){case n.Patterns.PATTERN000:return(o+a)%2===0;case n.Patterns.PATTERN001:return o%2===0;case n.Patterns.PATTERN010:return a%3===0;case n.Patterns.PATTERN011:return(o+a)%3===0;case n.Patterns.PATTERN100:return(Math.floor(o/2)+Math.floor(a/3))%2===0;case n.Patterns.PATTERN101:return o*a%2+o*a%3===0;case n.Patterns.PATTERN110:return(o*a%2+o*a%3)%2===0;case n.Patterns.PATTERN111:return(o*a%3+(o+a)%2)%2===0;default:throw new Error("bad maskPattern:"+r)}}n.applyMask=function(o,a){const u=a.size;for(let d=0;d<u;d++)for(let f=0;f<u;f++)a.isReserved(f,d)||a.xor(f,d,t(o,f,d))},n.getBestMask=function(o,a){const u=Object.keys(n.Patterns).length;let d=0,f=1/0;for(let m=0;m<u;m++){a(m),n.applyMask(m,o);const v=n.getPenaltyN1(o)+n.getPenaltyN2(o)+n.getPenaltyN3(o)+n.getPenaltyN4(o);n.applyMask(m,o),v<f&&(f=v,d=m)}return d}}(Ef)),Ef}var cc={},gv;function H0(){if(gv)return cc;gv=1;const n=zp(),e=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],t=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return cc.getBlocksCount=function(o,a){switch(a){case n.L:return e[(o-1)*4+0];case n.M:return e[(o-1)*4+1];case n.Q:return e[(o-1)*4+2];case n.H:return e[(o-1)*4+3];default:return}},cc.getTotalCodewordsCount=function(o,a){switch(a){case n.L:return t[(o-1)*4+0];case n.M:return t[(o-1)*4+1];case n.Q:return t[(o-1)*4+2];case n.H:return t[(o-1)*4+3];default:return}},cc}var Tf={},nl={},yv;function HS(){if(yv)return nl;yv=1;const n=new Uint8Array(512),e=new Uint8Array(256);return function(){let r=1;for(let o=0;o<255;o++)n[o]=r,e[r]=o,r<<=1,r&256&&(r^=285);for(let o=255;o<512;o++)n[o]=n[o-255]}(),nl.log=function(r){if(r<1)throw new Error("log("+r+")");return e[r]},nl.exp=function(r){return n[r]},nl.mul=function(r,o){return r===0||o===0?0:n[e[r]+e[o]]},nl}var vv;function WS(){return vv||(vv=1,function(n){const e=HS();n.mul=function(r,o){const a=new Uint8Array(r.length+o.length-1);for(let u=0;u<r.length;u++)for(let d=0;d<o.length;d++)a[u+d]^=e.mul(r[u],o[d]);return a},n.mod=function(r,o){let a=new Uint8Array(r);for(;a.length-o.length>=0;){const u=a[0];for(let f=0;f<o.length;f++)a[f]^=e.mul(o[f],u);let d=0;for(;d<a.length&&a[d]===0;)d++;a=a.slice(d)}return a},n.generateECPolynomial=function(r){let o=new Uint8Array([1]);for(let a=0;a<r;a++)o=n.mul(o,new Uint8Array([1,e.exp(a)]));return o}}(Tf)),Tf}var If,_v;function KS(){if(_v)return If;_v=1;const n=WS();function e(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}return e.prototype.initialize=function(r){this.degree=r,this.genPoly=n.generateECPolynomial(this.degree)},e.prototype.encode=function(r){if(!this.genPoly)throw new Error("Encoder not initialized");const o=new Uint8Array(r.length+this.degree);o.set(r);const a=n.mod(o,this.genPoly),u=this.degree-a.length;if(u>0){const d=new Uint8Array(this.degree);return d.set(a,u),d}return a},If=e,If}var Sf={},Rf={},Af={},wv;function W0(){return wv||(wv=1,Af.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}),Af}var ur={},Ev;function K0(){if(Ev)return ur;Ev=1;const n="[0-9]+",e="[A-Z $%*+\\-./:]+";let t="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";t=t.replace(/u/g,"\\u");const r="(?:(?![A-Z0-9 $%*+\\-./:]|"+t+`)(?:.|[\r
]))+`;ur.KANJI=new RegExp(t,"g"),ur.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),ur.BYTE=new RegExp(r,"g"),ur.NUMERIC=new RegExp(n,"g"),ur.ALPHANUMERIC=new RegExp(e,"g");const o=new RegExp("^"+t+"$"),a=new RegExp("^"+n+"$"),u=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return ur.testKanji=function(f){return o.test(f)},ur.testNumeric=function(f){return a.test(f)},ur.testAlphanumeric=function(f){return u.test(f)},ur}var Tv;function xs(){return Tv||(Tv=1,function(n){const e=W0(),t=K0();n.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},n.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},n.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},n.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},n.MIXED={bit:-1},n.getCharCountIndicator=function(a,u){if(!a.ccBits)throw new Error("Invalid mode: "+a);if(!e.isValid(u))throw new Error("Invalid version: "+u);return u>=1&&u<10?a.ccBits[0]:u<27?a.ccBits[1]:a.ccBits[2]},n.getBestModeForData=function(a){return t.testNumeric(a)?n.NUMERIC:t.testAlphanumeric(a)?n.ALPHANUMERIC:t.testKanji(a)?n.KANJI:n.BYTE},n.toString=function(a){if(a&&a.id)return a.id;throw new Error("Invalid mode")},n.isValid=function(a){return a&&a.bit&&a.ccBits};function r(o){if(typeof o!="string")throw new Error("Param is not a string");switch(o.toLowerCase()){case"numeric":return n.NUMERIC;case"alphanumeric":return n.ALPHANUMERIC;case"kanji":return n.KANJI;case"byte":return n.BYTE;default:throw new Error("Unknown mode: "+o)}}n.from=function(a,u){if(n.isValid(a))return a;try{return r(a)}catch{return u}}}(Rf)),Rf}var Iv;function GS(){return Iv||(Iv=1,function(n){const e=Ps(),t=H0(),r=zp(),o=xs(),a=W0(),u=7973,d=e.getBCHDigit(u);function f(E,P,C){for(let L=1;L<=40;L++)if(P<=n.getCapacity(L,C,E))return L}function m(E,P){return o.getCharCountIndicator(E,P)+4}function v(E,P){let C=0;return E.forEach(function(L){const D=m(L.mode,P);C+=D+L.getBitsLength()}),C}function w(E,P){for(let C=1;C<=40;C++)if(v(E,C)<=n.getCapacity(C,P,o.MIXED))return C}n.from=function(P,C){return a.isValid(P)?parseInt(P,10):C},n.getCapacity=function(P,C,L){if(!a.isValid(P))throw new Error("Invalid QR Code version");typeof L>"u"&&(L=o.BYTE);const D=e.getSymbolTotalCodewords(P),U=t.getTotalCodewordsCount(P,C),W=(D-U)*8;if(L===o.MIXED)return W;const B=W-m(L,P);switch(L){case o.NUMERIC:return Math.floor(B/10*3);case o.ALPHANUMERIC:return Math.floor(B/11*2);case o.KANJI:return Math.floor(B/13);case o.BYTE:default:return Math.floor(B/8)}},n.getBestVersionForData=function(P,C){let L;const D=r.from(C,r.M);if(Array.isArray(P)){if(P.length>1)return w(P,D);if(P.length===0)return 1;L=P[0]}else L=P;return f(L.mode,L.getLength(),D)},n.getEncodedBits=function(P){if(!a.isValid(P)||P<7)throw new Error("Invalid QR Code version");let C=P<<12;for(;e.getBCHDigit(C)-d>=0;)C^=u<<e.getBCHDigit(C)-d;return P<<12|C}}(Sf)),Sf}var Cf={},Sv;function QS(){if(Sv)return Cf;Sv=1;const n=Ps(),e=1335,t=21522,r=n.getBCHDigit(e);return Cf.getEncodedBits=function(a,u){const d=a.bit<<3|u;let f=d<<10;for(;n.getBCHDigit(f)-r>=0;)f^=e<<n.getBCHDigit(f)-r;return(d<<10|f)^t},Cf}var Pf={},xf,Rv;function JS(){if(Rv)return xf;Rv=1;const n=xs();function e(t){this.mode=n.NUMERIC,this.data=t.toString()}return e.getBitsLength=function(r){return 10*Math.floor(r/3)+(r%3?r%3*3+1:0)},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(r){let o,a,u;for(o=0;o+3<=this.data.length;o+=3)a=this.data.substr(o,3),u=parseInt(a,10),r.put(u,10);const d=this.data.length-o;d>0&&(a=this.data.substr(o),u=parseInt(a,10),r.put(u,d*3+1))},xf=e,xf}var kf,Av;function YS(){if(Av)return kf;Av=1;const n=xs(),e=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function t(r){this.mode=n.ALPHANUMERIC,this.data=r}return t.getBitsLength=function(o){return 11*Math.floor(o/2)+6*(o%2)},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(o){let a;for(a=0;a+2<=this.data.length;a+=2){let u=e.indexOf(this.data[a])*45;u+=e.indexOf(this.data[a+1]),o.put(u,11)}this.data.length%2&&o.put(e.indexOf(this.data[a]),6)},kf=t,kf}var Nf,Cv;function XS(){if(Cv)return Nf;Cv=1;const n=xs();function e(t){this.mode=n.BYTE,typeof t=="string"?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}return e.getBitsLength=function(r){return r*8},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(t){for(let r=0,o=this.data.length;r<o;r++)t.put(this.data[r],8)},Nf=e,Nf}var bf,Pv;function ZS(){if(Pv)return bf;Pv=1;const n=xs(),e=Ps();function t(r){this.mode=n.KANJI,this.data=r}return t.getBitsLength=function(o){return o*13},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(r){let o;for(o=0;o<this.data.length;o++){let a=e.toSJIS(this.data[o]);if(a>=33088&&a<=40956)a-=33088;else if(a>=57408&&a<=60351)a-=49472;else throw new Error("Invalid SJIS character: "+this.data[o]+`
Make sure your charset is UTF-8`);a=(a>>>8&255)*192+(a&255),r.put(a,13)}},bf=t,bf}var Df={exports:{}},xv;function eR(){return xv||(xv=1,function(n){var e={single_source_shortest_paths:function(t,r,o){var a={},u={};u[r]=0;var d=e.PriorityQueue.make();d.push(r,0);for(var f,m,v,w,E,P,C,L,D;!d.empty();){f=d.pop(),m=f.value,w=f.cost,E=t[m]||{};for(v in E)E.hasOwnProperty(v)&&(P=E[v],C=w+P,L=u[v],D=typeof u[v]>"u",(D||L>C)&&(u[v]=C,d.push(v,C),a[v]=m))}if(typeof o<"u"&&typeof u[o]>"u"){var U=["Could not find a path from ",r," to ",o,"."].join("");throw new Error(U)}return a},extract_shortest_path_from_predecessor_list:function(t,r){for(var o=[],a=r;a;)o.push(a),t[a],a=t[a];return o.reverse(),o},find_path:function(t,r,o){var a=e.single_source_shortest_paths(t,r,o);return e.extract_shortest_path_from_predecessor_list(a,o)},PriorityQueue:{make:function(t){var r=e.PriorityQueue,o={},a;t=t||{};for(a in r)r.hasOwnProperty(a)&&(o[a]=r[a]);return o.queue=[],o.sorter=t.sorter||r.default_sorter,o},default_sorter:function(t,r){return t.cost-r.cost},push:function(t,r){var o={value:t,cost:r};this.queue.push(o),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};n.exports=e}(Df)),Df.exports}var kv;function tR(){return kv||(kv=1,function(n){const e=xs(),t=JS(),r=YS(),o=XS(),a=ZS(),u=K0(),d=Ps(),f=eR();function m(U){return unescape(encodeURIComponent(U)).length}function v(U,W,B){const J=[];let ie;for(;(ie=U.exec(B))!==null;)J.push({data:ie[0],index:ie.index,mode:W,length:ie[0].length});return J}function w(U){const W=v(u.NUMERIC,e.NUMERIC,U),B=v(u.ALPHANUMERIC,e.ALPHANUMERIC,U);let J,ie;return d.isKanjiModeEnabled()?(J=v(u.BYTE,e.BYTE,U),ie=v(u.KANJI,e.KANJI,U)):(J=v(u.BYTE_KANJI,e.BYTE,U),ie=[]),W.concat(B,J,ie).sort(function(k,I){return k.index-I.index}).map(function(k){return{data:k.data,mode:k.mode,length:k.length}})}function E(U,W){switch(W){case e.NUMERIC:return t.getBitsLength(U);case e.ALPHANUMERIC:return r.getBitsLength(U);case e.KANJI:return a.getBitsLength(U);case e.BYTE:return o.getBitsLength(U)}}function P(U){return U.reduce(function(W,B){const J=W.length-1>=0?W[W.length-1]:null;return J&&J.mode===B.mode?(W[W.length-1].data+=B.data,W):(W.push(B),W)},[])}function C(U){const W=[];for(let B=0;B<U.length;B++){const J=U[B];switch(J.mode){case e.NUMERIC:W.push([J,{data:J.data,mode:e.ALPHANUMERIC,length:J.length},{data:J.data,mode:e.BYTE,length:J.length}]);break;case e.ALPHANUMERIC:W.push([J,{data:J.data,mode:e.BYTE,length:J.length}]);break;case e.KANJI:W.push([J,{data:J.data,mode:e.BYTE,length:m(J.data)}]);break;case e.BYTE:W.push([{data:J.data,mode:e.BYTE,length:m(J.data)}])}}return W}function L(U,W){const B={},J={start:{}};let ie=["start"];for(let Y=0;Y<U.length;Y++){const k=U[Y],I=[];for(let S=0;S<k.length;S++){const x=k[S],N=""+Y+S;I.push(N),B[N]={node:x,lastCount:0},J[N]={};for(let V=0;V<ie.length;V++){const A=ie[V];B[A]&&B[A].node.mode===x.mode?(J[A][N]=E(B[A].lastCount+x.length,x.mode)-E(B[A].lastCount,x.mode),B[A].lastCount+=x.length):(B[A]&&(B[A].lastCount=x.length),J[A][N]=E(x.length,x.mode)+4+e.getCharCountIndicator(x.mode,W))}}ie=I}for(let Y=0;Y<ie.length;Y++)J[ie[Y]].end=0;return{map:J,table:B}}function D(U,W){let B;const J=e.getBestModeForData(U);if(B=e.from(W,J),B!==e.BYTE&&B.bit<J.bit)throw new Error('"'+U+'" cannot be encoded with mode '+e.toString(B)+`.
 Suggested mode is: `+e.toString(J));switch(B===e.KANJI&&!d.isKanjiModeEnabled()&&(B=e.BYTE),B){case e.NUMERIC:return new t(U);case e.ALPHANUMERIC:return new r(U);case e.KANJI:return new a(U);case e.BYTE:return new o(U)}}n.fromArray=function(W){return W.reduce(function(B,J){return typeof J=="string"?B.push(D(J,null)):J.data&&B.push(D(J.data,J.mode)),B},[])},n.fromString=function(W,B){const J=w(W,d.isKanjiModeEnabled()),ie=C(J),Y=L(ie,B),k=f.find_path(Y.map,"start","end"),I=[];for(let S=1;S<k.length-1;S++)I.push(Y.table[k[S]].node);return n.fromArray(P(I))},n.rawSplit=function(W){return n.fromArray(w(W,d.isKanjiModeEnabled()))}}(Pf)),Pf}var Nv;function nR(){if(Nv)return mf;Nv=1;const n=Ps(),e=zp(),t=jS(),r=BS(),o=zS(),a=$S(),u=qS(),d=H0(),f=KS(),m=GS(),v=QS(),w=xs(),E=tR();function P(Y,k){const I=Y.size,S=a.getPositions(k);for(let x=0;x<S.length;x++){const N=S[x][0],V=S[x][1];for(let A=-1;A<=7;A++)if(!(N+A<=-1||I<=N+A))for(let ce=-1;ce<=7;ce++)V+ce<=-1||I<=V+ce||(A>=0&&A<=6&&(ce===0||ce===6)||ce>=0&&ce<=6&&(A===0||A===6)||A>=2&&A<=4&&ce>=2&&ce<=4?Y.set(N+A,V+ce,!0,!0):Y.set(N+A,V+ce,!1,!0))}}function C(Y){const k=Y.size;for(let I=8;I<k-8;I++){const S=I%2===0;Y.set(I,6,S,!0),Y.set(6,I,S,!0)}}function L(Y,k){const I=o.getPositions(k);for(let S=0;S<I.length;S++){const x=I[S][0],N=I[S][1];for(let V=-2;V<=2;V++)for(let A=-2;A<=2;A++)V===-2||V===2||A===-2||A===2||V===0&&A===0?Y.set(x+V,N+A,!0,!0):Y.set(x+V,N+A,!1,!0)}}function D(Y,k){const I=Y.size,S=m.getEncodedBits(k);let x,N,V;for(let A=0;A<18;A++)x=Math.floor(A/3),N=A%3+I-8-3,V=(S>>A&1)===1,Y.set(x,N,V,!0),Y.set(N,x,V,!0)}function U(Y,k,I){const S=Y.size,x=v.getEncodedBits(k,I);let N,V;for(N=0;N<15;N++)V=(x>>N&1)===1,N<6?Y.set(N,8,V,!0):N<8?Y.set(N+1,8,V,!0):Y.set(S-15+N,8,V,!0),N<8?Y.set(8,S-N-1,V,!0):N<9?Y.set(8,15-N-1+1,V,!0):Y.set(8,15-N-1,V,!0);Y.set(S-8,8,1,!0)}function W(Y,k){const I=Y.size;let S=-1,x=I-1,N=7,V=0;for(let A=I-1;A>0;A-=2)for(A===6&&A--;;){for(let ce=0;ce<2;ce++)if(!Y.isReserved(x,A-ce)){let We=!1;V<k.length&&(We=(k[V]>>>N&1)===1),Y.set(x,A-ce,We),N--,N===-1&&(V++,N=7)}if(x+=S,x<0||I<=x){x-=S,S=-S;break}}}function B(Y,k,I){const S=new t;I.forEach(function(ce){S.put(ce.mode.bit,4),S.put(ce.getLength(),w.getCharCountIndicator(ce.mode,Y)),ce.write(S)});const x=n.getSymbolTotalCodewords(Y),N=d.getTotalCodewordsCount(Y,k),V=(x-N)*8;for(S.getLengthInBits()+4<=V&&S.put(0,4);S.getLengthInBits()%8!==0;)S.putBit(0);const A=(V-S.getLengthInBits())/8;for(let ce=0;ce<A;ce++)S.put(ce%2?17:236,8);return J(S,Y,k)}function J(Y,k,I){const S=n.getSymbolTotalCodewords(k),x=d.getTotalCodewordsCount(k,I),N=S-x,V=d.getBlocksCount(k,I),A=S%V,ce=V-A,We=Math.floor(S/V),st=Math.floor(N/V),$e=st+1,ae=We-st,ve=new f(ae);let le=0;const j=new Array(V),X=new Array(V);let ge=0;const xe=new Uint8Array(Y.buffer);for(let je=0;je<V;je++){const ot=je<ce?st:$e;j[je]=xe.slice(le,le+ot),X[je]=ve.encode(j[je]),le+=ot,ge=Math.max(ge,ot)}const Ce=new Uint8Array(S);let Oe=0,ke,Ne;for(ke=0;ke<ge;ke++)for(Ne=0;Ne<V;Ne++)ke<j[Ne].length&&(Ce[Oe++]=j[Ne][ke]);for(ke=0;ke<ae;ke++)for(Ne=0;Ne<V;Ne++)Ce[Oe++]=X[Ne][ke];return Ce}function ie(Y,k,I,S){let x;if(Array.isArray(Y))x=E.fromArray(Y);else if(typeof Y=="string"){let We=k;if(!We){const st=E.rawSplit(Y);We=m.getBestVersionForData(st,I)}x=E.fromString(Y,We||40)}else throw new Error("Invalid data");const N=m.getBestVersionForData(x,I);if(!N)throw new Error("The amount of data is too big to be stored in a QR Code");if(!k)k=N;else if(k<N)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+N+`.
`);const V=B(k,I,x),A=n.getSymbolSize(k),ce=new r(A);return P(ce,k),C(ce),L(ce,k),U(ce,I,0),k>=7&&D(ce,k),W(ce,V),isNaN(S)&&(S=u.getBestMask(ce,U.bind(null,ce,I))),u.applyMask(S,ce),U(ce,I,S),{modules:ce,version:k,errorCorrectionLevel:I,maskPattern:S,segments:x}}return mf.create=function(k,I){if(typeof k>"u"||k==="")throw new Error("No input text");let S=e.M,x,N;return typeof I<"u"&&(S=e.from(I.errorCorrectionLevel,e.M),x=m.from(I.version),N=u.from(I.maskPattern),I.toSJISFunc&&n.setToSJISFunction(I.toSJISFunc)),ie(k,x,S,N)},mf}var Of={},Lf={},bv;function G0(){return bv||(bv=1,function(n){function e(t){if(typeof t=="number"&&(t=t.toString()),typeof t!="string")throw new Error("Color should be defined as hex string");let r=t.slice().replace("#","").split("");if(r.length<3||r.length===5||r.length>8)throw new Error("Invalid hex color: "+t);(r.length===3||r.length===4)&&(r=Array.prototype.concat.apply([],r.map(function(a){return[a,a]}))),r.length===6&&r.push("F","F");const o=parseInt(r.join(""),16);return{r:o>>24&255,g:o>>16&255,b:o>>8&255,a:o&255,hex:"#"+r.slice(0,6).join("")}}n.getOptions=function(r){r||(r={}),r.color||(r.color={});const o=typeof r.margin>"u"||r.margin===null||r.margin<0?4:r.margin,a=r.width&&r.width>=21?r.width:void 0,u=r.scale||4;return{width:a,scale:a?4:u,margin:o,color:{dark:e(r.color.dark||"#000000ff"),light:e(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},n.getScale=function(r,o){return o.width&&o.width>=r+o.margin*2?o.width/(r+o.margin*2):o.scale},n.getImageWidth=function(r,o){const a=n.getScale(r,o);return Math.floor((r+o.margin*2)*a)},n.qrToImageData=function(r,o,a){const u=o.modules.size,d=o.modules.data,f=n.getScale(u,a),m=Math.floor((u+a.margin*2)*f),v=a.margin*f,w=[a.color.light,a.color.dark];for(let E=0;E<m;E++)for(let P=0;P<m;P++){let C=(E*m+P)*4,L=a.color.light;if(E>=v&&P>=v&&E<m-v&&P<m-v){const D=Math.floor((E-v)/f),U=Math.floor((P-v)/f);L=w[d[D*u+U]?1:0]}r[C++]=L.r,r[C++]=L.g,r[C++]=L.b,r[C]=L.a}}}(Lf)),Lf}var Dv;function rR(){return Dv||(Dv=1,function(n){const e=G0();function t(o,a,u){o.clearRect(0,0,a.width,a.height),a.style||(a.style={}),a.height=u,a.width=u,a.style.height=u+"px",a.style.width=u+"px"}function r(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}n.render=function(a,u,d){let f=d,m=u;typeof f>"u"&&(!u||!u.getContext)&&(f=u,u=void 0),u||(m=r()),f=e.getOptions(f);const v=e.getImageWidth(a.modules.size,f),w=m.getContext("2d"),E=w.createImageData(v,v);return e.qrToImageData(E.data,a,f),t(w,m,v),w.putImageData(E,0,0),m},n.renderToDataURL=function(a,u,d){let f=d;typeof f>"u"&&(!u||!u.getContext)&&(f=u,u=void 0),f||(f={});const m=n.render(a,u,f),v=f.type||"image/png",w=f.rendererOpts||{};return m.toDataURL(v,w.quality)}}(Of)),Of}var Vf={},Ov;function iR(){if(Ov)return Vf;Ov=1;const n=G0();function e(o,a){const u=o.a/255,d=a+'="'+o.hex+'"';return u<1?d+" "+a+'-opacity="'+u.toFixed(2).slice(1)+'"':d}function t(o,a,u){let d=o+a;return typeof u<"u"&&(d+=" "+u),d}function r(o,a,u){let d="",f=0,m=!1,v=0;for(let w=0;w<o.length;w++){const E=Math.floor(w%a),P=Math.floor(w/a);!E&&!m&&(m=!0),o[w]?(v++,w>0&&E>0&&o[w-1]||(d+=m?t("M",E+u,.5+P+u):t("m",f,0),f=0,m=!1),E+1<a&&o[w+1]||(d+=t("h",v),v=0)):f++}return d}return Vf.render=function(a,u,d){const f=n.getOptions(u),m=a.modules.size,v=a.modules.data,w=m+f.margin*2,E=f.color.light.a?"<path "+e(f.color.light,"fill")+' d="M0 0h'+w+"v"+w+'H0z"/>':"",P="<path "+e(f.color.dark,"stroke")+' d="'+r(v,m,f.margin)+'"/>',C='viewBox="0 0 '+w+" "+w+'"',D='<svg xmlns="http://www.w3.org/2000/svg" '+(f.width?'width="'+f.width+'" height="'+f.width+'" ':"")+C+' shape-rendering="crispEdges">'+E+P+`</svg>
`;return typeof d=="function"&&d(null,D),D},Vf}var Lv;function sR(){if(Lv)return Po;Lv=1;const n=US(),e=nR(),t=rR(),r=iR();function o(a,u,d,f,m){const v=[].slice.call(arguments,1),w=v.length,E=typeof v[w-1]=="function";if(!E&&!n())throw new Error("Callback required as last argument");if(E){if(w<2)throw new Error("Too few arguments provided");w===2?(m=d,d=u,u=f=void 0):w===3&&(u.getContext&&typeof m>"u"?(m=f,f=void 0):(m=f,f=d,d=u,u=void 0))}else{if(w<1)throw new Error("Too few arguments provided");return w===1?(d=u,u=f=void 0):w===2&&!u.getContext&&(f=d,d=u,u=void 0),new Promise(function(P,C){try{const L=e.create(d,f);P(a(L,u,f))}catch(L){C(L)}})}try{const P=e.create(d,f);m(null,a(P,u,f))}catch(P){m(P)}}return Po.create=e.create,Po.toCanvas=o.bind(null,t.render),Po.toDataURL=o.bind(null,t.renderToDataURL),Po.toString=o.bind(null,function(a,u,d){return r.render(a,d)}),Po}var oR=sR();const aR=nI(oR),lR=()=>{const[n,e]=H.useState(""),[t,r]=H.useState("entree"),[o,a]=H.useState(""),u=()=>{const f=new Date,m=f.getDay(),v=f.getHours(),w=f.getMinutes();return m===5&&(v>15||v===15&&w>=0)||m>=1&&m<=4&&(v>16||v===16&&w>=30)},d=()=>{const m=new Date().toISOString().split("T")[0];a(m);const v=u()?"sortie":"entree";r(v);const w=`${window.location.origin}/pointage?token=QR-${m}&type=${v}`;aR.toDataURL(w,{width:300,margin:2,color:{dark:"#003366",light:"#ffffff"}}).then(E=>{e(E)}).catch(E=>{console.error("Erreur lors de la génération du QR code:",E)})};return H.useEffect(()=>{d();const f=setInterval(()=>{d()},6e4);return()=>clearInterval(f)},[]),O.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-50 p-4",children:[O.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 max-w-md w-full",children:[O.jsx("div",{className:"flex justify-center mb-6",children:O.jsx("img",{src:"/images/Logo_Noisy_Sec.svg",alt:"Logo Mairie de Noisy-le-Sec",className:"h-24"})}),O.jsx("h1",{className:"text-2xl font-bold text-center text-blue-800 mb-2",children:"Mairie de Noisy-le-Sec"}),O.jsxs("h2",{className:"text-xl font-semibold text-center text-blue-600 mb-6",children:["Système de Pointage - ",t==="entree"?"ENTRÉE":"SORTIE"]}),O.jsx("div",{className:"flex justify-center mb-6",children:n&&O.jsx("div",{className:"border-4 border-blue-800 p-2 rounded-lg",children:O.jsx("img",{src:n,alt:"QR Code de pointage"})})}),O.jsxs("div",{className:"text-center mb-4",children:[O.jsxs("p",{className:"text-lg font-medium text-gray-700",children:["Date: ",O.jsx("span",{className:"font-bold",children:o})]}),O.jsxs("p",{className:"text-lg font-medium text-gray-700",children:["Type: ",O.jsx("span",{className:"font-bold text-blue-700",children:t==="entree"?"Entrée":"Sortie"})]})]}),O.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[O.jsx("p",{className:"text-sm text-gray-700 mb-2",children:O.jsx("strong",{children:"Instructions:"})}),O.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:["1. Scannez ce QR code avec votre téléphone pour enregistrer votre ",t,"."]}),O.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"2. Le QR code change automatiquement:"}),O.jsx("p",{className:"text-sm text-gray-600 ml-4 mb-1",children:"• QR de sortie à 16h30 (lundi au jeudi)"}),O.jsx("p",{className:"text-sm text-gray-600 ml-4",children:"• QR de sortie à 15h00 (vendredi)"})]})]}),O.jsx("div",{className:"mt-6 text-center",children:O.jsx("a",{href:"/",className:"text-blue-600 hover:text-blue-800",children:"Retour à l'accueil"})}),O.jsxs("div",{className:"mt-6 text-sm text-gray-500",children:["© ",new Date().getFullYear()," - Ville de Noisy-le-Sec - Tous droits réservés"]})]})};function Q0(n,e){return function(){return n.apply(e,arguments)}}const{toString:uR}=Object.prototype,{getPrototypeOf:$p}=Object,{iterator:ih,toStringTag:J0}=Symbol,sh=(n=>e=>{const t=uR.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Yn=n=>(n=n.toLowerCase(),e=>sh(e)===n),oh=n=>e=>typeof e===n,{isArray:Jo}=Array,wl=oh("undefined");function cR(n){return n!==null&&!wl(n)&&n.constructor!==null&&!wl(n.constructor)&&an(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const Y0=Yn("ArrayBuffer");function hR(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&Y0(n.buffer),e}const dR=oh("string"),an=oh("function"),X0=oh("number"),ah=n=>n!==null&&typeof n=="object",fR=n=>n===!0||n===!1,_c=n=>{if(sh(n)!=="object")return!1;const e=$p(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(J0 in n)&&!(ih in n)},pR=Yn("Date"),mR=Yn("File"),gR=Yn("Blob"),yR=Yn("FileList"),vR=n=>ah(n)&&an(n.pipe),_R=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||an(n.append)&&((e=sh(n))==="formdata"||e==="object"&&an(n.toString)&&n.toString()==="[object FormData]"))},wR=Yn("URLSearchParams"),[ER,TR,IR,SR]=["ReadableStream","Request","Response","Headers"].map(Yn),RR=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Dl(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let r,o;if(typeof n!="object"&&(n=[n]),Jo(n))for(r=0,o=n.length;r<o;r++)e.call(null,n[r],r,n);else{const a=t?Object.getOwnPropertyNames(n):Object.keys(n),u=a.length;let d;for(r=0;r<u;r++)d=a[r],e.call(null,n[d],d,n)}}function Z0(n,e){e=e.toLowerCase();const t=Object.keys(n);let r=t.length,o;for(;r-- >0;)if(o=t[r],e===o.toLowerCase())return o;return null}const vs=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,ew=n=>!wl(n)&&n!==vs;function tp(){const{caseless:n}=ew(this)&&this||{},e={},t=(r,o)=>{const a=n&&Z0(e,o)||o;_c(e[a])&&_c(r)?e[a]=tp(e[a],r):_c(r)?e[a]=tp({},r):Jo(r)?e[a]=r.slice():e[a]=r};for(let r=0,o=arguments.length;r<o;r++)arguments[r]&&Dl(arguments[r],t);return e}const AR=(n,e,t,{allOwnKeys:r}={})=>(Dl(e,(o,a)=>{t&&an(o)?n[a]=Q0(o,t):n[a]=o},{allOwnKeys:r}),n),CR=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),PR=(n,e,t,r)=>{n.prototype=Object.create(e.prototype,r),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},xR=(n,e,t,r)=>{let o,a,u;const d={};if(e=e||{},n==null)return e;do{for(o=Object.getOwnPropertyNames(n),a=o.length;a-- >0;)u=o[a],(!r||r(u,n,e))&&!d[u]&&(e[u]=n[u],d[u]=!0);n=t!==!1&&$p(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},kR=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const r=n.indexOf(e,t);return r!==-1&&r===t},NR=n=>{if(!n)return null;if(Jo(n))return n;let e=n.length;if(!X0(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},bR=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&$p(Uint8Array)),DR=(n,e)=>{const r=(n&&n[ih]).call(n);let o;for(;(o=r.next())&&!o.done;){const a=o.value;e.call(n,a[0],a[1])}},OR=(n,e)=>{let t;const r=[];for(;(t=n.exec(e))!==null;)r.push(t);return r},LR=Yn("HTMLFormElement"),VR=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,r,o){return r.toUpperCase()+o}),Vv=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),MR=Yn("RegExp"),tw=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),r={};Dl(t,(o,a)=>{let u;(u=e(o,a,n))!==!1&&(r[a]=u||o)}),Object.defineProperties(n,r)},FR=n=>{tw(n,(e,t)=>{if(an(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const r=n[t];if(an(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},UR=(n,e)=>{const t={},r=o=>{o.forEach(a=>{t[a]=!0})};return Jo(n)?r(n):r(String(n).split(e)),t},jR=()=>{},BR=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function zR(n){return!!(n&&an(n.append)&&n[J0]==="FormData"&&n[ih])}const $R=n=>{const e=new Array(10),t=(r,o)=>{if(ah(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[o]=r;const a=Jo(r)?[]:{};return Dl(r,(u,d)=>{const f=t(u,o+1);!wl(f)&&(a[d]=f)}),e[o]=void 0,a}}return r};return t(n,0)},qR=Yn("AsyncFunction"),HR=n=>n&&(ah(n)||an(n))&&an(n.then)&&an(n.catch),nw=((n,e)=>n?setImmediate:e?((t,r)=>(vs.addEventListener("message",({source:o,data:a})=>{o===vs&&a===t&&r.length&&r.shift()()},!1),o=>{r.push(o),vs.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",an(vs.postMessage)),WR=typeof queueMicrotask<"u"?queueMicrotask.bind(vs):typeof process<"u"&&process.nextTick||nw,KR=n=>n!=null&&an(n[ih]),Q={isArray:Jo,isArrayBuffer:Y0,isBuffer:cR,isFormData:_R,isArrayBufferView:hR,isString:dR,isNumber:X0,isBoolean:fR,isObject:ah,isPlainObject:_c,isReadableStream:ER,isRequest:TR,isResponse:IR,isHeaders:SR,isUndefined:wl,isDate:pR,isFile:mR,isBlob:gR,isRegExp:MR,isFunction:an,isStream:vR,isURLSearchParams:wR,isTypedArray:bR,isFileList:yR,forEach:Dl,merge:tp,extend:AR,trim:RR,stripBOM:CR,inherits:PR,toFlatObject:xR,kindOf:sh,kindOfTest:Yn,endsWith:kR,toArray:NR,forEachEntry:DR,matchAll:OR,isHTMLForm:LR,hasOwnProperty:Vv,hasOwnProp:Vv,reduceDescriptors:tw,freezeMethods:FR,toObjectSet:UR,toCamelCase:VR,noop:jR,toFiniteNumber:BR,findKey:Z0,global:vs,isContextDefined:ew,isSpecCompliantForm:zR,toJSONObject:$R,isAsyncFn:qR,isThenable:HR,setImmediate:nw,asap:WR,isIterable:KR};function Pe(n,e,t,r,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),r&&(this.request=r),o&&(this.response=o,this.status=o.status?o.status:null)}Q.inherits(Pe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Q.toJSONObject(this.config),code:this.code,status:this.status}}});const rw=Pe.prototype,iw={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{iw[n]={value:n}});Object.defineProperties(Pe,iw);Object.defineProperty(rw,"isAxiosError",{value:!0});Pe.from=(n,e,t,r,o,a)=>{const u=Object.create(rw);return Q.toFlatObject(n,u,function(f){return f!==Error.prototype},d=>d!=="isAxiosError"),Pe.call(u,n.message,e,t,r,o),u.cause=n,u.name=n.name,a&&Object.assign(u,a),u};const GR=null;function np(n){return Q.isPlainObject(n)||Q.isArray(n)}function sw(n){return Q.endsWith(n,"[]")?n.slice(0,-2):n}function Mv(n,e,t){return n?n.concat(e).map(function(o,a){return o=sw(o),!t&&a?"["+o+"]":o}).join(t?".":""):e}function QR(n){return Q.isArray(n)&&!n.some(np)}const JR=Q.toFlatObject(Q,{},null,function(e){return/^is[A-Z]/.test(e)});function lh(n,e,t){if(!Q.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=Q.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(L,D){return!Q.isUndefined(D[L])});const r=t.metaTokens,o=t.visitor||v,a=t.dots,u=t.indexes,f=(t.Blob||typeof Blob<"u"&&Blob)&&Q.isSpecCompliantForm(e);if(!Q.isFunction(o))throw new TypeError("visitor must be a function");function m(C){if(C===null)return"";if(Q.isDate(C))return C.toISOString();if(!f&&Q.isBlob(C))throw new Pe("Blob is not supported. Use a Buffer instead.");return Q.isArrayBuffer(C)||Q.isTypedArray(C)?f&&typeof Blob=="function"?new Blob([C]):Buffer.from(C):C}function v(C,L,D){let U=C;if(C&&!D&&typeof C=="object"){if(Q.endsWith(L,"{}"))L=r?L:L.slice(0,-2),C=JSON.stringify(C);else if(Q.isArray(C)&&QR(C)||(Q.isFileList(C)||Q.endsWith(L,"[]"))&&(U=Q.toArray(C)))return L=sw(L),U.forEach(function(B,J){!(Q.isUndefined(B)||B===null)&&e.append(u===!0?Mv([L],J,a):u===null?L:L+"[]",m(B))}),!1}return np(C)?!0:(e.append(Mv(D,L,a),m(C)),!1)}const w=[],E=Object.assign(JR,{defaultVisitor:v,convertValue:m,isVisitable:np});function P(C,L){if(!Q.isUndefined(C)){if(w.indexOf(C)!==-1)throw Error("Circular reference detected in "+L.join("."));w.push(C),Q.forEach(C,function(U,W){(!(Q.isUndefined(U)||U===null)&&o.call(e,U,Q.isString(W)?W.trim():W,L,E))===!0&&P(U,L?L.concat(W):[W])}),w.pop()}}if(!Q.isObject(n))throw new TypeError("data must be an object");return P(n),e}function Fv(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function qp(n,e){this._pairs=[],n&&lh(n,this,e)}const ow=qp.prototype;ow.append=function(e,t){this._pairs.push([e,t])};ow.toString=function(e){const t=e?function(r){return e.call(this,r,Fv)}:Fv;return this._pairs.map(function(o){return t(o[0])+"="+t(o[1])},"").join("&")};function YR(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function aw(n,e,t){if(!e)return n;const r=t&&t.encode||YR;Q.isFunction(t)&&(t={serialize:t});const o=t&&t.serialize;let a;if(o?a=o(e,t):a=Q.isURLSearchParams(e)?e.toString():new qp(e,t).toString(r),a){const u=n.indexOf("#");u!==-1&&(n=n.slice(0,u)),n+=(n.indexOf("?")===-1?"?":"&")+a}return n}class Uv{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Q.forEach(this.handlers,function(r){r!==null&&e(r)})}}const lw={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},XR=typeof URLSearchParams<"u"?URLSearchParams:qp,ZR=typeof FormData<"u"?FormData:null,eA=typeof Blob<"u"?Blob:null,tA={isBrowser:!0,classes:{URLSearchParams:XR,FormData:ZR,Blob:eA},protocols:["http","https","file","blob","url","data"]},Hp=typeof window<"u"&&typeof document<"u",rp=typeof navigator=="object"&&navigator||void 0,nA=Hp&&(!rp||["ReactNative","NativeScript","NS"].indexOf(rp.product)<0),rA=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",iA=Hp&&window.location.href||"http://localhost",sA=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Hp,hasStandardBrowserEnv:nA,hasStandardBrowserWebWorkerEnv:rA,navigator:rp,origin:iA},Symbol.toStringTag,{value:"Module"})),$t={...sA,...tA};function oA(n,e){return lh(n,new $t.classes.URLSearchParams,Object.assign({visitor:function(t,r,o,a){return $t.isNode&&Q.isBuffer(t)?(this.append(r,t.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},e))}function aA(n){return Q.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function lA(n){const e={},t=Object.keys(n);let r;const o=t.length;let a;for(r=0;r<o;r++)a=t[r],e[a]=n[a];return e}function uw(n){function e(t,r,o,a){let u=t[a++];if(u==="__proto__")return!0;const d=Number.isFinite(+u),f=a>=t.length;return u=!u&&Q.isArray(o)?o.length:u,f?(Q.hasOwnProp(o,u)?o[u]=[o[u],r]:o[u]=r,!d):((!o[u]||!Q.isObject(o[u]))&&(o[u]=[]),e(t,r,o[u],a)&&Q.isArray(o[u])&&(o[u]=lA(o[u])),!d)}if(Q.isFormData(n)&&Q.isFunction(n.entries)){const t={};return Q.forEachEntry(n,(r,o)=>{e(aA(r),o,t,0)}),t}return null}function uA(n,e,t){if(Q.isString(n))try{return(e||JSON.parse)(n),Q.trim(n)}catch(r){if(r.name!=="SyntaxError")throw r}return(t||JSON.stringify)(n)}const Ol={transitional:lw,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",o=r.indexOf("application/json")>-1,a=Q.isObject(e);if(a&&Q.isHTMLForm(e)&&(e=new FormData(e)),Q.isFormData(e))return o?JSON.stringify(uw(e)):e;if(Q.isArrayBuffer(e)||Q.isBuffer(e)||Q.isStream(e)||Q.isFile(e)||Q.isBlob(e)||Q.isReadableStream(e))return e;if(Q.isArrayBufferView(e))return e.buffer;if(Q.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let d;if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return oA(e,this.formSerializer).toString();if((d=Q.isFileList(e))||r.indexOf("multipart/form-data")>-1){const f=this.env&&this.env.FormData;return lh(d?{"files[]":e}:e,f&&new f,this.formSerializer)}}return a||o?(t.setContentType("application/json",!1),uA(e)):e}],transformResponse:[function(e){const t=this.transitional||Ol.transitional,r=t&&t.forcedJSONParsing,o=this.responseType==="json";if(Q.isResponse(e)||Q.isReadableStream(e))return e;if(e&&Q.isString(e)&&(r&&!this.responseType||o)){const u=!(t&&t.silentJSONParsing)&&o;try{return JSON.parse(e)}catch(d){if(u)throw d.name==="SyntaxError"?Pe.from(d,Pe.ERR_BAD_RESPONSE,this,null,this.response):d}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:$t.classes.FormData,Blob:$t.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Q.forEach(["delete","get","head","post","put","patch"],n=>{Ol.headers[n]={}});const cA=Q.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),hA=n=>{const e={};let t,r,o;return n&&n.split(`
`).forEach(function(u){o=u.indexOf(":"),t=u.substring(0,o).trim().toLowerCase(),r=u.substring(o+1).trim(),!(!t||e[t]&&cA[t])&&(t==="set-cookie"?e[t]?e[t].push(r):e[t]=[r]:e[t]=e[t]?e[t]+", "+r:r)}),e},jv=Symbol("internals");function rl(n){return n&&String(n).trim().toLowerCase()}function wc(n){return n===!1||n==null?n:Q.isArray(n)?n.map(wc):String(n)}function dA(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=t.exec(n);)e[r[1]]=r[2];return e}const fA=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function Mf(n,e,t,r,o){if(Q.isFunction(r))return r.call(this,e,t);if(o&&(e=t),!!Q.isString(e)){if(Q.isString(r))return e.indexOf(r)!==-1;if(Q.isRegExp(r))return r.test(e)}}function pA(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}function mA(n,e){const t=Q.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(n,r+t,{value:function(o,a,u){return this[r].call(this,e,o,a,u)},configurable:!0})})}let ln=class{constructor(e){e&&this.set(e)}set(e,t,r){const o=this;function a(d,f,m){const v=rl(f);if(!v)throw new Error("header name must be a non-empty string");const w=Q.findKey(o,v);(!w||o[w]===void 0||m===!0||m===void 0&&o[w]!==!1)&&(o[w||f]=wc(d))}const u=(d,f)=>Q.forEach(d,(m,v)=>a(m,v,f));if(Q.isPlainObject(e)||e instanceof this.constructor)u(e,t);else if(Q.isString(e)&&(e=e.trim())&&!fA(e))u(hA(e),t);else if(Q.isObject(e)&&Q.isIterable(e)){let d={},f,m;for(const v of e){if(!Q.isArray(v))throw TypeError("Object iterator must return a key-value pair");d[m=v[0]]=(f=d[m])?Q.isArray(f)?[...f,v[1]]:[f,v[1]]:v[1]}u(d,t)}else e!=null&&a(t,e,r);return this}get(e,t){if(e=rl(e),e){const r=Q.findKey(this,e);if(r){const o=this[r];if(!t)return o;if(t===!0)return dA(o);if(Q.isFunction(t))return t.call(this,o,r);if(Q.isRegExp(t))return t.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=rl(e),e){const r=Q.findKey(this,e);return!!(r&&this[r]!==void 0&&(!t||Mf(this,this[r],r,t)))}return!1}delete(e,t){const r=this;let o=!1;function a(u){if(u=rl(u),u){const d=Q.findKey(r,u);d&&(!t||Mf(r,r[d],d,t))&&(delete r[d],o=!0)}}return Q.isArray(e)?e.forEach(a):a(e),o}clear(e){const t=Object.keys(this);let r=t.length,o=!1;for(;r--;){const a=t[r];(!e||Mf(this,this[a],a,e,!0))&&(delete this[a],o=!0)}return o}normalize(e){const t=this,r={};return Q.forEach(this,(o,a)=>{const u=Q.findKey(r,a);if(u){t[u]=wc(o),delete t[a];return}const d=e?pA(a):String(a).trim();d!==a&&delete t[a],t[d]=wc(o),r[d]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return Q.forEach(this,(r,o)=>{r!=null&&r!==!1&&(t[o]=e&&Q.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach(o=>r.set(o)),r}static accessor(e){const r=(this[jv]=this[jv]={accessors:{}}).accessors,o=this.prototype;function a(u){const d=rl(u);r[d]||(mA(o,u),r[d]=!0)}return Q.isArray(e)?e.forEach(a):a(e),this}};ln.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Q.reduceDescriptors(ln.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(r){this[t]=r}}});Q.freezeMethods(ln);function Ff(n,e){const t=this||Ol,r=e||t,o=ln.from(r.headers);let a=r.data;return Q.forEach(n,function(d){a=d.call(t,a,o.normalize(),e?e.status:void 0)}),o.normalize(),a}function cw(n){return!!(n&&n.__CANCEL__)}function Yo(n,e,t){Pe.call(this,n??"canceled",Pe.ERR_CANCELED,e,t),this.name="CanceledError"}Q.inherits(Yo,Pe,{__CANCEL__:!0});function hw(n,e,t){const r=t.config.validateStatus;!t.status||!r||r(t.status)?n(t):e(new Pe("Request failed with status code "+t.status,[Pe.ERR_BAD_REQUEST,Pe.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function gA(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function yA(n,e){n=n||10;const t=new Array(n),r=new Array(n);let o=0,a=0,u;return e=e!==void 0?e:1e3,function(f){const m=Date.now(),v=r[a];u||(u=m),t[o]=f,r[o]=m;let w=a,E=0;for(;w!==o;)E+=t[w++],w=w%n;if(o=(o+1)%n,o===a&&(a=(a+1)%n),m-u<e)return;const P=v&&m-v;return P?Math.round(E*1e3/P):void 0}}function vA(n,e){let t=0,r=1e3/e,o,a;const u=(m,v=Date.now())=>{t=v,o=null,a&&(clearTimeout(a),a=null),n.apply(null,m)};return[(...m)=>{const v=Date.now(),w=v-t;w>=r?u(m,v):(o=m,a||(a=setTimeout(()=>{a=null,u(o)},r-w)))},()=>o&&u(o)]}const Oc=(n,e,t=3)=>{let r=0;const o=yA(50,250);return vA(a=>{const u=a.loaded,d=a.lengthComputable?a.total:void 0,f=u-r,m=o(f),v=u<=d;r=u;const w={loaded:u,total:d,progress:d?u/d:void 0,bytes:f,rate:m||void 0,estimated:m&&d&&v?(d-u)/m:void 0,event:a,lengthComputable:d!=null,[e?"download":"upload"]:!0};n(w)},t)},Bv=(n,e)=>{const t=n!=null;return[r=>e[0]({lengthComputable:t,total:n,loaded:r}),e[1]]},zv=n=>(...e)=>Q.asap(()=>n(...e)),_A=$t.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,$t.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL($t.origin),$t.navigator&&/(msie|trident)/i.test($t.navigator.userAgent)):()=>!0,wA=$t.hasStandardBrowserEnv?{write(n,e,t,r,o,a){const u=[n+"="+encodeURIComponent(e)];Q.isNumber(t)&&u.push("expires="+new Date(t).toGMTString()),Q.isString(r)&&u.push("path="+r),Q.isString(o)&&u.push("domain="+o),a===!0&&u.push("secure"),document.cookie=u.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function EA(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function TA(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function dw(n,e,t){let r=!EA(e);return n&&(r||t==!1)?TA(n,e):e}const $v=n=>n instanceof ln?{...n}:n;function Es(n,e){e=e||{};const t={};function r(m,v,w,E){return Q.isPlainObject(m)&&Q.isPlainObject(v)?Q.merge.call({caseless:E},m,v):Q.isPlainObject(v)?Q.merge({},v):Q.isArray(v)?v.slice():v}function o(m,v,w,E){if(Q.isUndefined(v)){if(!Q.isUndefined(m))return r(void 0,m,w,E)}else return r(m,v,w,E)}function a(m,v){if(!Q.isUndefined(v))return r(void 0,v)}function u(m,v){if(Q.isUndefined(v)){if(!Q.isUndefined(m))return r(void 0,m)}else return r(void 0,v)}function d(m,v,w){if(w in e)return r(m,v);if(w in n)return r(void 0,m)}const f={url:a,method:a,data:a,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,withXSRFToken:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,beforeRedirect:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:d,headers:(m,v,w)=>o($v(m),$v(v),w,!0)};return Q.forEach(Object.keys(Object.assign({},n,e)),function(v){const w=f[v]||o,E=w(n[v],e[v],v);Q.isUndefined(E)&&w!==d||(t[v]=E)}),t}const fw=n=>{const e=Es({},n);let{data:t,withXSRFToken:r,xsrfHeaderName:o,xsrfCookieName:a,headers:u,auth:d}=e;e.headers=u=ln.from(u),e.url=aw(dw(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),d&&u.set("Authorization","Basic "+btoa((d.username||"")+":"+(d.password?unescape(encodeURIComponent(d.password)):"")));let f;if(Q.isFormData(t)){if($t.hasStandardBrowserEnv||$t.hasStandardBrowserWebWorkerEnv)u.setContentType(void 0);else if((f=u.getContentType())!==!1){const[m,...v]=f?f.split(";").map(w=>w.trim()).filter(Boolean):[];u.setContentType([m||"multipart/form-data",...v].join("; "))}}if($t.hasStandardBrowserEnv&&(r&&Q.isFunction(r)&&(r=r(e)),r||r!==!1&&_A(e.url))){const m=o&&a&&wA.read(a);m&&u.set(o,m)}return e},IA=typeof XMLHttpRequest<"u",SA=IA&&function(n){return new Promise(function(t,r){const o=fw(n);let a=o.data;const u=ln.from(o.headers).normalize();let{responseType:d,onUploadProgress:f,onDownloadProgress:m}=o,v,w,E,P,C;function L(){P&&P(),C&&C(),o.cancelToken&&o.cancelToken.unsubscribe(v),o.signal&&o.signal.removeEventListener("abort",v)}let D=new XMLHttpRequest;D.open(o.method.toUpperCase(),o.url,!0),D.timeout=o.timeout;function U(){if(!D)return;const B=ln.from("getAllResponseHeaders"in D&&D.getAllResponseHeaders()),ie={data:!d||d==="text"||d==="json"?D.responseText:D.response,status:D.status,statusText:D.statusText,headers:B,config:n,request:D};hw(function(k){t(k),L()},function(k){r(k),L()},ie),D=null}"onloadend"in D?D.onloadend=U:D.onreadystatechange=function(){!D||D.readyState!==4||D.status===0&&!(D.responseURL&&D.responseURL.indexOf("file:")===0)||setTimeout(U)},D.onabort=function(){D&&(r(new Pe("Request aborted",Pe.ECONNABORTED,n,D)),D=null)},D.onerror=function(){r(new Pe("Network Error",Pe.ERR_NETWORK,n,D)),D=null},D.ontimeout=function(){let J=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const ie=o.transitional||lw;o.timeoutErrorMessage&&(J=o.timeoutErrorMessage),r(new Pe(J,ie.clarifyTimeoutError?Pe.ETIMEDOUT:Pe.ECONNABORTED,n,D)),D=null},a===void 0&&u.setContentType(null),"setRequestHeader"in D&&Q.forEach(u.toJSON(),function(J,ie){D.setRequestHeader(ie,J)}),Q.isUndefined(o.withCredentials)||(D.withCredentials=!!o.withCredentials),d&&d!=="json"&&(D.responseType=o.responseType),m&&([E,C]=Oc(m,!0),D.addEventListener("progress",E)),f&&D.upload&&([w,P]=Oc(f),D.upload.addEventListener("progress",w),D.upload.addEventListener("loadend",P)),(o.cancelToken||o.signal)&&(v=B=>{D&&(r(!B||B.type?new Yo(null,n,D):B),D.abort(),D=null)},o.cancelToken&&o.cancelToken.subscribe(v),o.signal&&(o.signal.aborted?v():o.signal.addEventListener("abort",v)));const W=gA(o.url);if(W&&$t.protocols.indexOf(W)===-1){r(new Pe("Unsupported protocol "+W+":",Pe.ERR_BAD_REQUEST,n));return}D.send(a||null)})},RA=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let r=new AbortController,o;const a=function(m){if(!o){o=!0,d();const v=m instanceof Error?m:this.reason;r.abort(v instanceof Pe?v:new Yo(v instanceof Error?v.message:v))}};let u=e&&setTimeout(()=>{u=null,a(new Pe(`timeout ${e} of ms exceeded`,Pe.ETIMEDOUT))},e);const d=()=>{n&&(u&&clearTimeout(u),u=null,n.forEach(m=>{m.unsubscribe?m.unsubscribe(a):m.removeEventListener("abort",a)}),n=null)};n.forEach(m=>m.addEventListener("abort",a));const{signal:f}=r;return f.unsubscribe=()=>Q.asap(d),f}},AA=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let r=0,o;for(;r<t;)o=r+e,yield n.slice(r,o),r=o},CA=async function*(n,e){for await(const t of PA(n))yield*AA(t,e)},PA=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:r}=await e.read();if(t)break;yield r}}finally{await e.cancel()}},qv=(n,e,t,r)=>{const o=CA(n,e);let a=0,u,d=f=>{u||(u=!0,r&&r(f))};return new ReadableStream({async pull(f){try{const{done:m,value:v}=await o.next();if(m){d(),f.close();return}let w=v.byteLength;if(t){let E=a+=w;t(E)}f.enqueue(new Uint8Array(v))}catch(m){throw d(m),m}},cancel(f){return d(f),o.return()}},{highWaterMark:2})},uh=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",pw=uh&&typeof ReadableStream=="function",xA=uh&&(typeof TextEncoder=="function"?(n=>e=>n.encode(e))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),mw=(n,...e)=>{try{return!!n(...e)}catch{return!1}},kA=pw&&mw(()=>{let n=!1;const e=new Request($t.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!e}),Hv=64*1024,ip=pw&&mw(()=>Q.isReadableStream(new Response("").body)),Lc={stream:ip&&(n=>n.body)};uh&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Lc[e]&&(Lc[e]=Q.isFunction(n[e])?t=>t[e]():(t,r)=>{throw new Pe(`Response type '${e}' is not supported`,Pe.ERR_NOT_SUPPORT,r)})})})(new Response);const NA=async n=>{if(n==null)return 0;if(Q.isBlob(n))return n.size;if(Q.isSpecCompliantForm(n))return(await new Request($t.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if(Q.isArrayBufferView(n)||Q.isArrayBuffer(n))return n.byteLength;if(Q.isURLSearchParams(n)&&(n=n+""),Q.isString(n))return(await xA(n)).byteLength},bA=async(n,e)=>{const t=Q.toFiniteNumber(n.getContentLength());return t??NA(e)},DA=uh&&(async n=>{let{url:e,method:t,data:r,signal:o,cancelToken:a,timeout:u,onDownloadProgress:d,onUploadProgress:f,responseType:m,headers:v,withCredentials:w="same-origin",fetchOptions:E}=fw(n);m=m?(m+"").toLowerCase():"text";let P=RA([o,a&&a.toAbortSignal()],u),C;const L=P&&P.unsubscribe&&(()=>{P.unsubscribe()});let D;try{if(f&&kA&&t!=="get"&&t!=="head"&&(D=await bA(v,r))!==0){let ie=new Request(e,{method:"POST",body:r,duplex:"half"}),Y;if(Q.isFormData(r)&&(Y=ie.headers.get("content-type"))&&v.setContentType(Y),ie.body){const[k,I]=Bv(D,Oc(zv(f)));r=qv(ie.body,Hv,k,I)}}Q.isString(w)||(w=w?"include":"omit");const U="credentials"in Request.prototype;C=new Request(e,{...E,signal:P,method:t.toUpperCase(),headers:v.normalize().toJSON(),body:r,duplex:"half",credentials:U?w:void 0});let W=await fetch(C);const B=ip&&(m==="stream"||m==="response");if(ip&&(d||B&&L)){const ie={};["status","statusText","headers"].forEach(S=>{ie[S]=W[S]});const Y=Q.toFiniteNumber(W.headers.get("content-length")),[k,I]=d&&Bv(Y,Oc(zv(d),!0))||[];W=new Response(qv(W.body,Hv,k,()=>{I&&I(),L&&L()}),ie)}m=m||"text";let J=await Lc[Q.findKey(Lc,m)||"text"](W,n);return!B&&L&&L(),await new Promise((ie,Y)=>{hw(ie,Y,{data:J,headers:ln.from(W.headers),status:W.status,statusText:W.statusText,config:n,request:C})})}catch(U){throw L&&L(),U&&U.name==="TypeError"&&/Load failed|fetch/i.test(U.message)?Object.assign(new Pe("Network Error",Pe.ERR_NETWORK,n,C),{cause:U.cause||U}):Pe.from(U,U&&U.code,n,C)}}),sp={http:GR,xhr:SA,fetch:DA};Q.forEach(sp,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const Wv=n=>`- ${n}`,OA=n=>Q.isFunction(n)||n===null||n===!1,gw={getAdapter:n=>{n=Q.isArray(n)?n:[n];const{length:e}=n;let t,r;const o={};for(let a=0;a<e;a++){t=n[a];let u;if(r=t,!OA(t)&&(r=sp[(u=String(t)).toLowerCase()],r===void 0))throw new Pe(`Unknown adapter '${u}'`);if(r)break;o[u||"#"+a]=r}if(!r){const a=Object.entries(o).map(([d,f])=>`adapter ${d} `+(f===!1?"is not supported by the environment":"is not available in the build"));let u=e?a.length>1?`since :
`+a.map(Wv).join(`
`):" "+Wv(a[0]):"as no adapter specified";throw new Pe("There is no suitable adapter to dispatch the request "+u,"ERR_NOT_SUPPORT")}return r},adapters:sp};function Uf(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new Yo(null,n)}function Kv(n){return Uf(n),n.headers=ln.from(n.headers),n.data=Ff.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),gw.getAdapter(n.adapter||Ol.adapter)(n).then(function(r){return Uf(n),r.data=Ff.call(n,n.transformResponse,r),r.headers=ln.from(r.headers),r},function(r){return cw(r)||(Uf(n),r&&r.response&&(r.response.data=Ff.call(n,n.transformResponse,r.response),r.response.headers=ln.from(r.response.headers))),Promise.reject(r)})}const yw="1.9.0",ch={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{ch[n]=function(r){return typeof r===n||"a"+(e<1?"n ":" ")+n}});const Gv={};ch.transitional=function(e,t,r){function o(a,u){return"[Axios v"+yw+"] Transitional option '"+a+"'"+u+(r?". "+r:"")}return(a,u,d)=>{if(e===!1)throw new Pe(o(u," has been removed"+(t?" in "+t:"")),Pe.ERR_DEPRECATED);return t&&!Gv[u]&&(Gv[u]=!0,console.warn(o(u," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(a,u,d):!0}};ch.spelling=function(e){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function LA(n,e,t){if(typeof n!="object")throw new Pe("options must be an object",Pe.ERR_BAD_OPTION_VALUE);const r=Object.keys(n);let o=r.length;for(;o-- >0;){const a=r[o],u=e[a];if(u){const d=n[a],f=d===void 0||u(d,a,n);if(f!==!0)throw new Pe("option "+a+" must be "+f,Pe.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Pe("Unknown option "+a,Pe.ERR_BAD_OPTION)}}const Ec={assertOptions:LA,validators:ch},cr=Ec.validators;let ws=class{constructor(e){this.defaults=e||{},this.interceptors={request:new Uv,response:new Uv}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const a=o.stack?o.stack.replace(/^.+\n/,""):"";try{r.stack?a&&!String(r.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+a):r.stack=a}catch{}}throw r}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Es(this.defaults,t);const{transitional:r,paramsSerializer:o,headers:a}=t;r!==void 0&&Ec.assertOptions(r,{silentJSONParsing:cr.transitional(cr.boolean),forcedJSONParsing:cr.transitional(cr.boolean),clarifyTimeoutError:cr.transitional(cr.boolean)},!1),o!=null&&(Q.isFunction(o)?t.paramsSerializer={serialize:o}:Ec.assertOptions(o,{encode:cr.function,serialize:cr.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Ec.assertOptions(t,{baseUrl:cr.spelling("baseURL"),withXsrfToken:cr.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let u=a&&Q.merge(a.common,a[t.method]);a&&Q.forEach(["delete","get","head","post","put","patch","common"],C=>{delete a[C]}),t.headers=ln.concat(u,a);const d=[];let f=!0;this.interceptors.request.forEach(function(L){typeof L.runWhen=="function"&&L.runWhen(t)===!1||(f=f&&L.synchronous,d.unshift(L.fulfilled,L.rejected))});const m=[];this.interceptors.response.forEach(function(L){m.push(L.fulfilled,L.rejected)});let v,w=0,E;if(!f){const C=[Kv.bind(this),void 0];for(C.unshift.apply(C,d),C.push.apply(C,m),E=C.length,v=Promise.resolve(t);w<E;)v=v.then(C[w++],C[w++]);return v}E=d.length;let P=t;for(w=0;w<E;){const C=d[w++],L=d[w++];try{P=C(P)}catch(D){L.call(this,D);break}}try{v=Kv.call(this,P)}catch(C){return Promise.reject(C)}for(w=0,E=m.length;w<E;)v=v.then(m[w++],m[w++]);return v}getUri(e){e=Es(this.defaults,e);const t=dw(e.baseURL,e.url,e.allowAbsoluteUrls);return aw(t,e.params,e.paramsSerializer)}};Q.forEach(["delete","get","head","options"],function(e){ws.prototype[e]=function(t,r){return this.request(Es(r||{},{method:e,url:t,data:(r||{}).data}))}});Q.forEach(["post","put","patch"],function(e){function t(r){return function(a,u,d){return this.request(Es(d||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:a,data:u}))}}ws.prototype[e]=t(),ws.prototype[e+"Form"]=t(!0)});let VA=class vw{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(a){t=a});const r=this;this.promise.then(o=>{if(!r._listeners)return;let a=r._listeners.length;for(;a-- >0;)r._listeners[a](o);r._listeners=null}),this.promise.then=o=>{let a;const u=new Promise(d=>{r.subscribe(d),a=d}).then(o);return u.cancel=function(){r.unsubscribe(a)},u},e(function(a,u,d){r.reason||(r.reason=new Yo(a,u,d),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=r=>{e.abort(r)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new vw(function(o){e=o}),cancel:e}}};function MA(n){return function(t){return n.apply(null,t)}}function FA(n){return Q.isObject(n)&&n.isAxiosError===!0}const op={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(op).forEach(([n,e])=>{op[e]=n});function _w(n){const e=new ws(n),t=Q0(ws.prototype.request,e);return Q.extend(t,ws.prototype,e,{allOwnKeys:!0}),Q.extend(t,e,null,{allOwnKeys:!0}),t.create=function(o){return _w(Es(n,o))},t}const lt=_w(Ol);lt.Axios=ws;lt.CanceledError=Yo;lt.CancelToken=VA;lt.isCancel=cw;lt.VERSION=yw;lt.toFormData=lh;lt.AxiosError=Pe;lt.Cancel=lt.CanceledError;lt.all=function(e){return Promise.all(e)};lt.spread=MA;lt.isAxiosError=FA;lt.mergeConfig=Es;lt.AxiosHeaders=ln;lt.formToJSON=n=>uw(Q.isHTMLForm(n)?new FormData(n):n);lt.getAdapter=gw.getAdapter;lt.HttpStatusCode=op;lt.default=lt;const{Axios:mD,AxiosError:gD,CanceledError:yD,isCancel:vD,CancelToken:_D,VERSION:wD,all:ED,Cancel:TD,isAxiosError:ID,spread:SD,toFormData:RD,AxiosHeaders:AD,HttpStatusCode:CD,formToJSON:PD,getAdapter:xD,mergeConfig:kD}=lt;/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA=()=>{};var Qv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ww=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let o=n.charCodeAt(r);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},jA=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const o=n[t++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const a=n[t++];e[r++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){const a=n[t++],u=n[t++],d=n[t++],f=((o&7)<<18|(a&63)<<12|(u&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const a=n[t++],u=n[t++];e[r++]=String.fromCharCode((o&15)<<12|(a&63)<<6|u&63)}}return e.join("")},Ew={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<n.length;o+=3){const a=n[o],u=o+1<n.length,d=u?n[o+1]:0,f=o+2<n.length,m=f?n[o+2]:0,v=a>>2,w=(a&3)<<4|d>>4;let E=(d&15)<<2|m>>6,P=m&63;f||(P=64,u||(E=64)),r.push(t[v],t[w],t[E],t[P])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(ww(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):jA(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<n.length;){const a=t[n.charAt(o++)],d=o<n.length?t[n.charAt(o)]:0;++o;const m=o<n.length?t[n.charAt(o)]:64;++o;const w=o<n.length?t[n.charAt(o)]:64;if(++o,a==null||d==null||m==null||w==null)throw new BA;const E=a<<2|d>>4;if(r.push(E),m!==64){const P=d<<4&240|m>>2;if(r.push(P),w!==64){const C=m<<6&192|w;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class BA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const zA=function(n){const e=ww(n);return Ew.encodeByteArray(e,!0)},Vc=function(n){return zA(n).replace(/\./g,"")},Tw=function(n){try{return Ew.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $A(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA=()=>$A().__FIREBASE_DEFAULTS__,HA=()=>{if(typeof process>"u"||typeof Qv>"u")return;const n=Qv.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},WA=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Tw(n[1]);return e&&JSON.parse(e)},hh=()=>{try{return UA()||qA()||HA()||WA()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Iw=n=>{var e,t;return(t=(e=hh())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},KA=n=>{const e=Iw(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Sw=()=>{var n;return(n=hh())===null||n===void 0?void 0:n.config},Rw=n=>{var e;return(e=hh())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ll(n){return n.endsWith(".cloudworkstations.dev")}async function Aw(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QA(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",o=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Vc(JSON.stringify(t)),Vc(JSON.stringify(u)),""].join(".")}const hl={};function JA(){const n={prod:[],emulator:[]};for(const e of Object.keys(hl))hl[e]?n.emulator.push(e):n.prod.push(e);return n}function YA(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Jv=!1;function Cw(n,e){if(typeof window>"u"||typeof document>"u"||!Ll(window.location.host)||hl[n]===e||hl[n]||Jv)return;hl[n]=e;function t(E){return`__firebase__banner__${E}`}const r="__firebase__banner",a=JA().prod.length>0;function u(){const E=document.getElementById(r);E&&E.remove()}function d(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function f(E,P){E.setAttribute("width","24"),E.setAttribute("id",P),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function m(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{Jv=!0,u()},E}function v(E,P){E.setAttribute("id",P),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function w(){const E=YA(r),P=t("text"),C=document.getElementById(P)||document.createElement("span"),L=t("learnmore"),D=document.getElementById(L)||document.createElement("a"),U=t("preprendIcon"),W=document.getElementById(U)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const B=E.element;d(B),v(D,L);const J=m();f(W,U),B.append(W,C,D,J),document.body.appendChild(B)}a?(C.innerText="Preview backend disconnected.",W.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(W.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",P)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function XA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qt())}function ZA(){var n;const e=(n=hh())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function eC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function tC(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function nC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function rC(){const n=qt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function iC(){return!ZA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function sC(){try{return typeof indexedDB=="object"}catch{return!1}}function oC(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var a;e(((a=o.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aC="FirebaseError";class Kr extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=aC,Object.setPrototypeOf(this,Kr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Vl.prototype.create)}}class Vl{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},o=`${this.service}/${e}`,a=this.errors[e],u=a?lC(a,r):"Error",d=`${this.serviceName}: ${u} (${o}).`;return new Kr(o,d,r)}}function lC(n,e){return n.replace(uC,(t,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const uC=/\{\$([^}]+)}/g;function cC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ts(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const o of t){if(!r.includes(o))return!1;const a=n[o],u=e[o];if(Yv(a)&&Yv(u)){if(!Ts(a,u))return!1}else if(a!==u)return!1}for(const o of r)if(!t.includes(o))return!1;return!0}function Yv(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ml(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function sl(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[o,a]=r.split("=");e[decodeURIComponent(o)]=decodeURIComponent(a)}}),e}function ol(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function hC(n,e){const t=new dC(n,e);return t.subscribe.bind(t)}class dC{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let o;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");fC(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:r},o.next===void 0&&(o.next=jf),o.error===void 0&&(o.error=jf),o.complete===void 0&&(o.complete=jf);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function fC(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function jf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function It(n){return n&&n._delegate?n._delegate:n}class Is{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new GA;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(o)return null;throw a}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(gC(e))try{this.getOrInitializeService({instanceIdentifier:ys})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:o});r.resolve(a)}catch{}}}}clearInstance(e=ys){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ys){return this.instances.has(e)}getOptions(e=ys){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);r===d&&u.resolve(o)}return o}onInit(e,t){var r;const o=this.normalizeInstanceIdentifier(t),a=(r=this.onInitCallbacks.get(o))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(o,a);const u=this.instances.get(o);return u&&e(u,o),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const o of r)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:mC(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ys){return this.component?this.component.multipleInstances?e:ys:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function mC(n){return n===ys?void 0:n}function gC(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new pC(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Le||(Le={}));const vC={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},_C=Le.INFO,wC={[Le.DEBUG]:"log",[Le.VERBOSE]:"log",[Le.INFO]:"info",[Le.WARN]:"warn",[Le.ERROR]:"error"},EC=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),o=wC[e];if(o)console[o](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Wp{constructor(e){this.name=e,this._logLevel=_C,this._logHandler=EC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?vC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Le.DEBUG,...e),this._logHandler(this,Le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Le.VERBOSE,...e),this._logHandler(this,Le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Le.INFO,...e),this._logHandler(this,Le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Le.WARN,...e),this._logHandler(this,Le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Le.ERROR,...e),this._logHandler(this,Le.ERROR,...e)}}const TC=(n,e)=>e.some(t=>n instanceof t);let Xv,Zv;function IC(){return Xv||(Xv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function SC(){return Zv||(Zv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Pw=new WeakMap,ap=new WeakMap,xw=new WeakMap,Bf=new WeakMap,Kp=new WeakMap;function RC(n){const e=new Promise((t,r)=>{const o=()=>{n.removeEventListener("success",a),n.removeEventListener("error",u)},a=()=>{t(Pi(n.result)),o()},u=()=>{r(n.error),o()};n.addEventListener("success",a),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&Pw.set(t,n)}).catch(()=>{}),Kp.set(e,n),e}function AC(n){if(ap.has(n))return;const e=new Promise((t,r)=>{const o=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",u),n.removeEventListener("abort",u)},a=()=>{t(),o()},u=()=>{r(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",a),n.addEventListener("error",u),n.addEventListener("abort",u)});ap.set(n,e)}let lp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return ap.get(n);if(e==="objectStoreNames")return n.objectStoreNames||xw.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Pi(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function CC(n){lp=n(lp)}function PC(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(zf(this),e,...t);return xw.set(r,e.sort?e.sort():[e]),Pi(r)}:SC().includes(n)?function(...e){return n.apply(zf(this),e),Pi(Pw.get(this))}:function(...e){return Pi(n.apply(zf(this),e))}}function xC(n){return typeof n=="function"?PC(n):(n instanceof IDBTransaction&&AC(n),TC(n,IC())?new Proxy(n,lp):n)}function Pi(n){if(n instanceof IDBRequest)return RC(n);if(Bf.has(n))return Bf.get(n);const e=xC(n);return e!==n&&(Bf.set(n,e),Kp.set(e,n)),e}const zf=n=>Kp.get(n);function kC(n,e,{blocked:t,upgrade:r,blocking:o,terminated:a}={}){const u=indexedDB.open(n,e),d=Pi(u);return r&&u.addEventListener("upgradeneeded",f=>{r(Pi(u.result),f.oldVersion,f.newVersion,Pi(u.transaction),f)}),t&&u.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),d.then(f=>{a&&f.addEventListener("close",()=>a()),o&&f.addEventListener("versionchange",m=>o(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const NC=["get","getKey","getAll","getAllKeys","count"],bC=["put","add","delete","clear"],$f=new Map;function e_(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if($f.get(e))return $f.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,o=bC.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(o||NC.includes(t)))return;const a=async function(u,...d){const f=this.transaction(u,o?"readwrite":"readonly");let m=f.store;return r&&(m=m.index(d.shift())),(await Promise.all([m[t](...d),o&&f.done]))[0]};return $f.set(e,a),a}CC(n=>({...n,get:(e,t,r)=>e_(e,t)||n.get(e,t,r),has:(e,t)=>!!e_(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(OC(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function OC(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const up="@firebase/app",t_="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zr=new Wp("@firebase/app"),LC="@firebase/app-compat",VC="@firebase/analytics-compat",MC="@firebase/analytics",FC="@firebase/app-check-compat",UC="@firebase/app-check",jC="@firebase/auth",BC="@firebase/auth-compat",zC="@firebase/database",$C="@firebase/data-connect",qC="@firebase/database-compat",HC="@firebase/functions",WC="@firebase/functions-compat",KC="@firebase/installations",GC="@firebase/installations-compat",QC="@firebase/messaging",JC="@firebase/messaging-compat",YC="@firebase/performance",XC="@firebase/performance-compat",ZC="@firebase/remote-config",eP="@firebase/remote-config-compat",tP="@firebase/storage",nP="@firebase/storage-compat",rP="@firebase/firestore",iP="@firebase/ai",sP="@firebase/firestore-compat",oP="firebase",aP="11.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cp="[DEFAULT]",lP={[up]:"fire-core",[LC]:"fire-core-compat",[MC]:"fire-analytics",[VC]:"fire-analytics-compat",[UC]:"fire-app-check",[FC]:"fire-app-check-compat",[jC]:"fire-auth",[BC]:"fire-auth-compat",[zC]:"fire-rtdb",[$C]:"fire-data-connect",[qC]:"fire-rtdb-compat",[HC]:"fire-fn",[WC]:"fire-fn-compat",[KC]:"fire-iid",[GC]:"fire-iid-compat",[QC]:"fire-fcm",[JC]:"fire-fcm-compat",[YC]:"fire-perf",[XC]:"fire-perf-compat",[ZC]:"fire-rc",[eP]:"fire-rc-compat",[tP]:"fire-gcs",[nP]:"fire-gcs-compat",[rP]:"fire-fst",[sP]:"fire-fst-compat",[iP]:"fire-vertex","fire-js":"fire-js",[oP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mc=new Map,uP=new Map,hp=new Map;function n_(n,e){try{n.container.addComponent(e)}catch(t){zr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Fo(n){const e=n.name;if(hp.has(e))return zr.debug(`There were multiple attempts to register component ${e}.`),!1;hp.set(e,n);for(const t of Mc.values())n_(t,n);for(const t of uP.values())n_(t,n);return!0}function Gp(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Pn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},xi=new Vl("app","Firebase",cP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Is("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw xi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xo=aP;function kw(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:cp,automaticDataCollectionEnabled:!0},e),o=r.name;if(typeof o!="string"||!o)throw xi.create("bad-app-name",{appName:String(o)});if(t||(t=Sw()),!t)throw xi.create("no-options");const a=Mc.get(o);if(a){if(Ts(t,a.options)&&Ts(r,a.config))return a;throw xi.create("duplicate-app",{appName:o})}const u=new yC(o);for(const f of hp.values())u.addComponent(f);const d=new hP(t,r,u);return Mc.set(o,d),d}function Nw(n=cp){const e=Mc.get(n);if(!e&&n===cp&&Sw())return kw();if(!e)throw xi.create("no-app",{appName:n});return e}function ki(n,e,t){var r;let o=(r=lP[n])!==null&&r!==void 0?r:n;t&&(o+=`-${t}`);const a=o.match(/\s|\//),u=e.match(/\s|\//);if(a||u){const d=[`Unable to register library "${o}" with version "${e}":`];a&&d.push(`library name "${o}" contains illegal characters (whitespace or "/")`),a&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),zr.warn(d.join(" "));return}Fo(new Is(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dP="firebase-heartbeat-database",fP=1,El="firebase-heartbeat-store";let qf=null;function bw(){return qf||(qf=kC(dP,fP,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(El)}catch(t){console.warn(t)}}}}).catch(n=>{throw xi.create("idb-open",{originalErrorMessage:n.message})})),qf}async function pP(n){try{const t=(await bw()).transaction(El),r=await t.objectStore(El).get(Dw(n));return await t.done,r}catch(e){if(e instanceof Kr)zr.warn(e.message);else{const t=xi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});zr.warn(t.message)}}}async function r_(n,e){try{const r=(await bw()).transaction(El,"readwrite");await r.objectStore(El).put(e,Dw(n)),await r.done}catch(t){if(t instanceof Kr)zr.warn(t.message);else{const r=xi.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});zr.warn(r.message)}}}function Dw(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mP=1024,gP=30;class yP{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new _P(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=i_();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:o}),this._heartbeatsCache.heartbeats.length>gP){const u=wP(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){zr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=i_(),{heartbeatsToSend:r,unsentEntries:o}=vP(this._heartbeatsCache.heartbeats),a=Vc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return zr.warn(t),""}}}function i_(){return new Date().toISOString().substring(0,10)}function vP(n,e=mP){const t=[];let r=n.slice();for(const o of n){const a=t.find(u=>u.agent===o.agent);if(a){if(a.dates.push(o.date),s_(t)>e){a.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),s_(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class _P{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return sC()?oC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await pP(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return r_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return r_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function s_(n){return Vc(JSON.stringify({version:2,heartbeats:n})).length}function wP(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EP(n){Fo(new Is("platform-logger",e=>new DC(e),"PRIVATE")),Fo(new Is("heartbeat",e=>new yP(e),"PRIVATE")),ki(up,t_,n),ki(up,t_,"esm2017"),ki("fire-js","")}EP("");var o_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ni,Ow;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,I){function S(){}S.prototype=I.prototype,k.D=I.prototype,k.prototype=new S,k.prototype.constructor=k,k.C=function(x,N,V){for(var A=Array(arguments.length-2),ce=2;ce<arguments.length;ce++)A[ce-2]=arguments[ce];return I.prototype[N].apply(x,A)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(k,I,S){S||(S=0);var x=Array(16);if(typeof I=="string")for(var N=0;16>N;++N)x[N]=I.charCodeAt(S++)|I.charCodeAt(S++)<<8|I.charCodeAt(S++)<<16|I.charCodeAt(S++)<<24;else for(N=0;16>N;++N)x[N]=I[S++]|I[S++]<<8|I[S++]<<16|I[S++]<<24;I=k.g[0],S=k.g[1],N=k.g[2];var V=k.g[3],A=I+(V^S&(N^V))+x[0]+3614090360&4294967295;I=S+(A<<7&4294967295|A>>>25),A=V+(N^I&(S^N))+x[1]+3905402710&4294967295,V=I+(A<<12&4294967295|A>>>20),A=N+(S^V&(I^S))+x[2]+606105819&4294967295,N=V+(A<<17&4294967295|A>>>15),A=S+(I^N&(V^I))+x[3]+3250441966&4294967295,S=N+(A<<22&4294967295|A>>>10),A=I+(V^S&(N^V))+x[4]+4118548399&4294967295,I=S+(A<<7&4294967295|A>>>25),A=V+(N^I&(S^N))+x[5]+1200080426&4294967295,V=I+(A<<12&4294967295|A>>>20),A=N+(S^V&(I^S))+x[6]+2821735955&4294967295,N=V+(A<<17&4294967295|A>>>15),A=S+(I^N&(V^I))+x[7]+4249261313&4294967295,S=N+(A<<22&4294967295|A>>>10),A=I+(V^S&(N^V))+x[8]+1770035416&4294967295,I=S+(A<<7&4294967295|A>>>25),A=V+(N^I&(S^N))+x[9]+2336552879&4294967295,V=I+(A<<12&4294967295|A>>>20),A=N+(S^V&(I^S))+x[10]+4294925233&4294967295,N=V+(A<<17&4294967295|A>>>15),A=S+(I^N&(V^I))+x[11]+2304563134&4294967295,S=N+(A<<22&4294967295|A>>>10),A=I+(V^S&(N^V))+x[12]+1804603682&4294967295,I=S+(A<<7&4294967295|A>>>25),A=V+(N^I&(S^N))+x[13]+4254626195&4294967295,V=I+(A<<12&4294967295|A>>>20),A=N+(S^V&(I^S))+x[14]+2792965006&4294967295,N=V+(A<<17&4294967295|A>>>15),A=S+(I^N&(V^I))+x[15]+1236535329&4294967295,S=N+(A<<22&4294967295|A>>>10),A=I+(N^V&(S^N))+x[1]+4129170786&4294967295,I=S+(A<<5&4294967295|A>>>27),A=V+(S^N&(I^S))+x[6]+3225465664&4294967295,V=I+(A<<9&4294967295|A>>>23),A=N+(I^S&(V^I))+x[11]+643717713&4294967295,N=V+(A<<14&4294967295|A>>>18),A=S+(V^I&(N^V))+x[0]+3921069994&4294967295,S=N+(A<<20&4294967295|A>>>12),A=I+(N^V&(S^N))+x[5]+3593408605&4294967295,I=S+(A<<5&4294967295|A>>>27),A=V+(S^N&(I^S))+x[10]+38016083&4294967295,V=I+(A<<9&4294967295|A>>>23),A=N+(I^S&(V^I))+x[15]+3634488961&4294967295,N=V+(A<<14&4294967295|A>>>18),A=S+(V^I&(N^V))+x[4]+3889429448&4294967295,S=N+(A<<20&4294967295|A>>>12),A=I+(N^V&(S^N))+x[9]+568446438&4294967295,I=S+(A<<5&4294967295|A>>>27),A=V+(S^N&(I^S))+x[14]+3275163606&4294967295,V=I+(A<<9&4294967295|A>>>23),A=N+(I^S&(V^I))+x[3]+4107603335&4294967295,N=V+(A<<14&4294967295|A>>>18),A=S+(V^I&(N^V))+x[8]+1163531501&4294967295,S=N+(A<<20&4294967295|A>>>12),A=I+(N^V&(S^N))+x[13]+2850285829&4294967295,I=S+(A<<5&4294967295|A>>>27),A=V+(S^N&(I^S))+x[2]+4243563512&4294967295,V=I+(A<<9&4294967295|A>>>23),A=N+(I^S&(V^I))+x[7]+1735328473&4294967295,N=V+(A<<14&4294967295|A>>>18),A=S+(V^I&(N^V))+x[12]+2368359562&4294967295,S=N+(A<<20&4294967295|A>>>12),A=I+(S^N^V)+x[5]+4294588738&4294967295,I=S+(A<<4&4294967295|A>>>28),A=V+(I^S^N)+x[8]+2272392833&4294967295,V=I+(A<<11&4294967295|A>>>21),A=N+(V^I^S)+x[11]+1839030562&4294967295,N=V+(A<<16&4294967295|A>>>16),A=S+(N^V^I)+x[14]+4259657740&4294967295,S=N+(A<<23&4294967295|A>>>9),A=I+(S^N^V)+x[1]+2763975236&4294967295,I=S+(A<<4&4294967295|A>>>28),A=V+(I^S^N)+x[4]+1272893353&4294967295,V=I+(A<<11&4294967295|A>>>21),A=N+(V^I^S)+x[7]+4139469664&4294967295,N=V+(A<<16&4294967295|A>>>16),A=S+(N^V^I)+x[10]+3200236656&4294967295,S=N+(A<<23&4294967295|A>>>9),A=I+(S^N^V)+x[13]+681279174&4294967295,I=S+(A<<4&4294967295|A>>>28),A=V+(I^S^N)+x[0]+3936430074&4294967295,V=I+(A<<11&4294967295|A>>>21),A=N+(V^I^S)+x[3]+3572445317&4294967295,N=V+(A<<16&4294967295|A>>>16),A=S+(N^V^I)+x[6]+76029189&4294967295,S=N+(A<<23&4294967295|A>>>9),A=I+(S^N^V)+x[9]+3654602809&4294967295,I=S+(A<<4&4294967295|A>>>28),A=V+(I^S^N)+x[12]+3873151461&4294967295,V=I+(A<<11&4294967295|A>>>21),A=N+(V^I^S)+x[15]+530742520&4294967295,N=V+(A<<16&4294967295|A>>>16),A=S+(N^V^I)+x[2]+3299628645&4294967295,S=N+(A<<23&4294967295|A>>>9),A=I+(N^(S|~V))+x[0]+4096336452&4294967295,I=S+(A<<6&4294967295|A>>>26),A=V+(S^(I|~N))+x[7]+1126891415&4294967295,V=I+(A<<10&4294967295|A>>>22),A=N+(I^(V|~S))+x[14]+2878612391&4294967295,N=V+(A<<15&4294967295|A>>>17),A=S+(V^(N|~I))+x[5]+4237533241&4294967295,S=N+(A<<21&4294967295|A>>>11),A=I+(N^(S|~V))+x[12]+1700485571&4294967295,I=S+(A<<6&4294967295|A>>>26),A=V+(S^(I|~N))+x[3]+2399980690&4294967295,V=I+(A<<10&4294967295|A>>>22),A=N+(I^(V|~S))+x[10]+4293915773&4294967295,N=V+(A<<15&4294967295|A>>>17),A=S+(V^(N|~I))+x[1]+2240044497&4294967295,S=N+(A<<21&4294967295|A>>>11),A=I+(N^(S|~V))+x[8]+1873313359&4294967295,I=S+(A<<6&4294967295|A>>>26),A=V+(S^(I|~N))+x[15]+4264355552&4294967295,V=I+(A<<10&4294967295|A>>>22),A=N+(I^(V|~S))+x[6]+2734768916&4294967295,N=V+(A<<15&4294967295|A>>>17),A=S+(V^(N|~I))+x[13]+1309151649&4294967295,S=N+(A<<21&4294967295|A>>>11),A=I+(N^(S|~V))+x[4]+4149444226&4294967295,I=S+(A<<6&4294967295|A>>>26),A=V+(S^(I|~N))+x[11]+3174756917&4294967295,V=I+(A<<10&4294967295|A>>>22),A=N+(I^(V|~S))+x[2]+718787259&4294967295,N=V+(A<<15&4294967295|A>>>17),A=S+(V^(N|~I))+x[9]+3951481745&4294967295,k.g[0]=k.g[0]+I&4294967295,k.g[1]=k.g[1]+(N+(A<<21&4294967295|A>>>11))&4294967295,k.g[2]=k.g[2]+N&4294967295,k.g[3]=k.g[3]+V&4294967295}r.prototype.u=function(k,I){I===void 0&&(I=k.length);for(var S=I-this.blockSize,x=this.B,N=this.h,V=0;V<I;){if(N==0)for(;V<=S;)o(this,k,V),V+=this.blockSize;if(typeof k=="string"){for(;V<I;)if(x[N++]=k.charCodeAt(V++),N==this.blockSize){o(this,x),N=0;break}}else for(;V<I;)if(x[N++]=k[V++],N==this.blockSize){o(this,x),N=0;break}}this.h=N,this.o+=I},r.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var I=1;I<k.length-8;++I)k[I]=0;var S=8*this.o;for(I=k.length-8;I<k.length;++I)k[I]=S&255,S/=256;for(this.u(k),k=Array(16),I=S=0;4>I;++I)for(var x=0;32>x;x+=8)k[S++]=this.g[I]>>>x&255;return k};function a(k,I){var S=d;return Object.prototype.hasOwnProperty.call(S,k)?S[k]:S[k]=I(k)}function u(k,I){this.h=I;for(var S=[],x=!0,N=k.length-1;0<=N;N--){var V=k[N]|0;x&&V==I||(S[N]=V,x=!1)}this.g=S}var d={};function f(k){return-128<=k&&128>k?a(k,function(I){return new u([I|0],0>I?-1:0)}):new u([k|0],0>k?-1:0)}function m(k){if(isNaN(k)||!isFinite(k))return w;if(0>k)return D(m(-k));for(var I=[],S=1,x=0;k>=S;x++)I[x]=k/S|0,S*=4294967296;return new u(I,0)}function v(k,I){if(k.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(k.charAt(0)=="-")return D(v(k.substring(1),I));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=m(Math.pow(I,8)),x=w,N=0;N<k.length;N+=8){var V=Math.min(8,k.length-N),A=parseInt(k.substring(N,N+V),I);8>V?(V=m(Math.pow(I,V)),x=x.j(V).add(m(A))):(x=x.j(S),x=x.add(m(A)))}return x}var w=f(0),E=f(1),P=f(16777216);n=u.prototype,n.m=function(){if(L(this))return-D(this).m();for(var k=0,I=1,S=0;S<this.g.length;S++){var x=this.i(S);k+=(0<=x?x:4294967296+x)*I,I*=4294967296}return k},n.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(C(this))return"0";if(L(this))return"-"+D(this).toString(k);for(var I=m(Math.pow(k,6)),S=this,x="";;){var N=J(S,I).g;S=U(S,N.j(I));var V=((0<S.g.length?S.g[0]:S.h)>>>0).toString(k);if(S=N,C(S))return V+x;for(;6>V.length;)V="0"+V;x=V+x}},n.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function C(k){if(k.h!=0)return!1;for(var I=0;I<k.g.length;I++)if(k.g[I]!=0)return!1;return!0}function L(k){return k.h==-1}n.l=function(k){return k=U(this,k),L(k)?-1:C(k)?0:1};function D(k){for(var I=k.g.length,S=[],x=0;x<I;x++)S[x]=~k.g[x];return new u(S,~k.h).add(E)}n.abs=function(){return L(this)?D(this):this},n.add=function(k){for(var I=Math.max(this.g.length,k.g.length),S=[],x=0,N=0;N<=I;N++){var V=x+(this.i(N)&65535)+(k.i(N)&65535),A=(V>>>16)+(this.i(N)>>>16)+(k.i(N)>>>16);x=A>>>16,V&=65535,A&=65535,S[N]=A<<16|V}return new u(S,S[S.length-1]&-2147483648?-1:0)};function U(k,I){return k.add(D(I))}n.j=function(k){if(C(this)||C(k))return w;if(L(this))return L(k)?D(this).j(D(k)):D(D(this).j(k));if(L(k))return D(this.j(D(k)));if(0>this.l(P)&&0>k.l(P))return m(this.m()*k.m());for(var I=this.g.length+k.g.length,S=[],x=0;x<2*I;x++)S[x]=0;for(x=0;x<this.g.length;x++)for(var N=0;N<k.g.length;N++){var V=this.i(x)>>>16,A=this.i(x)&65535,ce=k.i(N)>>>16,We=k.i(N)&65535;S[2*x+2*N]+=A*We,W(S,2*x+2*N),S[2*x+2*N+1]+=V*We,W(S,2*x+2*N+1),S[2*x+2*N+1]+=A*ce,W(S,2*x+2*N+1),S[2*x+2*N+2]+=V*ce,W(S,2*x+2*N+2)}for(x=0;x<I;x++)S[x]=S[2*x+1]<<16|S[2*x];for(x=I;x<2*I;x++)S[x]=0;return new u(S,0)};function W(k,I){for(;(k[I]&65535)!=k[I];)k[I+1]+=k[I]>>>16,k[I]&=65535,I++}function B(k,I){this.g=k,this.h=I}function J(k,I){if(C(I))throw Error("division by zero");if(C(k))return new B(w,w);if(L(k))return I=J(D(k),I),new B(D(I.g),D(I.h));if(L(I))return I=J(k,D(I)),new B(D(I.g),I.h);if(30<k.g.length){if(L(k)||L(I))throw Error("slowDivide_ only works with positive integers.");for(var S=E,x=I;0>=x.l(k);)S=ie(S),x=ie(x);var N=Y(S,1),V=Y(x,1);for(x=Y(x,2),S=Y(S,2);!C(x);){var A=V.add(x);0>=A.l(k)&&(N=N.add(S),V=A),x=Y(x,1),S=Y(S,1)}return I=U(k,N.j(I)),new B(N,I)}for(N=w;0<=k.l(I);){for(S=Math.max(1,Math.floor(k.m()/I.m())),x=Math.ceil(Math.log(S)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),V=m(S),A=V.j(I);L(A)||0<A.l(k);)S-=x,V=m(S),A=V.j(I);C(V)&&(V=E),N=N.add(V),k=U(k,A)}return new B(N,k)}n.A=function(k){return J(this,k).h},n.and=function(k){for(var I=Math.max(this.g.length,k.g.length),S=[],x=0;x<I;x++)S[x]=this.i(x)&k.i(x);return new u(S,this.h&k.h)},n.or=function(k){for(var I=Math.max(this.g.length,k.g.length),S=[],x=0;x<I;x++)S[x]=this.i(x)|k.i(x);return new u(S,this.h|k.h)},n.xor=function(k){for(var I=Math.max(this.g.length,k.g.length),S=[],x=0;x<I;x++)S[x]=this.i(x)^k.i(x);return new u(S,this.h^k.h)};function ie(k){for(var I=k.g.length+1,S=[],x=0;x<I;x++)S[x]=k.i(x)<<1|k.i(x-1)>>>31;return new u(S,k.h)}function Y(k,I){var S=I>>5;I%=32;for(var x=k.g.length-S,N=[],V=0;V<x;V++)N[V]=0<I?k.i(V+S)>>>I|k.i(V+S+1)<<32-I:k.i(V+S);return new u(N,k.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Ow=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=m,u.fromString=v,Ni=u}).apply(typeof o_<"u"?o_:typeof self<"u"?self:typeof window<"u"?window:{});var hc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Lw,al,Vw,Tc,dp,Mw,Fw,Uw;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,g,_){return c==Array.prototype||c==Object.prototype||(c[g]=_.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof hc=="object"&&hc];for(var g=0;g<c.length;++g){var _=c[g];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=t(this);function o(c,g){if(g)e:{var _=r;c=c.split(".");for(var R=0;R<c.length-1;R++){var z=c[R];if(!(z in _))break e;_=_[z]}c=c[c.length-1],R=_[c],g=g(R),g!=R&&g!=null&&e(_,c,{configurable:!0,writable:!0,value:g})}}function a(c,g){c instanceof String&&(c+="");var _=0,R=!1,z={next:function(){if(!R&&_<c.length){var G=_++;return{value:g(G,c[G]),done:!1}}return R=!0,{done:!0,value:void 0}}};return z[Symbol.iterator]=function(){return z},z}o("Array.prototype.values",function(c){return c||function(){return a(this,function(g,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},d=this||self;function f(c){var g=typeof c;return g=g!="object"?g:c?Array.isArray(c)?"array":g:"null",g=="array"||g=="object"&&typeof c.length=="number"}function m(c){var g=typeof c;return g=="object"&&c!=null||g=="function"}function v(c,g,_){return c.call.apply(c.bind,arguments)}function w(c,g,_){if(!c)throw Error();if(2<arguments.length){var R=Array.prototype.slice.call(arguments,2);return function(){var z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(z,R),c.apply(g,z)}}return function(){return c.apply(g,arguments)}}function E(c,g,_){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:w,E.apply(null,arguments)}function P(c,g){var _=Array.prototype.slice.call(arguments,1);return function(){var R=_.slice();return R.push.apply(R,arguments),c.apply(this,R)}}function C(c,g){function _(){}_.prototype=g.prototype,c.aa=g.prototype,c.prototype=new _,c.prototype.constructor=c,c.Qb=function(R,z,G){for(var oe=Array(arguments.length-2),He=2;He<arguments.length;He++)oe[He-2]=arguments[He];return g.prototype[z].apply(R,oe)}}function L(c){const g=c.length;if(0<g){const _=Array(g);for(let R=0;R<g;R++)_[R]=c[R];return _}return[]}function D(c,g){for(let _=1;_<arguments.length;_++){const R=arguments[_];if(f(R)){const z=c.length||0,G=R.length||0;c.length=z+G;for(let oe=0;oe<G;oe++)c[z+oe]=R[oe]}else c.push(R)}}class U{constructor(g,_){this.i=g,this.j=_,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function W(c){return/^[\s\xa0]*$/.test(c)}function B(){var c=d.navigator;return c&&(c=c.userAgent)?c:""}function J(c){return J[" "](c),c}J[" "]=function(){};var ie=B().indexOf("Gecko")!=-1&&!(B().toLowerCase().indexOf("webkit")!=-1&&B().indexOf("Edge")==-1)&&!(B().indexOf("Trident")!=-1||B().indexOf("MSIE")!=-1)&&B().indexOf("Edge")==-1;function Y(c,g,_){for(const R in c)g.call(_,c[R],R,c)}function k(c,g){for(const _ in c)g.call(void 0,c[_],_,c)}function I(c){const g={};for(const _ in c)g[_]=c[_];return g}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(c,g){let _,R;for(let z=1;z<arguments.length;z++){R=arguments[z];for(_ in R)c[_]=R[_];for(let G=0;G<S.length;G++)_=S[G],Object.prototype.hasOwnProperty.call(R,_)&&(c[_]=R[_])}}function N(c){var g=1;c=c.split(":");const _=[];for(;0<g&&c.length;)_.push(c.shift()),g--;return c.length&&_.push(c.join(":")),_}function V(c){d.setTimeout(()=>{throw c},0)}function A(){var c=ve;let g=null;return c.g&&(g=c.g,c.g=c.g.next,c.g||(c.h=null),g.next=null),g}class ce{constructor(){this.h=this.g=null}add(g,_){const R=We.get();R.set(g,_),this.h?this.h.next=R:this.g=R,this.h=R}}var We=new U(()=>new st,c=>c.reset());class st{constructor(){this.next=this.g=this.h=null}set(g,_){this.h=g,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let $e,ae=!1,ve=new ce,le=()=>{const c=d.Promise.resolve(void 0);$e=()=>{c.then(j)}};var j=()=>{for(var c;c=A();){try{c.h.call(c.g)}catch(_){V(_)}var g=We;g.j(c),100>g.h&&(g.h++,c.next=g.g,g.g=c)}ae=!1};function X(){this.s=this.s,this.C=this.C}X.prototype.s=!1,X.prototype.ma=function(){this.s||(this.s=!0,this.N())},X.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ge(c,g){this.type=c,this.g=this.target=g,this.defaultPrevented=!1}ge.prototype.h=function(){this.defaultPrevented=!0};var xe=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var c=!1,g=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const _=()=>{};d.addEventListener("test",_,g),d.removeEventListener("test",_,g)}catch{}return c}();function Ce(c,g){if(ge.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var _=this.type=c.type,R=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=g,g=c.relatedTarget){if(ie){e:{try{J(g.nodeName);var z=!0;break e}catch{}z=!1}z||(g=null)}}else _=="mouseover"?g=c.fromElement:_=="mouseout"&&(g=c.toElement);this.relatedTarget=g,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Oe[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Ce.aa.h.call(this)}}C(Ce,ge);var Oe={2:"touch",3:"pen",4:"mouse"};Ce.prototype.h=function(){Ce.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var ke="closure_listenable_"+(1e6*Math.random()|0),Ne=0;function je(c,g,_,R,z){this.listener=c,this.proxy=null,this.src=g,this.type=_,this.capture=!!R,this.ha=z,this.key=++Ne,this.da=this.fa=!1}function ot(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function vr(c){this.src=c,this.g={},this.h=0}vr.prototype.add=function(c,g,_,R,z){var G=c.toString();c=this.g[G],c||(c=this.g[G]=[],this.h++);var oe=Qr(c,g,R,z);return-1<oe?(g=c[oe],_||(g.fa=!1)):(g=new je(g,this.src,G,!!R,z),g.fa=_,c.push(g)),g};function Ls(c,g){var _=g.type;if(_ in c.g){var R=c.g[_],z=Array.prototype.indexOf.call(R,g,void 0),G;(G=0<=z)&&Array.prototype.splice.call(R,z,1),G&&(ot(g),c.g[_].length==0&&(delete c.g[_],c.h--))}}function Qr(c,g,_,R){for(var z=0;z<c.length;++z){var G=c[z];if(!G.da&&G.listener==g&&G.capture==!!_&&G.ha==R)return z}return-1}var zi="closure_lm_"+(1e6*Math.random()|0),Vs={};function sa(c,g,_,R,z){if(Array.isArray(g)){for(var G=0;G<g.length;G++)sa(c,g[G],_,R,z);return null}return _=la(_),c&&c[ke]?c.K(g,_,m(R)?!!R.capture:!1,z):oa(c,g,_,!1,R,z)}function oa(c,g,_,R,z,G){if(!g)throw Error("Invalid event type");var oe=m(z)?!!z.capture:!!z,He=Fs(c);if(He||(c[zi]=He=new vr(c)),_=He.add(g,_,R,oe,G),_.proxy)return _;if(R=Kl(),_.proxy=R,R.src=c,R.listener=_,c.addEventListener)xe||(z=oe),z===void 0&&(z=!1),c.addEventListener(g.toString(),R,z);else if(c.attachEvent)c.attachEvent(wr(g.toString()),R);else if(c.addListener&&c.removeListener)c.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Kl(){function c(_){return g.call(c.src,c.listener,_)}const g=aa;return c}function Ms(c,g,_,R,z){if(Array.isArray(g))for(var G=0;G<g.length;G++)Ms(c,g[G],_,R,z);else R=m(R)?!!R.capture:!!R,_=la(_),c&&c[ke]?(c=c.i,g=String(g).toString(),g in c.g&&(G=c.g[g],_=Qr(G,_,R,z),-1<_&&(ot(G[_]),Array.prototype.splice.call(G,_,1),G.length==0&&(delete c.g[g],c.h--)))):c&&(c=Fs(c))&&(g=c.g[g.toString()],c=-1,g&&(c=Qr(g,_,R,z)),(_=-1<c?g[c]:null)&&_r(_))}function _r(c){if(typeof c!="number"&&c&&!c.da){var g=c.src;if(g&&g[ke])Ls(g.i,c);else{var _=c.type,R=c.proxy;g.removeEventListener?g.removeEventListener(_,R,c.capture):g.detachEvent?g.detachEvent(wr(_),R):g.addListener&&g.removeListener&&g.removeListener(R),(_=Fs(g))?(Ls(_,c),_.h==0&&(_.src=null,g[zi]=null)):ot(c)}}}function wr(c){return c in Vs?Vs[c]:Vs[c]="on"+c}function aa(c,g){if(c.da)c=!0;else{g=new Ce(g,this);var _=c.listener,R=c.ha||c.src;c.fa&&_r(c),c=_.call(R,g)}return c}function Fs(c){return c=c[zi],c instanceof vr?c:null}var Us="__closure_events_fn_"+(1e9*Math.random()>>>0);function la(c){return typeof c=="function"?c:(c[Us]||(c[Us]=function(g){return c.handleEvent(g)}),c[Us])}function gt(){X.call(this),this.i=new vr(this),this.M=this,this.F=null}C(gt,X),gt.prototype[ke]=!0,gt.prototype.removeEventListener=function(c,g,_,R){Ms(this,c,g,_,R)};function yt(c,g){var _,R=c.F;if(R)for(_=[];R;R=R.F)_.push(R);if(c=c.M,R=g.type||g,typeof g=="string")g=new ge(g,c);else if(g instanceof ge)g.target=g.target||c;else{var z=g;g=new ge(R,c),x(g,z)}if(z=!0,_)for(var G=_.length-1;0<=G;G--){var oe=g.g=_[G];z=Er(oe,R,!0,g)&&z}if(oe=g.g=c,z=Er(oe,R,!0,g)&&z,z=Er(oe,R,!1,g)&&z,_)for(G=0;G<_.length;G++)oe=g.g=_[G],z=Er(oe,R,!1,g)&&z}gt.prototype.N=function(){if(gt.aa.N.call(this),this.i){var c=this.i,g;for(g in c.g){for(var _=c.g[g],R=0;R<_.length;R++)ot(_[R]);delete c.g[g],c.h--}}this.F=null},gt.prototype.K=function(c,g,_,R){return this.i.add(String(c),g,!1,_,R)},gt.prototype.L=function(c,g,_,R){return this.i.add(String(c),g,!0,_,R)};function Er(c,g,_,R){if(g=c.i.g[String(g)],!g)return!0;g=g.concat();for(var z=!0,G=0;G<g.length;++G){var oe=g[G];if(oe&&!oe.da&&oe.capture==_){var He=oe.listener,vt=oe.ha||oe.src;oe.fa&&Ls(c.i,oe),z=He.call(vt,R)!==!1&&z}}return z&&!R.defaultPrevented}function ua(c,g,_){if(typeof c=="function")_&&(c=E(c,_));else if(c&&typeof c.handleEvent=="function")c=E(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:d.setTimeout(c,g||0)}function Jr(c){c.g=ua(()=>{c.g=null,c.i&&(c.i=!1,Jr(c))},c.l);const g=c.h;c.h=null,c.m.apply(null,g)}class $i extends X{constructor(g,_){super(),this.m=g,this.l=_,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Jr(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qi(c){X.call(this),this.h=c,this.g={}}C(qi,X);var ca=[];function ha(c){Y(c.g,function(g,_){this.g.hasOwnProperty(_)&&_r(g)},c),c.g={}}qi.prototype.N=function(){qi.aa.N.call(this),ha(this)},qi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var da=d.JSON.stringify,fa=d.JSON.parse,pa=class{stringify(c){return d.JSON.stringify(c,void 0)}parse(c){return d.JSON.parse(c,void 0)}};function Hi(){}Hi.prototype.h=null;function js(c){return c.h||(c.h=c.i())}function Bs(){}var yn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Xn(){ge.call(this,"d")}C(Xn,ge);function zs(){ge.call(this,"c")}C(zs,ge);var Zn={},ma=null;function Wi(){return ma=ma||new gt}Zn.La="serverreachability";function ga(c){ge.call(this,Zn.La,c)}C(ga,ge);function Tr(c){const g=Wi();yt(g,new ga(g))}Zn.STAT_EVENT="statevent";function ya(c,g){ge.call(this,Zn.STAT_EVENT,c),this.stat=g}C(ya,ge);function ut(c){const g=Wi();yt(g,new ya(g,c))}Zn.Ma="timingevent";function $s(c,g){ge.call(this,Zn.Ma,c),this.size=g}C($s,ge);function Nn(c,g){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){c()},g)}function Ki(){this.g=!0}Ki.prototype.xa=function(){this.g=!1};function Gi(c,g,_,R,z,G){c.info(function(){if(c.g)if(G)for(var oe="",He=G.split("&"),vt=0;vt<He.length;vt++){var Fe=He[vt].split("=");if(1<Fe.length){var St=Fe[0];Fe=Fe[1];var dt=St.split("_");oe=2<=dt.length&&dt[1]=="type"?oe+(St+"="+Fe+"&"):oe+(St+"=redacted&")}}else oe=null;else oe=G;return"XMLHTTP REQ ("+R+") [attempt "+z+"]: "+g+`
`+_+`
`+oe})}function qs(c,g,_,R,z,G,oe){c.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+z+"]: "+g+`
`+_+`
`+G+" "+oe})}function bn(c,g,_,R){c.info(function(){return"XMLHTTP TEXT ("+g+"): "+Oh(c,_)+(R?" "+R:"")})}function va(c,g){c.info(function(){return"TIMEOUT: "+g})}Ki.prototype.info=function(){};function Oh(c,g){if(!c.g)return g;if(!g)return null;try{var _=JSON.parse(g);if(_){for(c=0;c<_.length;c++)if(Array.isArray(_[c])){var R=_[c];if(!(2>R.length)){var z=R[1];if(Array.isArray(z)&&!(1>z.length)){var G=z[0];if(G!="noop"&&G!="stop"&&G!="close")for(var oe=1;oe<z.length;oe++)z[oe]=""}}}}return da(_)}catch{return g}}var Hs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Gl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Dn;function Qi(){}C(Qi,Hi),Qi.prototype.g=function(){return new XMLHttpRequest},Qi.prototype.i=function(){return{}},Dn=new Qi;function On(c,g,_,R){this.j=c,this.i=g,this.l=_,this.R=R||1,this.U=new qi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ql}function Ql(){this.i=null,this.g="",this.h=!1}var _a={},Ws={};function Ks(c,g,_){c.L=1,c.v=ti(cn(g)),c.m=_,c.P=!0,wa(c,null)}function wa(c,g){c.F=Date.now(),Ge(c),c.A=cn(c.v);var _=c.A,R=c.R;Array.isArray(R)||(R=[String(R)]),ri(_.i,"t",R),c.C=0,_=c.j.J,c.h=new Ql,c.g=fu(c.j,_?g:null,!c.m),0<c.O&&(c.M=new $i(E(c.Y,c,c.g),c.O)),g=c.U,_=c.g,R=c.ca;var z="readystatechange";Array.isArray(z)||(z&&(ca[0]=z.toString()),z=ca);for(var G=0;G<z.length;G++){var oe=sa(_,z[G],R||g.handleEvent,!1,g.h||g);if(!oe)break;g.g[oe.key]=oe}g=c.H?I(c.H):{},c.m?(c.u||(c.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,g)):(c.u="GET",c.g.ea(c.A,c.u,null,g)),Tr(),Gi(c.i,c.u,c.A,c.l,c.R,c.m)}On.prototype.ca=function(c){c=c.target;const g=this.M;g&&Yt(c)==3?g.j():this.Y(c)},On.prototype.Y=function(c){try{if(c==this.g)e:{const dt=Yt(this.g);var g=this.g.Ba();const wn=this.g.Z();if(!(3>dt)&&(dt!=3||this.g&&(this.h.h||this.g.oa()||Aa(this.g)))){this.J||dt!=4||g==7||(g==8||0>=wn?Tr(3):Tr(2)),Ji(this);var _=this.g.Z();this.X=_;t:if(Jl(this)){var R=Aa(this.g);c="";var z=R.length,G=Yt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){vn(this),Yr(this);var oe="";break t}this.h.i=new d.TextDecoder}for(g=0;g<z;g++)this.h.h=!0,c+=this.h.i.decode(R[g],{stream:!(G&&g==z-1)});R.length=0,this.h.g+=c,this.C=0,oe=this.h.g}else oe=this.g.oa();if(this.o=_==200,qs(this.i,this.u,this.A,this.l,this.R,dt,_),this.o){if(this.T&&!this.K){t:{if(this.g){var He,vt=this.g;if((He=vt.g?vt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!W(He)){var Fe=He;break t}}Fe=null}if(_=Fe)bn(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ea(this,_);else{this.o=!1,this.s=3,ut(12),vn(this),Yr(this);break e}}if(this.P){_=!0;let dn;for(;!this.J&&this.C<oe.length;)if(dn=Lh(this,oe),dn==Ws){dt==4&&(this.s=4,ut(14),_=!1),bn(this.i,this.l,null,"[Incomplete Response]");break}else if(dn==_a){this.s=4,ut(15),bn(this.i,this.l,oe,"[Invalid Chunk]"),_=!1;break}else bn(this.i,this.l,dn,null),Ea(this,dn);if(Jl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),dt!=4||oe.length!=0||this.h.h||(this.s=1,ut(16),_=!1),this.o=this.o&&_,!_)bn(this.i,this.l,oe,"[Invalid Chunked Response]"),vn(this),Yr(this);else if(0<oe.length&&!this.W){this.W=!0;var St=this.j;St.g==this&&St.ba&&!St.M&&(St.j.info("Great, no buffering proxy detected. Bytes received: "+oe.length),Pa(St),St.M=!0,ut(11))}}else bn(this.i,this.l,oe,null),Ea(this,oe);dt==4&&vn(this),this.o&&!this.J&&(dt==4?io(this.j,this):(this.o=!1,Ge(this)))}else Zs(this.g),_==400&&0<oe.indexOf("Unknown SID")?(this.s=3,ut(12)):(this.s=0,ut(13)),vn(this),Yr(this)}}}catch{}finally{}};function Jl(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Lh(c,g){var _=c.C,R=g.indexOf(`
`,_);return R==-1?Ws:(_=Number(g.substring(_,R)),isNaN(_)?_a:(R+=1,R+_>g.length?Ws:(g=g.slice(R,R+_),c.C=R+_,g)))}On.prototype.cancel=function(){this.J=!0,vn(this)};function Ge(c){c.S=Date.now()+c.I,Yl(c,c.I)}function Yl(c,g){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Nn(E(c.ba,c),g)}function Ji(c){c.B&&(d.clearTimeout(c.B),c.B=null)}On.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(va(this.i,this.A),this.L!=2&&(Tr(),ut(17)),vn(this),this.s=2,Yr(this)):Yl(this,this.S-c)};function Yr(c){c.j.G==0||c.J||io(c.j,c)}function vn(c){Ji(c);var g=c.M;g&&typeof g.ma=="function"&&g.ma(),c.M=null,ha(c.U),c.g&&(g=c.g,c.g=null,g.abort(),g.ma())}function Ea(c,g){try{var _=c.j;if(_.G!=0&&(_.g==c||Ht(_.h,c))){if(!c.K&&Ht(_.h,c)&&_.G==3){try{var R=_.Da.g.parse(g)}catch{R=null}if(Array.isArray(R)&&R.length==3){var z=R;if(z[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<c.F)ro(_),Un(_);else break e;no(_),ut(18)}}else _.za=z[1],0<_.za-_.T&&37500>z[2]&&_.F&&_.v==0&&!_.C&&(_.C=Nn(E(_.Za,_),6e3));if(1>=Zl(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Cr(_,11)}else if((c.K||_.g==c)&&ro(_),!W(g))for(z=_.Da.g.parse(g),g=0;g<z.length;g++){let Fe=z[g];if(_.T=Fe[0],Fe=Fe[1],_.G==2)if(Fe[0]=="c"){_.K=Fe[1],_.ia=Fe[2];const St=Fe[3];St!=null&&(_.la=St,_.j.info("VER="+_.la));const dt=Fe[4];dt!=null&&(_.Aa=dt,_.j.info("SVER="+_.Aa));const wn=Fe[5];wn!=null&&typeof wn=="number"&&0<wn&&(R=1.5*wn,_.L=R,_.j.info("backChannelRequestTimeoutMs_="+R)),R=_;const dn=c.g;if(dn){const rs=dn.g?dn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(rs){var G=R.h;G.g||rs.indexOf("spdy")==-1&&rs.indexOf("quic")==-1&&rs.indexOf("h2")==-1||(G.j=G.l,G.g=new Set,G.h&&(Ta(G,G.h),G.h=null))}if(R.D){const oo=dn.g?dn.g.getResponseHeader("X-HTTP-Session-Id"):null;oo&&(R.ya=oo,Ke(R.I,R.D,oo))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-c.F,_.j.info("Handshake RTT: "+_.R+"ms")),R=_;var oe=c;if(R.qa=du(R,R.J?R.ia:null,R.W),oe.K){eu(R.h,oe);var He=oe,vt=R.L;vt&&(He.I=vt),He.B&&(Ji(He),Ge(He)),R.g=oe}else ns(R);0<_.i.length&&rr(_)}else Fe[0]!="stop"&&Fe[0]!="close"||Cr(_,7);else _.G==3&&(Fe[0]=="stop"||Fe[0]=="close"?Fe[0]=="stop"?Cr(_,7):kt(_):Fe[0]!="noop"&&_.l&&_.l.ta(Fe),_.v=0)}}Tr(4)}catch{}}var Xl=class{constructor(c,g){this.g=c,this.map=g}};function Yi(c){this.l=c||10,d.PerformanceNavigationTiming?(c=d.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function un(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Zl(c){return c.h?1:c.g?c.g.size:0}function Ht(c,g){return c.h?c.h==g:c.g?c.g.has(g):!1}function Ta(c,g){c.g?c.g.add(g):c.h=g}function eu(c,g){c.h&&c.h==g?c.h=null:c.g&&c.g.has(g)&&c.g.delete(g)}Yi.prototype.cancel=function(){if(this.i=tu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function tu(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let g=c.i;for(const _ of c.g.values())g=g.concat(_.D);return g}return L(c.i)}function Gs(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(f(c)){for(var g=[],_=c.length,R=0;R<_;R++)g.push(c[R]);return g}g=[],_=0;for(R in c)g[_++]=c[R];return g}function Qs(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(f(c)||typeof c=="string"){var g=[];c=c.length;for(var _=0;_<c;_++)g.push(_);return g}g=[],_=0;for(const R in c)g[_++]=R;return g}}}function Xr(c,g){if(c.forEach&&typeof c.forEach=="function")c.forEach(g,void 0);else if(f(c)||typeof c=="string")Array.prototype.forEach.call(c,g,void 0);else for(var _=Qs(c),R=Gs(c),z=R.length,G=0;G<z;G++)g.call(void 0,R[G],_&&_[G],c)}var Xi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Vh(c,g){if(c){c=c.split("&");for(var _=0;_<c.length;_++){var R=c[_].indexOf("="),z=null;if(0<=R){var G=c[_].substring(0,R);z=c[_].substring(R+1)}else G=c[_];g(G,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function Ir(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Ir){this.h=c.h,Zi(this,c.j),this.o=c.o,this.g=c.g,Zr(this,c.s),this.l=c.l;var g=c.i,_=new er;_.i=g.i,g.g&&(_.g=new Map(g.g),_.h=g.h),ei(this,_),this.m=c.m}else c&&(g=String(c).match(Xi))?(this.h=!1,Zi(this,g[1]||"",!0),this.o=Me(g[2]||""),this.g=Me(g[3]||"",!0),Zr(this,g[4]),this.l=Me(g[5]||"",!0),ei(this,g[6]||"",!0),this.m=Me(g[7]||"")):(this.h=!1,this.i=new er(null,this.h))}Ir.prototype.toString=function(){var c=[],g=this.j;g&&c.push(ni(g,Js,!0),":");var _=this.g;return(_||g=="file")&&(c.push("//"),(g=this.o)&&c.push(ni(g,Js,!0),"@"),c.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&c.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&c.push("/"),c.push(ni(_,_.charAt(0)=="/"?iu:ru,!0))),(_=this.i.toString())&&c.push("?",_),(_=this.m)&&c.push("#",ni(_,Ia)),c.join("")};function cn(c){return new Ir(c)}function Zi(c,g,_){c.j=_?Me(g,!0):g,c.j&&(c.j=c.j.replace(/:$/,""))}function Zr(c,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);c.s=g}else c.s=null}function ei(c,g,_){g instanceof er?(c.i=g,tr(c.i,c.h)):(_||(g=ni(g,su)),c.i=new er(g,c.h))}function Ke(c,g,_){c.i.set(g,_)}function ti(c){return Ke(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Me(c,g){return c?g?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ni(c,g,_){return typeof c=="string"?(c=encodeURI(c).replace(g,nu),_&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function nu(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Js=/[#\/\?@]/g,ru=/[#\?:]/g,iu=/[#\?]/g,su=/[#\?@]/g,Ia=/#/g;function er(c,g){this.h=this.g=null,this.i=c||null,this.j=!!g}function xt(c){c.g||(c.g=new Map,c.h=0,c.i&&Vh(c.i,function(g,_){c.add(decodeURIComponent(g.replace(/\+/g," ")),_)}))}n=er.prototype,n.add=function(c,g){xt(this),this.i=null,c=_n(this,c);var _=this.g.get(c);return _||this.g.set(c,_=[]),_.push(g),this.h+=1,this};function Ln(c,g){xt(c),g=_n(c,g),c.g.has(g)&&(c.i=null,c.h-=c.g.get(g).length,c.g.delete(g))}function Vn(c,g){return xt(c),g=_n(c,g),c.g.has(g)}n.forEach=function(c,g){xt(this),this.g.forEach(function(_,R){_.forEach(function(z){c.call(g,z,R,this)},this)},this)},n.na=function(){xt(this);const c=Array.from(this.g.values()),g=Array.from(this.g.keys()),_=[];for(let R=0;R<g.length;R++){const z=c[R];for(let G=0;G<z.length;G++)_.push(g[R])}return _},n.V=function(c){xt(this);let g=[];if(typeof c=="string")Vn(this,c)&&(g=g.concat(this.g.get(_n(this,c))));else{c=Array.from(this.g.values());for(let _=0;_<c.length;_++)g=g.concat(c[_])}return g},n.set=function(c,g){return xt(this),this.i=null,c=_n(this,c),Vn(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[g]),this.h+=1,this},n.get=function(c,g){return c?(c=this.V(c),0<c.length?String(c[0]):g):g};function ri(c,g,_){Ln(c,g),0<_.length&&(c.i=null,c.g.set(_n(c,g),L(_)),c.h+=_.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],g=Array.from(this.g.keys());for(var _=0;_<g.length;_++){var R=g[_];const G=encodeURIComponent(String(R)),oe=this.V(R);for(R=0;R<oe.length;R++){var z=G;oe[R]!==""&&(z+="="+encodeURIComponent(String(oe[R]))),c.push(z)}}return this.i=c.join("&")};function _n(c,g){return g=String(g),c.j&&(g=g.toLowerCase()),g}function tr(c,g){g&&!c.j&&(xt(c),c.i=null,c.g.forEach(function(_,R){var z=R.toLowerCase();R!=z&&(Ln(this,R),ri(this,z,_))},c)),c.j=g}function Mh(c,g){const _=new Ki;if(d.Image){const R=new Image;R.onload=P(Jt,_,"TestLoadImage: loaded",!0,g,R),R.onerror=P(Jt,_,"TestLoadImage: error",!1,g,R),R.onabort=P(Jt,_,"TestLoadImage: abort",!1,g,R),R.ontimeout=P(Jt,_,"TestLoadImage: timeout",!1,g,R),d.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=c}else g(!1)}function ou(c,g){const _=new Ki,R=new AbortController,z=setTimeout(()=>{R.abort(),Jt(_,"TestPingServer: timeout",!1,g)},1e4);fetch(c,{signal:R.signal}).then(G=>{clearTimeout(z),G.ok?Jt(_,"TestPingServer: ok",!0,g):Jt(_,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(z),Jt(_,"TestPingServer: error",!1,g)})}function Jt(c,g,_,R,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),R(_)}catch{}}function Fh(){this.g=new pa}function au(c,g,_){const R=_||"";try{Xr(c,function(z,G){let oe=z;m(z)&&(oe=da(z)),g.push(R+G+"="+encodeURIComponent(oe))})}catch(z){throw g.push(R+"type="+encodeURIComponent("_badmap")),z}}function Sr(c){this.l=c.Ub||null,this.j=c.eb||!1}C(Sr,Hi),Sr.prototype.g=function(){return new es(this.l,this.j)},Sr.prototype.i=function(c){return function(){return c}}({});function es(c,g){gt.call(this),this.D=c,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(es,gt),n=es.prototype,n.open=function(c,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=g,this.readyState=1,Fn(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(g.body=c),(this.D||d).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Mn(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Fn(this)),this.g&&(this.readyState=3,Fn(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;lu(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function lu(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var g=c.value?c.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!c.done}))&&(this.response=this.responseText+=g)}c.done?Mn(this):Fn(this),this.readyState==3&&lu(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,Mn(this))},n.Qa=function(c){this.g&&(this.response=c,Mn(this))},n.ga=function(){this.g&&Mn(this)};function Mn(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Fn(c)}n.setRequestHeader=function(c,g){this.u.append(c,g)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],g=this.h.entries();for(var _=g.next();!_.done;)_=_.value,c.push(_[0]+": "+_[1]),_=g.next();return c.join(`\r
`)};function Fn(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(es.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Rr(c){let g="";return Y(c,function(_,R){g+=R,g+=":",g+=_,g+=`\r
`}),g}function ii(c,g,_){e:{for(R in _){var R=!1;break e}R=!0}R||(_=Rr(_),typeof c=="string"?_!=null&&encodeURIComponent(String(_)):Ke(c,g,_))}function Ze(c){gt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Ze,gt);var Uh=/^https?$/i,Sa=["POST","PUT"];n=Ze.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,g,_,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);g=g?g.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Dn.g(),this.v=this.o?js(this.o):js(Dn),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(g,String(c),!0),this.B=!1}catch(G){ts(this,G);return}if(c=_||"",_=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var z in R)_.set(z,R[z]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const G of R.keys())_.set(G,R.get(G));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(_.keys()).find(G=>G.toLowerCase()=="content-type"),z=d.FormData&&c instanceof d.FormData,!(0<=Array.prototype.indexOf.call(Sa,g,void 0))||R||z||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[G,oe]of _)this.g.setRequestHeader(G,oe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Xs(this),this.u=!0,this.g.send(c),this.u=!1}catch(G){ts(this,G)}};function ts(c,g){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=g,c.m=5,Ys(c),hn(c)}function Ys(c){c.A||(c.A=!0,yt(c,"complete"),yt(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,yt(this,"complete"),yt(this,"abort"),hn(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),hn(this,!0)),Ze.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Ra(this):this.bb())},n.bb=function(){Ra(this)};function Ra(c){if(c.h&&typeof u<"u"&&(!c.v[1]||Yt(c)!=4||c.Z()!=2)){if(c.u&&Yt(c)==4)ua(c.Ea,0,c);else if(yt(c,"readystatechange"),Yt(c)==4){c.h=!1;try{const oe=c.Z();e:switch(oe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var _;if(!(_=g)){var R;if(R=oe===0){var z=String(c.D).match(Xi)[1]||null;!z&&d.self&&d.self.location&&(z=d.self.location.protocol.slice(0,-1)),R=!Uh.test(z?z.toLowerCase():"")}_=R}if(_)yt(c,"complete"),yt(c,"success");else{c.m=6;try{var G=2<Yt(c)?c.g.statusText:""}catch{G=""}c.l=G+" ["+c.Z()+"]",Ys(c)}}finally{hn(c)}}}}function hn(c,g){if(c.g){Xs(c);const _=c.g,R=c.v[0]?()=>{}:null;c.g=null,c.v=null,g||yt(c,"ready");try{_.onreadystatechange=R}catch{}}}function Xs(c){c.I&&(d.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function Yt(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<Yt(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var g=this.g.responseText;return c&&g.indexOf(c)==0&&(g=g.substring(c.length)),fa(g)}};function Aa(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Zs(c){const g={};c=(c.g&&2<=Yt(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<c.length;R++){if(W(c[R]))continue;var _=N(c[R]);const z=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const G=g[z]||[];g[z]=G,G.push(_)}k(g,function(R){return R.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function nr(c,g,_){return _&&_.internalChannelParams&&_.internalChannelParams[c]||g}function Ca(c){this.Aa=0,this.i=[],this.j=new Ki,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=nr("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=nr("baseRetryDelayMs",5e3,c),this.cb=nr("retryDelaySeedMs",1e4,c),this.Wa=nr("forwardChannelMaxRetries",2,c),this.wa=nr("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Yi(c&&c.concurrentRequestLimit),this.Da=new Fh,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Ca.prototype,n.la=8,n.G=1,n.connect=function(c,g,_,R){ut(0),this.W=c,this.H=g||{},_&&R!==void 0&&(this.H.OSID=_,this.H.OAID=R),this.F=this.X,this.I=du(this,null,this.W),rr(this)};function kt(c){if(eo(c),c.G==3){var g=c.U++,_=cn(c.I);if(Ke(_,"SID",c.K),Ke(_,"RID",g),Ke(_,"TYPE","terminate"),Ar(c,_),g=new On(c,c.j,g),g.L=2,g.v=ti(cn(_)),_=!1,d.navigator&&d.navigator.sendBeacon)try{_=d.navigator.sendBeacon(g.v.toString(),"")}catch{}!_&&d.Image&&(new Image().src=g.v,_=!0),_||(g.g=fu(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Ge(g)}hu(c)}function Un(c){c.g&&(Pa(c),c.g.cancel(),c.g=null)}function eo(c){Un(c),c.u&&(d.clearTimeout(c.u),c.u=null),ro(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&d.clearTimeout(c.s),c.s=null)}function rr(c){if(!un(c.h)&&!c.s){c.s=!0;var g=c.Ga;$e||le(),ae||($e(),ae=!0),ve.add(g,c),c.B=0}}function jh(c,g){return Zl(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=g.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Nn(E(c.Ga,c,g),cu(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const z=new On(this,this.j,c);let G=this.o;if(this.S&&(G?(G=I(G),x(G,this.S)):G=this.S),this.m!==null||this.O||(z.H=G,G=null),this.P)e:{for(var g=0,_=0;_<this.i.length;_++){t:{var R=this.i[_];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(g+=R,4096<g){g=_;break e}if(g===4096||_===this.i.length-1){g=_+1;break e}}g=1e3}else g=1e3;g=si(this,z,g),_=cn(this.I),Ke(_,"RID",c),Ke(_,"CVER",22),this.D&&Ke(_,"X-HTTP-Session-Id",this.D),Ar(this,_),G&&(this.O?g="headers="+encodeURIComponent(String(Rr(G)))+"&"+g:this.m&&ii(_,this.m,G)),Ta(this.h,z),this.Ua&&Ke(_,"TYPE","init"),this.P?(Ke(_,"$req",g),Ke(_,"SID","null"),z.T=!0,Ks(z,_,null)):Ks(z,_,g),this.G=2}}else this.G==3&&(c?to(this,c):this.i.length==0||un(this.h)||to(this))};function to(c,g){var _;g?_=g.l:_=c.U++;const R=cn(c.I);Ke(R,"SID",c.K),Ke(R,"RID",_),Ke(R,"AID",c.T),Ar(c,R),c.m&&c.o&&ii(R,c.m,c.o),_=new On(c,c.j,_,c.B+1),c.m===null&&(_.H=c.o),g&&(c.i=g.D.concat(c.i)),g=si(c,_,1e3),_.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Ta(c.h,_),Ks(_,R,g)}function Ar(c,g){c.H&&Y(c.H,function(_,R){Ke(g,R,_)}),c.l&&Xr({},function(_,R){Ke(g,R,_)})}function si(c,g,_){_=Math.min(c.i.length,_);var R=c.l?E(c.l.Na,c.l,c):null;e:{var z=c.i;let G=-1;for(;;){const oe=["count="+_];G==-1?0<_?(G=z[0].g,oe.push("ofs="+G)):G=0:oe.push("ofs="+G);let He=!0;for(let vt=0;vt<_;vt++){let Fe=z[vt].g;const St=z[vt].map;if(Fe-=G,0>Fe)G=Math.max(0,z[vt].g-100),He=!1;else try{au(St,oe,"req"+Fe+"_")}catch{R&&R(St)}}if(He){R=oe.join("&");break e}}}return c=c.i.splice(0,_),g.D=c,R}function ns(c){if(!c.g&&!c.u){c.Y=1;var g=c.Fa;$e||le(),ae||($e(),ae=!0),ve.add(g,c),c.v=0}}function no(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Nn(E(c.Fa,c),cu(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,uu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Nn(E(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ut(10),Un(this),uu(this))};function Pa(c){c.A!=null&&(d.clearTimeout(c.A),c.A=null)}function uu(c){c.g=new On(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var g=cn(c.qa);Ke(g,"RID","rpc"),Ke(g,"SID",c.K),Ke(g,"AID",c.T),Ke(g,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ke(g,"TO",c.ja),Ke(g,"TYPE","xmlhttp"),Ar(c,g),c.m&&c.o&&ii(g,c.m,c.o),c.L&&(c.g.I=c.L);var _=c.g;c=c.ia,_.L=1,_.v=ti(cn(g)),_.m=null,_.P=!0,wa(_,c)}n.Za=function(){this.C!=null&&(this.C=null,Un(this),no(this),ut(19))};function ro(c){c.C!=null&&(d.clearTimeout(c.C),c.C=null)}function io(c,g){var _=null;if(c.g==g){ro(c),Pa(c),c.g=null;var R=2}else if(Ht(c.h,g))_=g.D,eu(c.h,g),R=1;else return;if(c.G!=0){if(g.o)if(R==1){_=g.m?g.m.length:0,g=Date.now()-g.F;var z=c.B;R=Wi(),yt(R,new $s(R,_)),rr(c)}else ns(c);else if(z=g.s,z==3||z==0&&0<g.X||!(R==1&&jh(c,g)||R==2&&no(c)))switch(_&&0<_.length&&(g=c.h,g.i=g.i.concat(_)),z){case 1:Cr(c,5);break;case 4:Cr(c,10);break;case 3:Cr(c,6);break;default:Cr(c,2)}}}function cu(c,g){let _=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(_*=2),_*g}function Cr(c,g){if(c.j.info("Error code "+g),g==2){var _=E(c.fb,c),R=c.Xa;const z=!R;R=new Ir(R||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Zi(R,"https"),ti(R),z?Mh(R.toString(),_):ou(R.toString(),_)}else ut(2);c.G=0,c.l&&c.l.sa(g),hu(c),eo(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),ut(2)):(this.j.info("Failed to ping google.com"),ut(1))};function hu(c){if(c.G=0,c.ka=[],c.l){const g=tu(c.h);(g.length!=0||c.i.length!=0)&&(D(c.ka,g),D(c.ka,c.i),c.h.i.length=0,L(c.i),c.i.length=0),c.l.ra()}}function du(c,g,_){var R=_ instanceof Ir?cn(_):new Ir(_);if(R.g!="")g&&(R.g=g+"."+R.g),Zr(R,R.s);else{var z=d.location;R=z.protocol,g=g?g+"."+z.hostname:z.hostname,z=+z.port;var G=new Ir(null);R&&Zi(G,R),g&&(G.g=g),z&&Zr(G,z),_&&(G.l=_),R=G}return _=c.D,g=c.ya,_&&g&&Ke(R,_,g),Ke(R,"VER",c.la),Ar(c,R),R}function fu(c,g,_){if(g&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=c.Ca&&!c.pa?new Ze(new Sr({eb:_})):new Ze(c.pa),g.Ha(c.J),g}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function xa(){}n=xa.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function so(){}so.prototype.g=function(c,g){return new Wt(c,g)};function Wt(c,g){gt.call(this),this.g=new Ca(g),this.l=c,this.h=g&&g.messageUrlParams||null,c=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(c?c["X-WebChannel-Content-Type"]=g.messageContentType:c={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(c?c["X-WebChannel-Client-Profile"]=g.va:c={"X-WebChannel-Client-Profile":g.va}),this.g.S=c,(c=g&&g.Sb)&&!W(c)&&(this.g.m=c),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!W(g)&&(this.g.D=g,c=this.h,c!==null&&g in c&&(c=this.h,g in c&&delete c[g])),this.j=new ir(this)}C(Wt,gt),Wt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Wt.prototype.close=function(){kt(this.g)},Wt.prototype.o=function(c){var g=this.g;if(typeof c=="string"){var _={};_.__data__=c,c=_}else this.u&&(_={},_.__data__=da(c),c=_);g.i.push(new Xl(g.Ya++,c)),g.G==3&&rr(g)},Wt.prototype.N=function(){this.g.l=null,delete this.j,kt(this.g),delete this.g,Wt.aa.N.call(this)};function pu(c){Xn.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var g=c.__sm__;if(g){e:{for(const _ in g){c=_;break e}c=void 0}(this.i=c)&&(c=this.i,g=g!==null&&c in g?g[c]:void 0),this.data=g}else this.data=c}C(pu,Xn);function mu(){zs.call(this),this.status=1}C(mu,zs);function ir(c){this.g=c}C(ir,xa),ir.prototype.ua=function(){yt(this.g,"a")},ir.prototype.ta=function(c){yt(this.g,new pu(c))},ir.prototype.sa=function(c){yt(this.g,new mu)},ir.prototype.ra=function(){yt(this.g,"b")},so.prototype.createWebChannel=so.prototype.g,Wt.prototype.send=Wt.prototype.o,Wt.prototype.open=Wt.prototype.m,Wt.prototype.close=Wt.prototype.close,Uw=function(){return new so},Fw=function(){return Wi()},Mw=Zn,dp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Hs.NO_ERROR=0,Hs.TIMEOUT=8,Hs.HTTP_ERROR=6,Tc=Hs,Gl.COMPLETE="complete",Vw=Gl,Bs.EventType=yn,yn.OPEN="a",yn.CLOSE="b",yn.ERROR="c",yn.MESSAGE="d",gt.prototype.listen=gt.prototype.K,al=Bs,Ze.prototype.listenOnce=Ze.prototype.L,Ze.prototype.getLastError=Ze.prototype.Ka,Ze.prototype.getLastErrorCode=Ze.prototype.Ba,Ze.prototype.getStatus=Ze.prototype.Z,Ze.prototype.getResponseJson=Ze.prototype.Oa,Ze.prototype.getResponseText=Ze.prototype.oa,Ze.prototype.send=Ze.prototype.ea,Ze.prototype.setWithCredentials=Ze.prototype.Ha,Lw=Ze}).apply(typeof hc<"u"?hc:typeof self<"u"?self:typeof window<"u"?window:{});const a_="@firebase/firestore",l_="4.7.16";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Bt.UNAUTHENTICATED=new Bt(null),Bt.GOOGLE_CREDENTIALS=new Bt("google-credentials-uid"),Bt.FIRST_PARTY=new Bt("first-party-uid"),Bt.MOCK_USER=new Bt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zo="11.8.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ss=new Wp("@firebase/firestore");function xo(){return Ss.logLevel}function he(n,...e){if(Ss.logLevel<=Le.DEBUG){const t=e.map(Qp);Ss.debug(`Firestore (${Zo}): ${n}`,...t)}}function $r(n,...e){if(Ss.logLevel<=Le.ERROR){const t=e.map(Qp);Ss.error(`Firestore (${Zo}): ${n}`,...t)}}function Uo(n,...e){if(Ss.logLevel<=Le.WARN){const t=e.map(Qp);Ss.warn(`Firestore (${Zo}): ${n}`,...t)}}function Qp(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ie(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,jw(n,r,t)}function jw(n,e,t){let r=`FIRESTORE (${Zo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw $r(r),new Error(r)}function qe(n,e,t,r){let o="Unexpected state";typeof t=="string"?o=t:r=t,n||jw(e,o,r)}function Ae(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends Kr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class TP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Bt.UNAUTHENTICATED))}shutdown(){}}class IP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class SP{constructor(e){this.t=e,this.currentUser=Bt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){qe(this.o===void 0,42304);let r=this.i;const o=f=>this.i!==r?(r=this.i,t(f)):Promise.resolve();let a=new Ur;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Ur,e.enqueueRetryable(()=>o(this.currentUser))};const u=()=>{const f=a;e.enqueueRetryable(async()=>{await f.promise,await o(this.currentUser)})},d=f=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit(f=>d(f)),setTimeout(()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?d(f):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Ur)}},0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(qe(typeof r.accessToken=="string",31837,{l:r}),new Bw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return qe(e===null||typeof e=="string",2055,{h:e}),new Bt(e)}}class RP{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Bt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class AP{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new RP(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Bt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class u_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class CP{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Pn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){qe(this.o===void 0,3512);const r=a=>{a.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.m;return this.m=a.token,he("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const o=a=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>o(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?o(a):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new u_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(qe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new u_(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PP(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zw(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=PP(40);for(let a=0;a<o.length;++a)r.length<20&&o[a]<t&&(r+=e.charAt(o[a]%62))}return r}}function be(n,e){return n<e?-1:n>e?1:0}function fp(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),o=e.codePointAt(t);if(r!==o){if(r<128&&o<128)return be(r,o);{const a=zw(),u=xP(a.encode(c_(n,t)),a.encode(c_(e,t)));return u!==0?u:be(r,o)}}t+=r>65535?2:1}return be(n.length,e.length)}function c_(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function xP(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return be(n[t],e[t]);return be(n.length,e.length)}function jo(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h_=-62135596800,d_=1e6;class Et{static now(){return Et.fromMillis(Date.now())}static fromDate(e){return Et.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*d_);return new Et(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new de(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new de(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<h_)throw new de(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/d_}_compareTo(e){return this.seconds===e.seconds?be(this.nanoseconds,e.nanoseconds):be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-h_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{static fromTimestamp(e){return new Re(e)}static min(){return new Re(new Et(0,0))}static max(){return new Re(new Et(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f_="__name__";class hr{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ie(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Ie(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return hr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof hr?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const a=hr.compareSegments(e.get(o),t.get(o));if(a!==0)return a}return be(e.length,t.length)}static compareSegments(e,t){const r=hr.isNumericId(e),o=hr.isNumericId(t);return r&&!o?-1:!r&&o?1:r&&o?hr.extractNumericId(e).compare(hr.extractNumericId(t)):fp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ni.fromString(e.substring(4,e.length-2))}}class Xe extends hr{construct(e,t,r){return new Xe(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new de(Z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new Xe(t)}static emptyPath(){return new Xe([])}}const kP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ot extends hr{construct(e,t,r){return new Ot(e,t,r)}static isValidIdentifier(e){return kP.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ot.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===f_}static keyField(){return new Ot([f_])}static fromServerFormat(e){const t=[];let r="",o=0;const a=()=>{if(r.length===0)throw new de(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new de(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[o+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new de(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,o+=2}else d==="`"?(u=!u,o++):d!=="."||u?(r+=d,o++):(a(),o++)}if(a(),u)throw new de(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ot(t)}static emptyPath(){return new Ot([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e){this.path=e}static fromPath(e){return new _e(Xe.fromString(e))}static fromName(e){return new _e(Xe.fromString(e).popFirst(5))}static empty(){return new _e(Xe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Xe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Xe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _e(new Xe(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tl=-1;function NP(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=Re.fromTimestamp(r===1e9?new Et(t+1,0):new Et(t,r));return new Di(o,_e.empty(),e)}function bP(n){return new Di(n.readTime,n.key,Tl)}class Di{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Di(Re.min(),_e.empty(),Tl)}static max(){return new Di(Re.max(),_e.empty(),Tl)}}function DP(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=_e.comparator(n.documentKey,e.documentKey),t!==0?t:be(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class LP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ea(n){if(n.code!==Z.FAILED_PRECONDITION||n.message!==OP)throw n;he("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ie(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ee((r,o)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,o)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ee?t:ee.resolve(t)}catch(t){return ee.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ee.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ee.reject(t)}static resolve(e){return new ee((t,r)=>{t(e)})}static reject(e){return new ee((t,r)=>{r(e)})}static waitFor(e){return new ee((t,r)=>{let o=0,a=0,u=!1;e.forEach(d=>{++o,d.next(()=>{++a,u&&a===o&&t()},f=>r(f))}),u=!0,a===o&&t()})}static or(e){let t=ee.resolve(!1);for(const r of e)t=t.next(o=>o?ee.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,a)=>{r.push(t.call(this,o,a))}),this.waitFor(r)}static mapArray(e,t){return new ee((r,o)=>{const a=e.length,u=new Array(a);let d=0;for(let f=0;f<a;f++){const m=f;t(e[m]).next(v=>{u[m]=v,++d,d===a&&r(u)},v=>o(v))}})}static doWhile(e,t){return new ee((r,o)=>{const a=()=>{e()===!0?t().next(()=>{a()},o):r()};a()})}}function VP(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ta(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>t.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}dh.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jp=-1;function fh(n){return n==null}function Fc(n){return n===0&&1/n==-1/0}function MP(n){return typeof n=="number"&&Number.isInteger(n)&&!Fc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qw="";function FP(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=p_(e)),e=UP(n.get(t),e);return p_(e)}function UP(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const a=n.charAt(o);switch(a){case"\0":t+="";break;case qw:t+="";break;default:t+=a}}return t}function p_(n){return n+qw+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m_(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ui(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Hw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e,t){this.comparator=e,this.root=t||Dt.EMPTY}insert(e,t){return new it(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Dt.BLACK,null,null))}remove(e){return new it(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Dt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new dc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new dc(this.root,e,this.comparator,!1)}getReverseIterator(){return new dc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new dc(this.root,e,this.comparator,!0)}}class dc{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&o&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Dt{constructor(e,t,r,o,a){this.key=e,this.value=t,this.color=r??Dt.RED,this.left=o??Dt.EMPTY,this.right=a??Dt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,a){return new Dt(e??this.key,t??this.value,r??this.color,o??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const a=r(e,o.key);return o=a<0?o.copy(null,null,null,o.left.insert(e,t,r),null):a===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Dt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Dt.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Dt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Dt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ie(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ie(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ie(27949);return e+(this.isRed()?0:1)}}Dt.EMPTY=null,Dt.RED=!0,Dt.BLACK=!1;Dt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ie(57766)}get value(){throw Ie(16141)}get color(){throw Ie(16727)}get left(){throw Ie(29726)}get right(){throw Ie(36894)}copy(e,t,r,o,a){return this}insert(e,t,r){return new Dt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e){this.comparator=e,this.data=new it(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new g_(this.data.getIterator())}getIteratorFrom(e){return new g_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Tt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=r.getNext().key;if(this.comparator(o,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Tt(this.comparator);return t.data=e,t}}class g_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.fields=e,e.sort(Ot.comparator)}static empty(){return new gn([])}unionWith(e){let t=new Tt(Ot.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new gn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return jo(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new Ww("Invalid base64 string: "+a):a}}(e);return new Lt(t)}static fromUint8Array(e){const t=function(o){let a="";for(let u=0;u<o.length;++u)a+=String.fromCharCode(o[u]);return a}(e);return new Lt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Lt.EMPTY_BYTE_STRING=new Lt("");const jP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Oi(n){if(qe(!!n,39018),typeof n=="string"){let e=0;const t=jP.exec(n);if(qe(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ht(n.seconds),nanos:ht(n.nanos)}}function ht(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Li(n){return typeof n=="string"?Lt.fromBase64String(n):Lt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kw="server_timestamp",Gw="__type__",Qw="__previous_value__",Jw="__local_write_time__";function Yp(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[Gw])===null||t===void 0?void 0:t.stringValue)===Kw}function ph(n){const e=n.mapValue.fields[Qw];return Yp(e)?ph(e):e}function Il(n){const e=Oi(n.mapValue.fields[Jw].timestampValue);return new Et(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{constructor(e,t,r,o,a,u,d,f,m,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=f,this.useFetchStreams=m,this.isUsingEmulator=v}}const Uc="(default)";class Sl{constructor(e,t){this.projectId=e,this.database=t||Uc}static empty(){return new Sl("","")}get isDefaultDatabase(){return this.database===Uc}isEqual(e){return e instanceof Sl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yw="__type__",zP="__max__",fc={mapValue:{}},Xw="__vector__",jc="value";function Vi(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Yp(n)?4:qP(n)?9007199254740991:$P(n)?10:11:Ie(28295,{value:n})}function gr(n,e){if(n===e)return!0;const t=Vi(n);if(t!==Vi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Il(n).isEqual(Il(e));case 3:return function(o,a){if(typeof o.timestampValue=="string"&&typeof a.timestampValue=="string"&&o.timestampValue.length===a.timestampValue.length)return o.timestampValue===a.timestampValue;const u=Oi(o.timestampValue),d=Oi(a.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(o,a){return Li(o.bytesValue).isEqual(Li(a.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(o,a){return ht(o.geoPointValue.latitude)===ht(a.geoPointValue.latitude)&&ht(o.geoPointValue.longitude)===ht(a.geoPointValue.longitude)}(n,e);case 2:return function(o,a){if("integerValue"in o&&"integerValue"in a)return ht(o.integerValue)===ht(a.integerValue);if("doubleValue"in o&&"doubleValue"in a){const u=ht(o.doubleValue),d=ht(a.doubleValue);return u===d?Fc(u)===Fc(d):isNaN(u)&&isNaN(d)}return!1}(n,e);case 9:return jo(n.arrayValue.values||[],e.arrayValue.values||[],gr);case 10:case 11:return function(o,a){const u=o.mapValue.fields||{},d=a.mapValue.fields||{};if(m_(u)!==m_(d))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(d[f]===void 0||!gr(u[f],d[f])))return!1;return!0}(n,e);default:return Ie(52216,{left:n})}}function Rl(n,e){return(n.values||[]).find(t=>gr(t,e))!==void 0}function Bo(n,e){if(n===e)return 0;const t=Vi(n),r=Vi(e);if(t!==r)return be(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return be(n.booleanValue,e.booleanValue);case 2:return function(a,u){const d=ht(a.integerValue||a.doubleValue),f=ht(u.integerValue||u.doubleValue);return d<f?-1:d>f?1:d===f?0:isNaN(d)?isNaN(f)?0:-1:1}(n,e);case 3:return y_(n.timestampValue,e.timestampValue);case 4:return y_(Il(n),Il(e));case 5:return fp(n.stringValue,e.stringValue);case 6:return function(a,u){const d=Li(a),f=Li(u);return d.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(a,u){const d=a.split("/"),f=u.split("/");for(let m=0;m<d.length&&m<f.length;m++){const v=be(d[m],f[m]);if(v!==0)return v}return be(d.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,u){const d=be(ht(a.latitude),ht(u.latitude));return d!==0?d:be(ht(a.longitude),ht(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return v_(n.arrayValue,e.arrayValue);case 10:return function(a,u){var d,f,m,v;const w=a.fields||{},E=u.fields||{},P=(d=w[jc])===null||d===void 0?void 0:d.arrayValue,C=(f=E[jc])===null||f===void 0?void 0:f.arrayValue,L=be(((m=P==null?void 0:P.values)===null||m===void 0?void 0:m.length)||0,((v=C==null?void 0:C.values)===null||v===void 0?void 0:v.length)||0);return L!==0?L:v_(P,C)}(n.mapValue,e.mapValue);case 11:return function(a,u){if(a===fc.mapValue&&u===fc.mapValue)return 0;if(a===fc.mapValue)return 1;if(u===fc.mapValue)return-1;const d=a.fields||{},f=Object.keys(d),m=u.fields||{},v=Object.keys(m);f.sort(),v.sort();for(let w=0;w<f.length&&w<v.length;++w){const E=fp(f[w],v[w]);if(E!==0)return E;const P=Bo(d[f[w]],m[v[w]]);if(P!==0)return P}return be(f.length,v.length)}(n.mapValue,e.mapValue);default:throw Ie(23264,{Pe:t})}}function y_(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return be(n,e);const t=Oi(n),r=Oi(e),o=be(t.seconds,r.seconds);return o!==0?o:be(t.nanos,r.nanos)}function v_(n,e){const t=n.values||[],r=e.values||[];for(let o=0;o<t.length&&o<r.length;++o){const a=Bo(t[o],r[o]);if(a)return a}return be(t.length,r.length)}function zo(n){return pp(n)}function pp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Oi(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Li(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return _e.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",o=!0;for(const a of t.values||[])o?o=!1:r+=",",r+=pp(a);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let o="{",a=!0;for(const u of r)a?a=!1:o+=",",o+=`${u}:${pp(t.fields[u])}`;return o+"}"}(n.mapValue):Ie(61005,{value:n})}function Ic(n){switch(Vi(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ph(n);return e?16+Ic(e):16;case 5:return 2*n.stringValue.length;case 6:return Li(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((o,a)=>o+Ic(a),0)}(n.arrayValue);case 10:case 11:return function(r){let o=0;return Ui(r.fields,(a,u)=>{o+=a.length+Ic(u)}),o}(n.mapValue);default:throw Ie(13486,{value:n})}}function __(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function mp(n){return!!n&&"integerValue"in n}function Xp(n){return!!n&&"arrayValue"in n}function w_(n){return!!n&&"nullValue"in n}function E_(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Sc(n){return!!n&&"mapValue"in n}function $P(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[Yw])===null||t===void 0?void 0:t.stringValue)===Xw}function dl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ui(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=dl(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=dl(n.arrayValue.values[t]);return e}return Object.assign({},n)}function qP(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===zP}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.value=e}static empty(){return new on({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Sc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=dl(t)}setAll(e){let t=Ot.emptyPath(),r={},o=[];e.forEach((u,d)=>{if(!t.isImmediateParentOf(d)){const f=this.getFieldsMap(t);this.applyChanges(f,r,o),r={},o=[],t=d.popLast()}u?r[d.lastSegment()]=dl(u):o.push(d.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,o)}delete(e){const t=this.field(e.popLast());Sc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return gr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];Sc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Ui(t,(o,a)=>e[o]=a);for(const o of r)delete e[o]}clone(){return new on(dl(this.value))}}function Zw(n){const e=[];return Ui(n.fields,(t,r)=>{const o=new Ot([t]);if(Sc(r)){const a=Zw(r.mapValue).fields;if(a.length===0)e.push(o);else for(const u of a)e.push(o.child(u))}else e.push(o)}),new gn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e,t,r,o,a,u,d){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.createTime=a,this.data=u,this.documentState=d}static newInvalidDocument(e){return new zt(e,0,Re.min(),Re.min(),Re.min(),on.empty(),0)}static newFoundDocument(e,t,r,o){return new zt(e,1,t,Re.min(),r,o,0)}static newNoDocument(e,t){return new zt(e,2,t,Re.min(),Re.min(),on.empty(),0)}static newUnknownDocument(e,t){return new zt(e,3,t,Re.min(),Re.min(),on.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=on.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=on.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof zt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new zt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(e,t){this.position=e,this.inclusive=t}}function T_(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const a=e[o],u=n.position[o];if(a.field.isKeyField()?r=_e.comparator(_e.fromName(u.referenceValue),t.key):r=Bo(u,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function I_(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!gr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(e,t="asc"){this.field=e,this.dir=t}}function HP(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{}class mt extends eE{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new KP(e,t,r):t==="array-contains"?new JP(e,r):t==="in"?new YP(e,r):t==="not-in"?new XP(e,r):t==="array-contains-any"?new ZP(e,r):new mt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new GP(e,r):new QP(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Bo(t,this.value)):t!==null&&Vi(this.value)===Vi(t)&&this.matchesComparison(Bo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ie(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Kn extends eE{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new Kn(e,t)}matches(e){return tE(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function tE(n){return n.op==="and"}function nE(n){return WP(n)&&tE(n)}function WP(n){for(const e of n.filters)if(e instanceof Kn)return!1;return!0}function gp(n){if(n instanceof mt)return n.field.canonicalString()+n.op.toString()+zo(n.value);if(nE(n))return n.filters.map(e=>gp(e)).join(",");{const e=n.filters.map(t=>gp(t)).join(",");return`${n.op}(${e})`}}function rE(n,e){return n instanceof mt?function(r,o){return o instanceof mt&&r.op===o.op&&r.field.isEqual(o.field)&&gr(r.value,o.value)}(n,e):n instanceof Kn?function(r,o){return o instanceof Kn&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce((a,u,d)=>a&&rE(u,o.filters[d]),!0):!1}(n,e):void Ie(19439)}function iE(n){return n instanceof mt?function(t){return`${t.field.canonicalString()} ${t.op} ${zo(t.value)}`}(n):n instanceof Kn?function(t){return t.op.toString()+" {"+t.getFilters().map(iE).join(" ,")+"}"}(n):"Filter"}class KP extends mt{constructor(e,t,r){super(e,t,r),this.key=_e.fromName(r.referenceValue)}matches(e){const t=_e.comparator(e.key,this.key);return this.matchesComparison(t)}}class GP extends mt{constructor(e,t){super(e,"in",t),this.keys=sE("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class QP extends mt{constructor(e,t){super(e,"not-in",t),this.keys=sE("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function sE(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>_e.fromName(r.referenceValue))}class JP extends mt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Xp(t)&&Rl(t.arrayValue,this.value)}}class YP extends mt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Rl(this.value.arrayValue,t)}}class XP extends mt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Rl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Rl(this.value.arrayValue,t)}}class ZP extends mt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Xp(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Rl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(e,t=null,r=[],o=[],a=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=a,this.startAt=u,this.endAt=d,this.Ie=null}}function S_(n,e=null,t=[],r=[],o=null,a=null,u=null){return new ex(n,e,t,r,o,a,u)}function Zp(n){const e=Ae(n);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>gp(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),fh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>zo(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>zo(r)).join(",")),e.Ie=t}return e.Ie}function em(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!HP(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!rE(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!I_(n.startAt,e.startAt)&&I_(n.endAt,e.endAt)}function yp(n){return _e.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e,t=null,r=[],o=[],a=null,u="F",d=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=a,this.limitType=u,this.startAt=d,this.endAt=f,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function tx(n,e,t,r,o,a,u,d){return new na(n,e,t,r,o,a,u,d)}function tm(n){return new na(n)}function R_(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function oE(n){return n.collectionGroup!==null}function fl(n){const e=Ae(n);if(e.Ee===null){e.Ee=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ee.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new Tt(Ot.comparator);return u.filters.forEach(f=>{f.getFlattenedFilters().forEach(m=>{m.isInequality()&&(d=d.add(m.field))})}),d})(e).forEach(a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ee.push(new Al(a,r))}),t.has(Ot.keyField().canonicalString())||e.Ee.push(new Al(Ot.keyField(),r))}return e.Ee}function dr(n){const e=Ae(n);return e.de||(e.de=nx(e,fl(n))),e.de}function nx(n,e){if(n.limitType==="F")return S_(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(o=>{const a=o.dir==="desc"?"asc":"desc";return new Al(o.field,a)});const t=n.endAt?new Bc(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Bc(n.startAt.position,n.startAt.inclusive):null;return S_(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function vp(n,e){const t=n.filters.concat([e]);return new na(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function _p(n,e,t){return new na(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function mh(n,e){return em(dr(n),dr(e))&&n.limitType===e.limitType}function aE(n){return`${Zp(dr(n))}|lt:${n.limitType}`}function ko(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(o=>iE(o)).join(", ")}]`),fh(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(o=>function(u){return`${u.field.canonicalString()} (${u.dir})`}(o)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(o=>zo(o)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(o=>zo(o)).join(",")),`Target(${r})`}(dr(n))}; limitType=${n.limitType})`}function gh(n,e){return e.isFoundDocument()&&function(r,o){const a=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):_e.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(n,e)&&function(r,o){for(const a of fl(r))if(!a.field.isKeyField()&&o.data.field(a.field)===null)return!1;return!0}(n,e)&&function(r,o){for(const a of r.filters)if(!a.matches(o))return!1;return!0}(n,e)&&function(r,o){return!(r.startAt&&!function(u,d,f){const m=T_(u,d,f);return u.inclusive?m<=0:m<0}(r.startAt,fl(r),o)||r.endAt&&!function(u,d,f){const m=T_(u,d,f);return u.inclusive?m>=0:m>0}(r.endAt,fl(r),o))}(n,e)}function rx(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function lE(n){return(e,t)=>{let r=!1;for(const o of fl(n)){const a=ix(o,e,t);if(a!==0)return a;r=r||o.field.isKeyField()}return 0}}function ix(n,e,t){const r=n.field.isKeyField()?_e.comparator(e.key,t.key):function(a,u,d){const f=u.data.field(a),m=d.data.field(a);return f!==null&&m!==null?Bo(f,m):Ie(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ie(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[o,a]of r)if(this.equalsFn(o,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return void(o[a]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ui(this.inner,(t,r)=>{for(const[o,a]of r)e(o,a)})}isEmpty(){return Hw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sx=new it(_e.comparator);function qr(){return sx}const uE=new it(_e.comparator);function ll(...n){let e=uE;for(const t of n)e=e.insert(t.key,t);return e}function cE(n){let e=uE;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function _s(){return pl()}function hE(){return pl()}function pl(){return new ks(n=>n.toString(),(n,e)=>n.isEqual(e))}const ox=new it(_e.comparator),ax=new Tt(_e.comparator);function Ve(...n){let e=ax;for(const t of n)e=e.add(t);return e}const lx=new Tt(be);function ux(){return lx}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nm(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fc(e)?"-0":e}}function dE(n){return{integerValue:""+n}}function cx(n,e){return MP(e)?dE(e):nm(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(){this._=void 0}}function hx(n,e,t){return n instanceof zc?function(o,a){const u={fields:{[Gw]:{stringValue:Kw},[Jw]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return a&&Yp(a)&&(a=ph(a)),a&&(u.fields[Qw]=a),{mapValue:u}}(t,e):n instanceof Cl?pE(n,e):n instanceof Pl?mE(n,e):function(o,a){const u=fE(o,a),d=A_(u)+A_(o.Re);return mp(u)&&mp(o.Re)?dE(d):nm(o.serializer,d)}(n,e)}function dx(n,e,t){return n instanceof Cl?pE(n,e):n instanceof Pl?mE(n,e):t}function fE(n,e){return n instanceof $c?function(r){return mp(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class zc extends yh{}class Cl extends yh{constructor(e){super(),this.elements=e}}function pE(n,e){const t=gE(e);for(const r of n.elements)t.some(o=>gr(o,r))||t.push(r);return{arrayValue:{values:t}}}class Pl extends yh{constructor(e){super(),this.elements=e}}function mE(n,e){let t=gE(e);for(const r of n.elements)t=t.filter(o=>!gr(o,r));return{arrayValue:{values:t}}}class $c extends yh{constructor(e,t){super(),this.serializer=e,this.Re=t}}function A_(n){return ht(n.integerValue||n.doubleValue)}function gE(n){return Xp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function fx(n,e){return n.field.isEqual(e.field)&&function(r,o){return r instanceof Cl&&o instanceof Cl||r instanceof Pl&&o instanceof Pl?jo(r.elements,o.elements,gr):r instanceof $c&&o instanceof $c?gr(r.Re,o.Re):r instanceof zc&&o instanceof zc}(n.transform,e.transform)}class px{constructor(e,t){this.version=e,this.transformResults=t}}class xn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new xn}static exists(e){return new xn(void 0,e)}static updateTime(e){return new xn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Rc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class vh{}function yE(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new rm(n.key,xn.none()):new Fl(n.key,n.data,xn.none());{const t=n.data,r=on.empty();let o=new Tt(Ot.comparator);for(let a of e.fields)if(!o.has(a)){let u=t.field(a);u===null&&a.length>1&&(a=a.popLast(),u=t.field(a)),u===null?r.delete(a):r.set(a,u),o=o.add(a)}return new ji(n.key,r,new gn(o.toArray()),xn.none())}}function mx(n,e,t){n instanceof Fl?function(o,a,u){const d=o.value.clone(),f=P_(o.fieldTransforms,a,u.transformResults);d.setAll(f),a.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,e,t):n instanceof ji?function(o,a,u){if(!Rc(o.precondition,a))return void a.convertToUnknownDocument(u.version);const d=P_(o.fieldTransforms,a,u.transformResults),f=a.data;f.setAll(vE(o)),f.setAll(d),a.convertToFoundDocument(u.version,f).setHasCommittedMutations()}(n,e,t):function(o,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()}(0,e,t)}function ml(n,e,t,r){return n instanceof Fl?function(a,u,d,f){if(!Rc(a.precondition,u))return d;const m=a.value.clone(),v=x_(a.fieldTransforms,f,u);return m.setAll(v),u.convertToFoundDocument(u.version,m).setHasLocalMutations(),null}(n,e,t,r):n instanceof ji?function(a,u,d,f){if(!Rc(a.precondition,u))return d;const m=x_(a.fieldTransforms,f,u),v=u.data;return v.setAll(vE(a)),v.setAll(m),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(w=>w.field))}(n,e,t,r):function(a,u,d){return Rc(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d}(n,e,t)}function gx(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),a=fE(r.transform,o||null);a!=null&&(t===null&&(t=on.empty()),t.set(r.field,a))}return t||null}function C_(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&jo(r,o,(a,u)=>fx(a,u))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Fl extends vh{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class ji extends vh{constructor(e,t,r,o,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function vE(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function P_(n,e,t){const r=new Map;qe(n.length===t.length,32656,{Ve:t.length,me:n.length});for(let o=0;o<t.length;o++){const a=n[o],u=a.transform,d=e.data.field(a.field);r.set(a.field,dx(u,d,t[o]))}return r}function x_(n,e,t){const r=new Map;for(const o of n){const a=o.transform,u=t.data.field(o.field);r.set(o.field,hx(a,u,e))}return r}class rm extends vh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class yx extends vh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const a=this.mutations[o];a.key.isEqual(e.key)&&mx(a,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=ml(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=ml(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=hE();return this.mutations.forEach(o=>{const a=e.get(o.key),u=a.overlayedDocument;let d=this.applyToLocalView(u,a.mutatedFields);d=t.has(o.key)?null:d;const f=yE(u,d);f!==null&&r.set(o.key,f),u.isValidDocument()||u.convertToNoDocument(Re.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ve())}isEqual(e){return this.batchId===e.batchId&&jo(this.mutations,e.mutations,(t,r)=>C_(t,r))&&jo(this.baseMutations,e.baseMutations,(t,r)=>C_(t,r))}}class im{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){qe(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let o=function(){return ox}();const a=e.mutations;for(let u=0;u<a.length;u++)o=o.insert(a[u].key,r[u].version);return new im(e,t,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pt,Ue;function Ex(n){switch(n){case Z.OK:return Ie(64938);case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0;default:return Ie(15467,{code:n})}}function _E(n){if(n===void 0)return $r("GRPC error has no .code"),Z.UNKNOWN;switch(n){case pt.OK:return Z.OK;case pt.CANCELLED:return Z.CANCELLED;case pt.UNKNOWN:return Z.UNKNOWN;case pt.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case pt.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case pt.INTERNAL:return Z.INTERNAL;case pt.UNAVAILABLE:return Z.UNAVAILABLE;case pt.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case pt.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case pt.NOT_FOUND:return Z.NOT_FOUND;case pt.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case pt.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case pt.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case pt.ABORTED:return Z.ABORTED;case pt.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case pt.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case pt.DATA_LOSS:return Z.DATA_LOSS;default:return Ie(39323,{code:n})}}(Ue=pt||(pt={}))[Ue.OK=0]="OK",Ue[Ue.CANCELLED=1]="CANCELLED",Ue[Ue.UNKNOWN=2]="UNKNOWN",Ue[Ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ue[Ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ue[Ue.NOT_FOUND=5]="NOT_FOUND",Ue[Ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ue[Ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ue[Ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ue[Ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ue[Ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ue[Ue.ABORTED=10]="ABORTED",Ue[Ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ue[Ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ue[Ue.INTERNAL=13]="INTERNAL",Ue[Ue.UNAVAILABLE=14]="UNAVAILABLE",Ue[Ue.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tx=new Ni([4294967295,4294967295],0);function k_(n){const e=zw().encode(n),t=new Ow;return t.update(e),new Uint8Array(t.digest())}function N_(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Ni([t,r],0),new Ni([o,a],0)]}class sm{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new ul(`Invalid padding: ${t}`);if(r<0)throw new ul(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ul(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new ul(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=Ni.fromNumber(this.pe)}we(e,t,r){let o=e.add(t.multiply(Ni.fromNumber(r)));return o.compare(Tx)===1&&(o=new Ni([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ye).toNumber()}Se(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const t=k_(e),[r,o]=N_(t);for(let a=0;a<this.hashCount;a++){const u=this.we(r,o,a);if(!this.Se(u))return!1}return!0}static create(e,t,r){const o=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new sm(a,o,t);return r.forEach(d=>u.insert(d)),u}insert(e){if(this.pe===0)return;const t=k_(e),[r,o]=N_(t);for(let a=0;a<this.hashCount;a++){const u=this.we(r,o,a);this.be(u)}}be(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class ul extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(e,t,r,o,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,Ul.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new _h(Re.min(),o,new it(be),qr(),Ve())}}class Ul{constructor(e,t,r,o,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Ul(r,t,Ve(),Ve(),Ve())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e,t,r,o){this.De=e,this.removedTargetIds=t,this.key=r,this.ve=o}}class wE{constructor(e,t){this.targetId=e,this.Ce=t}}class EE{constructor(e,t,r=Lt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class b_{constructor(){this.Fe=0,this.Me=D_(),this.xe=Lt.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Ve(),t=Ve(),r=Ve();return this.Me.forEach((o,a)=>{switch(a){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:Ie(38017,{changeType:a})}}),new Ul(this.xe,this.Oe,e,t,r)}Qe(){this.Ne=!1,this.Me=D_()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,qe(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class Ix{constructor(e){this.ze=e,this.je=new Map,this.He=qr(),this.Je=pc(),this.Ye=pc(),this.Ze=new it(be)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const r=this.rt(t);switch(e.state){case 0:this.it(t)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(t);break;case 3:this.it(t)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),r.ke(e.resumeToken));break;default:Ie(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((r,o)=>{this.it(o)&&t(o)})}ot(e){const t=e.targetId,r=e.Ce.count,o=this._t(t);if(o){const a=o.target;if(yp(a))if(r===0){const u=new _e(a.path);this.tt(t,u,zt.newNoDocument(u,Re.min()))}else qe(r===1,20013,{expectedCount:r});else{const u=this.ut(t);if(u!==r){const d=this.ct(e),f=d?this.lt(d,e,u):1;if(f!==0){this.st(t);const m=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,m)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:a=0}=t;let u,d;try{u=Li(r).toUint8Array()}catch(f){if(f instanceof Ww)return Uo("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{d=new sm(u,o,a)}catch(f){return Uo(f instanceof ul?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return d.pe===0?null:d}lt(e,t,r){return t.Ce.count===r-this.Tt(e,t.targetId)?0:2}Tt(e,t){const r=this.ze.getRemoteKeysForTarget(t);let o=0;return r.forEach(a=>{const u=this.ze.Pt(),d=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.tt(t,a,null),o++)}),o}It(e){const t=new Map;this.je.forEach((a,u)=>{const d=this._t(u);if(d){if(a.current&&yp(d.target)){const f=new _e(d.target.path);this.Et(f).has(u)||this.dt(u,f)||this.tt(u,f,zt.newNoDocument(f,e))}a.Le&&(t.set(u,a.qe()),a.Qe())}});let r=Ve();this.Ye.forEach((a,u)=>{let d=!0;u.forEachWhile(f=>{const m=this._t(f);return!m||m.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(r=r.add(a))}),this.He.forEach((a,u)=>u.setReadTime(e));const o=new _h(e,t,this.Ze,this.He,r);return this.He=qr(),this.Je=pc(),this.Ye=pc(),this.Ze=new it(be),o}et(e,t){if(!this.it(e))return;const r=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,r),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,r){if(!this.it(e))return;const o=this.rt(e);this.dt(e,t)?o.$e(t,1):o.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),r&&(this.He=this.He.insert(t,r))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new b_,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new Tt(be),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new Tt(be),this.Je=this.Je.insert(e,t)),t}it(e){const t=this._t(e)!==null;return t||he("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new b_),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function pc(){return new it(_e.comparator)}function D_(){return new it(_e.comparator)}const Sx={asc:"ASCENDING",desc:"DESCENDING"},Rx={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ax={and:"AND",or:"OR"};class Cx{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function wp(n,e){return n.useProto3Json||fh(e)?e:{value:e}}function qc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function TE(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Px(n,e){return qc(n,e.toTimestamp())}function fr(n){return qe(!!n,49232),Re.fromTimestamp(function(t){const r=Oi(t);return new Et(r.seconds,r.nanos)}(n))}function om(n,e){return Ep(n,e).canonicalString()}function Ep(n,e){const t=function(o){return new Xe(["projects",o.projectId,"databases",o.database])}(n).child("documents");return e===void 0?t:t.child(e)}function IE(n){const e=Xe.fromString(n);return qe(PE(e),10190,{key:e.toString()}),e}function Tp(n,e){return om(n.databaseId,e.path)}function Hf(n,e){const t=IE(e);if(t.get(1)!==n.databaseId.projectId)throw new de(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new de(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new _e(RE(t))}function SE(n,e){return om(n.databaseId,e)}function xx(n){const e=IE(n);return e.length===4?Xe.emptyPath():RE(e)}function Ip(n){return new Xe(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function RE(n){return qe(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function O_(n,e,t){return{name:Tp(n,e),fields:t.value.mapValue.fields}}function kx(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Ie(39313,{state:m})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],a=function(m,v){return m.useProto3Json?(qe(v===void 0||typeof v=="string",58123),Lt.fromBase64String(v||"")):(qe(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),Lt.fromUint8Array(v||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&function(m){const v=m.code===void 0?Z.UNKNOWN:_E(m.code);return new de(v,m.message||"")}(u);t=new EE(r,o,a,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=Hf(n,r.document.name),a=fr(r.document.updateTime),u=r.document.createTime?fr(r.document.createTime):Re.min(),d=new on({mapValue:{fields:r.document.fields}}),f=zt.newFoundDocument(o,a,u,d),m=r.targetIds||[],v=r.removedTargetIds||[];t=new Ac(m,v,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=Hf(n,r.document),a=r.readTime?fr(r.readTime):Re.min(),u=zt.newNoDocument(o,a),d=r.removedTargetIds||[];t=new Ac([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=Hf(n,r.document),a=r.removedTargetIds||[];t=new Ac([],a,o,null)}else{if(!("filter"in e))return Ie(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:a}=r,u=new wx(o,a),d=r.targetId;t=new wE(d,u)}}return t}function Nx(n,e){let t;if(e instanceof Fl)t={update:O_(n,e.key,e.value)};else if(e instanceof rm)t={delete:Tp(n,e.key)};else if(e instanceof ji)t={update:O_(n,e.key,e.data),updateMask:jx(e.fieldMask)};else{if(!(e instanceof yx))return Ie(16599,{ft:e.type});t={verify:Tp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(a,u){const d=u.transform;if(d instanceof zc)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Cl)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Pl)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof $c)return{fieldPath:u.field.canonicalString(),increment:d.Re};throw Ie(20930,{transform:u.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(o,a){return a.updateTime!==void 0?{updateTime:Px(o,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Ie(27497)}(n,e.precondition)),t}function bx(n,e){return n&&n.length>0?(qe(e!==void 0,14353),n.map(t=>function(o,a){let u=o.updateTime?fr(o.updateTime):fr(a);return u.isEqual(Re.min())&&(u=fr(a)),new px(u,o.transformResults||[])}(t,e))):[]}function Dx(n,e){return{documents:[SE(n,e.path)]}}function Ox(n,e){const t={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=SE(n,o);const a=function(m){if(m.length!==0)return CE(Kn.create(m,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const u=function(m){if(m.length!==0)return m.map(v=>function(E){return{field:No(E.field),direction:Mx(E.dir)}}(v))}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=wp(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(e.endAt)),{gt:t,parent:o}}function Lx(n){let e=xx(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){qe(r===1,65062);const v=t.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let a=[];t.where&&(a=function(w){const E=AE(w);return E instanceof Kn&&nE(E)?E.getFilters():[E]}(t.where));let u=[];t.orderBy&&(u=function(w){return w.map(E=>function(C){return new Al(bo(C.field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(E))}(t.orderBy));let d=null;t.limit&&(d=function(w){let E;return E=typeof w=="object"?w.value:w,fh(E)?null:E}(t.limit));let f=null;t.startAt&&(f=function(w){const E=!!w.before,P=w.values||[];return new Bc(P,E)}(t.startAt));let m=null;return t.endAt&&(m=function(w){const E=!w.before,P=w.values||[];return new Bc(P,E)}(t.endAt)),tx(e,o,u,a,d,"F",f,m)}function Vx(n,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ie(28987,{purpose:o})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function AE(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=bo(t.unaryFilter.field);return mt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=bo(t.unaryFilter.field);return mt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=bo(t.unaryFilter.field);return mt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=bo(t.unaryFilter.field);return mt.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ie(61313);default:return Ie(60726)}}(n):n.fieldFilter!==void 0?function(t){return mt.create(bo(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ie(58110);default:return Ie(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Kn.create(t.compositeFilter.filters.map(r=>AE(r)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ie(1026)}}(t.compositeFilter.op))}(n):Ie(30097,{filter:n})}function Mx(n){return Sx[n]}function Fx(n){return Rx[n]}function Ux(n){return Ax[n]}function No(n){return{fieldPath:n.canonicalString()}}function bo(n){return Ot.fromServerFormat(n.fieldPath)}function CE(n){return n instanceof mt?function(t){if(t.op==="=="){if(E_(t.value))return{unaryFilter:{field:No(t.field),op:"IS_NAN"}};if(w_(t.value))return{unaryFilter:{field:No(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(E_(t.value))return{unaryFilter:{field:No(t.field),op:"IS_NOT_NAN"}};if(w_(t.value))return{unaryFilter:{field:No(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:No(t.field),op:Fx(t.op),value:t.value}}}(n):n instanceof Kn?function(t){const r=t.getFilters().map(o=>CE(o));return r.length===1?r[0]:{compositeFilter:{op:Ux(t.op),filters:r}}}(n):Ie(54877,{filter:n})}function jx(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function PE(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e,t,r,o,a=Re.min(),u=Re.min(),d=Lt.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=f}withSequenceNumber(e){return new Ai(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ai(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ai(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ai(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(e){this.wt=e}}function zx(n){const e=Lx({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?_p(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{constructor(){this.Cn=new qx}addToCollectionParentIndex(e,t){return this.Cn.add(t),ee.resolve()}getCollectionParents(e,t){return ee.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ee.resolve()}deleteFieldIndex(e,t){return ee.resolve()}deleteAllFieldIndexes(e){return ee.resolve()}createTargetIndexes(e,t){return ee.resolve()}getDocumentsMatchingTarget(e,t){return ee.resolve(null)}getIndexType(e,t){return ee.resolve(0)}getFieldIndexes(e,t){return ee.resolve([])}getNextCollectionGroupToUpdate(e){return ee.resolve(null)}getMinOffset(e,t){return ee.resolve(Di.min())}getMinOffsetFromCollectionGroup(e,t){return ee.resolve(Di.min())}updateCollectionGroup(e,t,r){return ee.resolve()}updateIndexEntries(e,t){return ee.resolve()}}class qx{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new Tt(Xe.comparator),a=!o.has(r);return this.index[t]=o.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Tt(Xe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},xE=41943040;class sn{static withCacheSize(e){return new sn(e,sn.DEFAULT_COLLECTION_PERCENTILE,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sn.DEFAULT_COLLECTION_PERCENTILE=10,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,sn.DEFAULT=new sn(xE,sn.DEFAULT_COLLECTION_PERCENTILE,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),sn.DISABLED=new sn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new $o(0)}static lr(){return new $o(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V_="LruGarbageCollector",Hx=1048576;function M_([n,e],[t,r]){const o=be(n,t);return o===0?be(e,r):o}class Wx{constructor(e){this.Er=e,this.buffer=new Tt(M_),this.dr=0}Ar(){return++this.dr}Rr(e){const t=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();M_(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Kx{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){he(V_,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ta(t)?he(V_,"Ignoring IndexedDB error during garbage collection: ",t):await ea(t)}await this.mr(3e5)})}}class Gx{constructor(e,t){this.gr=e,this.params=t}calculateTargetCount(e,t){return this.gr.pr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return ee.resolve(dh.le);const r=new Wx(t);return this.gr.forEachTarget(e,o=>r.Rr(o.sequenceNumber)).next(()=>this.gr.yr(e,o=>r.Rr(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.gr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.gr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(he("LruGarbageCollector","Garbage collection skipped; disabled"),ee.resolve(L_)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),L_):this.wr(e,t))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,t){let r,o,a,u,d,f,m;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(w=>(w>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),o=this.params.maximumSequenceNumbersToCollect):o=w,u=Date.now(),this.nthSequenceNumber(e,o))).next(w=>(r=w,d=Date.now(),this.removeTargets(e,r,t))).next(w=>(a=w,f=Date.now(),this.removeOrphanedDocuments(e,r))).next(w=>(m=Date.now(),xo()<=Le.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${o} in `+(d-u)+`ms
	Removed ${a} targets in `+(f-d)+`ms
	Removed ${w} documents in `+(m-f)+`ms
Total Duration: ${m-v}ms`),ee.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:a,documentsRemoved:w})))}}function Qx(n,e){return new Gx(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(){this.changes=new ks(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,zt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ee.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(r=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(r!==null&&ml(r.mutation,o,gn.empty(),Et.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ve()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ve()){const o=_s();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,r).next(a=>{let u=ll();return a.forEach((d,f)=>{u=u.insert(d,f.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const r=_s();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ve()))}populateOverlays(e,t,r){const o=[];return r.forEach(a=>{t.has(a)||o.push(a)}),this.documentOverlayCache.getOverlays(e,o).next(a=>{a.forEach((u,d)=>{t.set(u,d)})})}computeViews(e,t,r,o){let a=qr();const u=pl(),d=function(){return pl()}();return t.forEach((f,m)=>{const v=r.get(m.key);o.has(m.key)&&(v===void 0||v.mutation instanceof ji)?a=a.insert(m.key,m):v!==void 0?(u.set(m.key,v.mutation.getFieldMask()),ml(v.mutation,m,v.mutation.getFieldMask(),Et.now())):u.set(m.key,gn.empty())}),this.recalculateAndSaveOverlays(e,a).next(f=>(f.forEach((m,v)=>u.set(m,v)),t.forEach((m,v)=>{var w;return d.set(m,new Yx(v,(w=u.get(m))!==null&&w!==void 0?w:null))}),d))}recalculateAndSaveOverlays(e,t){const r=pl();let o=new it((u,d)=>u-d),a=Ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const d of u)d.keys().forEach(f=>{const m=t.get(f);if(m===null)return;let v=r.get(f)||gn.empty();v=d.applyToLocalView(m,v),r.set(f,v);const w=(o.get(d.batchId)||Ve()).add(f);o=o.insert(d.batchId,w)})}).next(()=>{const u=[],d=o.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),m=f.key,v=f.value,w=hE();v.forEach(E=>{if(!a.has(E)){const P=yE(t.get(E),r.get(E));P!==null&&w.set(E,P),a=a.add(E)}}),u.push(this.documentOverlayCache.saveOverlays(e,m,w))}return ee.waitFor(u)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,o){return function(u){return _e.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):oE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,o):this.getDocumentsMatchingCollectionQuery(e,t,r,o)}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next(a=>{const u=o-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-a.size):ee.resolve(_s());let d=Tl,f=a;return u.next(m=>ee.forEach(m,(v,w)=>(d<w.largestBatchId&&(d=w.largestBatchId),a.get(v)?ee.resolve():this.remoteDocumentCache.getEntry(e,v).next(E=>{f=f.insert(v,E)}))).next(()=>this.populateOverlays(e,m,a)).next(()=>this.computeViews(e,f,m,Ve())).next(v=>({batchId:d,changes:cE(v)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new _e(t)).next(r=>{let o=ll();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,r,o){const a=t.collectionGroup;let u=ll();return this.indexManager.getCollectionParents(e,a).next(d=>ee.forEach(d,f=>{const m=function(w,E){return new na(E,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)}(t,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,m,r,o).next(v=>{v.forEach((w,E)=>{u=u.insert(w,E)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r,o){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,o))).next(u=>{a.forEach((f,m)=>{const v=m.getKey();u.get(v)===null&&(u=u.insert(v,zt.newInvalidDocument(v)))});let d=ll();return u.forEach((f,m)=>{const v=a.get(f);v!==void 0&&ml(v.mutation,m,gn.empty(),Et.now()),gh(t,m)&&(d=d.insert(f,m))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,t){return ee.resolve(this.kr.get(t))}saveBundleMetadata(e,t){return this.kr.set(t.id,function(o){return{id:o.id,version:o.version,createTime:fr(o.createTime)}}(t)),ee.resolve()}getNamedQuery(e,t){return ee.resolve(this.qr.get(t))}saveNamedQuery(e,t){return this.qr.set(t.name,function(o){return{name:o.name,query:zx(o.bundledQuery),readTime:fr(o.readTime)}}(t)),ee.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(){this.overlays=new it(_e.comparator),this.Qr=new Map}getOverlay(e,t){return ee.resolve(this.overlays.get(t))}getOverlays(e,t){const r=_s();return ee.forEach(t,o=>this.getOverlay(e,o).next(a=>{a!==null&&r.set(o,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((o,a)=>{this.bt(e,t,a)}),ee.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.Qr.get(r);return o!==void 0&&(o.forEach(a=>this.overlays=this.overlays.remove(a)),this.Qr.delete(r)),ee.resolve()}getOverlaysForCollection(e,t,r){const o=_s(),a=t.length+1,u=new _e(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const f=d.getNext().value,m=f.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===a&&f.largestBatchId>r&&o.set(f.getKey(),f)}return ee.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let a=new it((m,v)=>m-v);const u=this.overlays.getIterator();for(;u.hasNext();){const m=u.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>r){let v=a.get(m.largestBatchId);v===null&&(v=_s(),a=a.insert(m.largestBatchId,v)),v.set(m.getKey(),m)}}const d=_s(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((m,v)=>d.set(m,v)),!(d.size()>=o)););return ee.resolve(d)}bt(e,t,r){const o=this.overlays.get(r.key);if(o!==null){const u=this.Qr.get(o.largestBatchId).delete(r.key);this.Qr.set(o.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new _x(t,r));let a=this.Qr.get(t);a===void 0&&(a=Ve(),this.Qr.set(t,a)),this.Qr.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{constructor(){this.sessionToken=Lt.EMPTY_BYTE_STRING}getSessionToken(e){return ee.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ee.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(){this.$r=new Tt(Pt.Ur),this.Kr=new Tt(Pt.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,t){const r=new Pt(e,t);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.zr(new Pt(e,t))}jr(e,t){e.forEach(r=>this.removeReference(r,t))}Hr(e){const t=new _e(new Xe([])),r=new Pt(t,e),o=new Pt(t,e+1),a=[];return this.Kr.forEachInRange([r,o],u=>{this.zr(u),a.push(u.key)}),a}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const t=new _e(new Xe([])),r=new Pt(t,e),o=new Pt(t,e+1);let a=Ve();return this.Kr.forEachInRange([r,o],u=>{a=a.add(u.key)}),a}containsKey(e){const t=new Pt(e,0),r=this.$r.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Pt{constructor(e,t){this.key=e,this.Zr=t}static Ur(e,t){return _e.comparator(e.key,t.key)||be(e.Zr,t.Zr)}static Wr(e,t){return be(e.Zr,t.Zr)||_e.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nr=1,this.Xr=new Tt(Pt.Ur)}checkEmpty(e){return ee.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,o){const a=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new vx(a,t,r,o);this.mutationQueue.push(u);for(const d of o)this.Xr=this.Xr.add(new Pt(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ee.resolve(u)}lookupMutationBatch(e,t){return ee.resolve(this.ei(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=this.ti(r),a=o<0?0:o;return ee.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ee.resolve(this.mutationQueue.length===0?Jp:this.nr-1)}getAllMutationBatches(e){return ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Pt(t,0),o=new Pt(t,Number.POSITIVE_INFINITY),a=[];return this.Xr.forEachInRange([r,o],u=>{const d=this.ei(u.Zr);a.push(d)}),ee.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Tt(be);return t.forEach(o=>{const a=new Pt(o,0),u=new Pt(o,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([a,u],d=>{r=r.add(d.Zr)})}),ee.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let a=r;_e.isDocumentKey(a)||(a=a.child(""));const u=new Pt(new _e(a),0);let d=new Tt(be);return this.Xr.forEachWhile(f=>{const m=f.key.path;return!!r.isPrefixOf(m)&&(m.length===o&&(d=d.add(f.Zr)),!0)},u),ee.resolve(this.ni(d))}ni(e){const t=[];return e.forEach(r=>{const o=this.ei(r);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){qe(this.ri(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return ee.forEach(t.mutations,o=>{const a=new Pt(o.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,t){const r=new Pt(t,0),o=this.Xr.firstAfterOrEqual(r);return ee.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ee.resolve()}ri(e,t){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const t=this.ti(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(e){this.ii=e,this.docs=function(){return new it(_e.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),a=o?o.size:0,u=this.ii(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ee.resolve(r?r.document.mutableCopy():zt.newInvalidDocument(t))}getEntries(e,t){let r=qr();return t.forEach(o=>{const a=this.docs.get(o);r=r.insert(o,a?a.document.mutableCopy():zt.newInvalidDocument(o))}),ee.resolve(r)}getDocumentsMatchingQuery(e,t,r,o){let a=qr();const u=t.path,d=new _e(u.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(d);for(;f.hasNext();){const{key:m,value:{document:v}}=f.getNext();if(!u.isPrefixOf(m.path))break;m.path.length>u.length+1||DP(bP(v),r)<=0||(o.has(v.key)||gh(t,v))&&(a=a.insert(v.key,v.mutableCopy()))}return ee.resolve(a)}getAllFromCollectionGroup(e,t,r,o){Ie(9500)}si(e,t){return ee.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new ik(this)}getSize(e){return ee.resolve(this.size)}}class ik extends Jx{constructor(e){super(),this.Br=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Br.addEntry(e,o)):this.Br.removeEntry(r)}),ee.waitFor(t)}getFromCache(e,t){return this.Br.getEntry(e,t)}getAllFromCache(e,t){return this.Br.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{constructor(e){this.persistence=e,this.oi=new ks(t=>Zp(t),em),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this._i=0,this.ai=new am,this.targetCount=0,this.ui=$o.cr()}forEachTarget(e,t){return this.oi.forEach((r,o)=>t(o)),ee.resolve()}getLastRemoteSnapshotVersion(e){return ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ee.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),ee.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this._i&&(this._i=t),ee.resolve()}Tr(e){this.oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ui=new $o(t),this.highestTargetId=t),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,t){return this.Tr(t),this.targetCount+=1,ee.resolve()}updateTargetData(e,t){return this.Tr(t),ee.resolve()}removeTargetData(e,t){return this.oi.delete(t.target),this.ai.Hr(t.targetId),this.targetCount-=1,ee.resolve()}removeTargets(e,t,r){let o=0;const a=[];return this.oi.forEach((u,d)=>{d.sequenceNumber<=t&&r.get(d.targetId)===null&&(this.oi.delete(u),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)}),ee.waitFor(a).next(()=>o)}getTargetCount(e){return ee.resolve(this.targetCount)}getTargetData(e,t){const r=this.oi.get(t)||null;return ee.resolve(r)}addMatchingKeys(e,t,r){return this.ai.Gr(t,r),ee.resolve()}removeMatchingKeys(e,t,r){this.ai.jr(t,r);const o=this.persistence.referenceDelegate,a=[];return o&&t.forEach(u=>{a.push(o.markPotentiallyOrphaned(e,u))}),ee.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.ai.Hr(t),ee.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ai.Yr(t);return ee.resolve(r)}containsKey(e,t){return ee.resolve(this.ai.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(e,t){this.ci={},this.overlays={},this.li=new dh(0),this.hi=!1,this.hi=!0,this.Pi=new tk,this.referenceDelegate=e(this),this.Ti=new sk(this),this.indexManager=new $x,this.remoteDocumentCache=function(o){return new rk(o)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new Bx(t),this.Ei=new Zx(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ek,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ci[e.toKey()];return r||(r=new nk(t,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,t,r){he("MemoryPersistence","Starting transaction:",e);const o=new ok(this.li.next());return this.referenceDelegate.di(),r(o).next(a=>this.referenceDelegate.Ai(o).next(()=>a)).toPromise().then(a=>(o.raiseOnCommittedEvent(),a))}Ri(e,t){return ee.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,t)))}}class ok extends LP{constructor(e){super(),this.currentSequenceNumber=e}}class lm{constructor(e){this.persistence=e,this.Vi=new am,this.mi=null}static fi(e){return new lm(e)}get gi(){if(this.mi)return this.mi;throw Ie(60996)}addReference(e,t,r){return this.Vi.addReference(r,t),this.gi.delete(r.toString()),ee.resolve()}removeReference(e,t,r){return this.Vi.removeReference(r,t),this.gi.add(r.toString()),ee.resolve()}markPotentiallyOrphaned(e,t){return this.gi.add(t.toString()),ee.resolve()}removeTarget(e,t){this.Vi.Hr(t.targetId).forEach(o=>this.gi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(a=>this.gi.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}di(){this.mi=new Set}Ai(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ee.forEach(this.gi,r=>{const o=_e.fromPath(r);return this.pi(e,o).next(a=>{a||t.removeEntry(o,Re.min())})}).next(()=>(this.mi=null,t.apply(e)))}updateLimboDocument(e,t){return this.pi(e,t).next(r=>{r?this.gi.delete(t.toString()):this.gi.add(t.toString())})}Ii(e){return 0}pi(e,t){return ee.or([()=>ee.resolve(this.Vi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ri(e,t)])}}class Hc{constructor(e,t){this.persistence=e,this.yi=new ks(r=>FP(r.path),(r,o)=>r.isEqual(o)),this.garbageCollector=Qx(this,t)}static fi(e,t){return new Hc(e,t)}di(){}Ai(e){return ee.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}pr(e){const t=this.Sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}Sr(e){let t=0;return this.yr(e,r=>{t++}).next(()=>t)}yr(e,t){return ee.forEach(this.yi,(r,o)=>this.Dr(e,r,o).next(a=>a?ee.resolve():t(o)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const o=this.persistence.getRemoteDocumentCache(),a=o.newChangeBuffer();return o.si(e,u=>this.Dr(e,u,t).next(d=>{d||(r++,a.removeEntry(u,Re.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.yi.set(t,e.currentSequenceNumber),ee.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.yi.set(r,e.currentSequenceNumber),ee.resolve()}removeReference(e,t,r){return this.yi.set(r,e.currentSequenceNumber),ee.resolve()}updateLimboDocument(e,t){return this.yi.set(t,e.currentSequenceNumber),ee.resolve()}Ii(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ic(e.data.value)),t}Dr(e,t,r){return ee.or([()=>this.persistence.Ri(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.yi.get(t);return ee.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.ds=r,this.As=o}static Rs(e,t){let r=Ve(),o=Ve();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:o=o.add(a.doc.key)}return new um(e,t.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return iC()?8:VP(qt())>0?6:4}()}initialize(e,t){this.ys=e,this.indexManager=t,this.Vs=!0}getDocumentsMatchingQuery(e,t,r,o){const a={result:null};return this.ws(e,t).next(u=>{a.result=u}).next(()=>{if(!a.result)return this.Ss(e,t,o,r).next(u=>{a.result=u})}).next(()=>{if(a.result)return;const u=new ak;return this.bs(e,t,u).next(d=>{if(a.result=d,this.fs)return this.Ds(e,t,u,d.size)})}).next(()=>a.result)}Ds(e,t,r,o){return r.documentReadCount<this.gs?(xo()<=Le.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",ko(t),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),ee.resolve()):(xo()<=Le.DEBUG&&he("QueryEngine","Query:",ko(t),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.ps*o?(xo()<=Le.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",ko(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,dr(t))):ee.resolve())}ws(e,t){if(R_(t))return ee.resolve(null);let r=dr(t);return this.indexManager.getIndexType(e,r).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=_p(t,null,"F"),r=dr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const u=Ve(...a);return this.ys.getDocuments(e,u).next(d=>this.indexManager.getMinOffset(e,r).next(f=>{const m=this.vs(t,d);return this.Cs(t,m,u,f.readTime)?this.ws(e,_p(t,null,"F")):this.Fs(e,m,t,f)}))})))}Ss(e,t,r,o){return R_(t)||o.isEqual(Re.min())?ee.resolve(null):this.ys.getDocuments(e,r).next(a=>{const u=this.vs(t,a);return this.Cs(t,u,r,o)?ee.resolve(null):(xo()<=Le.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),ko(t)),this.Fs(e,u,t,NP(o,Tl)).next(d=>d))})}vs(e,t){let r=new Tt(lE(e));return t.forEach((o,a)=>{gh(e,a)&&(r=r.add(a))}),r}Cs(e,t,r,o){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(o)>0)}bs(e,t,r){return xo()<=Le.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",ko(t)),this.ys.getDocumentsMatchingQuery(e,t,Di.min(),r)}Fs(e,t,r,o){return this.ys.getDocumentsMatchingQuery(e,r,o).next(a=>(t.forEach(u=>{a=a.insert(u.key,u)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cm="LocalStore",uk=3e8;class ck{constructor(e,t,r,o){this.persistence=e,this.Ms=t,this.serializer=o,this.xs=new it(be),this.Os=new ks(a=>Zp(a),em),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Xx(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.xs))}}function hk(n,e,t,r){return new ck(n,e,t,r)}async function NE(n,e){const t=Ae(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next(a=>(o=a,t.Ls(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const u=[],d=[];let f=Ve();for(const m of o){u.push(m.batchId);for(const v of m.mutations)f=f.add(v.key)}for(const m of a){d.push(m.batchId);for(const v of m.mutations)f=f.add(v.key)}return t.localDocuments.getDocuments(r,f).next(m=>({ks:m,removedBatchIds:u,addedBatchIds:d}))})})}function dk(n,e){const t=Ae(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),a=t.Bs.newChangeBuffer({trackRemovals:!0});return function(d,f,m,v){const w=m.batch,E=w.keys();let P=ee.resolve();return E.forEach(C=>{P=P.next(()=>v.getEntry(f,C)).next(L=>{const D=m.docVersions.get(C);qe(D!==null,48541),L.version.compareTo(D)<0&&(w.applyToRemoteDocument(L,m),L.isValidDocument()&&(L.setReadTime(m.commitVersion),v.addEntry(L)))})}),P.next(()=>d.mutationQueue.removeMutationBatch(f,w))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let f=Ve();for(let m=0;m<d.mutationResults.length;++m)d.mutationResults[m].transformResults.length>0&&(f=f.add(d.batch.mutations[m].key));return f}(e))).next(()=>t.localDocuments.getDocuments(r,o))})}function bE(n){const e=Ae(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ti.getLastRemoteSnapshotVersion(t))}function fk(n,e){const t=Ae(n),r=e.snapshotVersion;let o=t.xs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const u=t.Bs.newChangeBuffer({trackRemovals:!0});o=t.xs;const d=[];e.targetChanges.forEach((v,w)=>{const E=o.get(w);if(!E)return;d.push(t.Ti.removeMatchingKeys(a,v.removedDocuments,w).next(()=>t.Ti.addMatchingKeys(a,v.addedDocuments,w)));let P=E.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(w)!==null?P=P.withResumeToken(Lt.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):v.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(v.resumeToken,r)),o=o.insert(w,P),function(L,D,U){return L.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-L.snapshotVersion.toMicroseconds()>=uk?!0:U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0}(E,P,v)&&d.push(t.Ti.updateTargetData(a,P))});let f=qr(),m=Ve();if(e.documentUpdates.forEach(v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,v))}),d.push(pk(a,u,e.documentUpdates).next(v=>{f=v.qs,m=v.Qs})),!r.isEqual(Re.min())){const v=t.Ti.getLastRemoteSnapshotVersion(a).next(w=>t.Ti.setTargetsMetadata(a,a.currentSequenceNumber,r));d.push(v)}return ee.waitFor(d).next(()=>u.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,f,m)).next(()=>f)}).then(a=>(t.xs=o,a))}function pk(n,e,t){let r=Ve(),o=Ve();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let u=qr();return t.forEach((d,f)=>{const m=a.get(d);f.isFoundDocument()!==m.isFoundDocument()&&(o=o.add(d)),f.isNoDocument()&&f.version.isEqual(Re.min())?(e.removeEntry(d,f.readTime),u=u.insert(d,f)):!m.isValidDocument()||f.version.compareTo(m.version)>0||f.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(f),u=u.insert(d,f)):he(cm,"Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",f.version)}),{qs:u,Qs:o}})}function mk(n,e){const t=Ae(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Jp),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function gk(n,e){const t=Ae(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.Ti.getTargetData(r,e).next(a=>a?(o=a,ee.resolve(o)):t.Ti.allocateTargetId(r).next(u=>(o=new Ai(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.Ti.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.xs.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.xs=t.xs.insert(r.targetId,r),t.Os.set(e,r.targetId)),r})}async function Sp(n,e,t){const r=Ae(n),o=r.xs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,u=>r.persistence.referenceDelegate.removeTarget(u,o))}catch(u){if(!ta(u))throw u;he(cm,`Failed to update sequence numbers for target ${e}: ${u}`)}r.xs=r.xs.remove(e),r.Os.delete(o.target)}function F_(n,e,t){const r=Ae(n);let o=Re.min(),a=Ve();return r.persistence.runTransaction("Execute query","readwrite",u=>function(f,m,v){const w=Ae(f),E=w.Os.get(v);return E!==void 0?ee.resolve(w.xs.get(E)):w.Ti.getTargetData(m,v)}(r,u,dr(e)).next(d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(u,d.targetId).next(f=>{a=f})}).next(()=>r.Ms.getDocumentsMatchingQuery(u,e,t?o:Re.min(),t?a:Ve())).next(d=>(yk(r,rx(e),d),{documents:d,$s:a})))}function yk(n,e,t){let r=n.Ns.get(e)||Re.min();t.forEach((o,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Ns.set(e,r)}class U_{constructor(){this.activeTargetIds=ux()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class vk{constructor(){this.xo=new U_,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,t,r){this.Oo[e]=t}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new U_,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j_="ConnectivityMonitor";class B_{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){he(j_,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){he(j_,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mc=null;function Rp(){return mc===null?mc=function(){return 268435456+Math.round(2147483648*Math.random())}():mc++,"0x"+mc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wf="RestConnection",wk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ek{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Ko=t+"://"+e.host,this.Wo=`projects/${r}/databases/${o}`,this.Go=this.databaseId.database===Uc?`project_id=${r}`:`project_id=${r}&database_id=${o}`}zo(e,t,r,o,a){const u=Rp(),d=this.jo(e,t.toUriEncodedString());he(Wf,`Sending RPC '${e}' ${u}:`,d,r);const f={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(f,o,a);const{host:m}=new URL(d),v=Ll(m);return this.Jo(e,d,f,r,v).then(w=>(he(Wf,`Received RPC '${e}' ${u}: `,w),w),w=>{throw Uo(Wf,`RPC '${e}' ${u} failed with error: `,w,"url: ",d,"request:",r),w})}Yo(e,t,r,o,a,u){return this.zo(e,t,r,o,a)}Ho(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Zo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,a)=>e[a]=o),r&&r.headers.forEach((o,a)=>e[a]=o)}jo(e,t){const r=wk[e];return`${this.Ko}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jt="WebChannelConnection";class Ik extends Ek{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,o,a){const u=Rp();return new Promise((d,f)=>{const m=new Lw;m.setWithCredentials(!0),m.listenOnce(Vw.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case Tc.NO_ERROR:const w=m.getResponseJson();he(jt,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(w)),d(w);break;case Tc.TIMEOUT:he(jt,`RPC '${e}' ${u} timed out`),f(new de(Z.DEADLINE_EXCEEDED,"Request time out"));break;case Tc.HTTP_ERROR:const E=m.getStatus();if(he(jt,`RPC '${e}' ${u} failed with status:`,E,"response text:",m.getResponseText()),E>0){let P=m.getResponseJson();Array.isArray(P)&&(P=P[0]);const C=P==null?void 0:P.error;if(C&&C.status&&C.message){const L=function(U){const W=U.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(W)>=0?W:Z.UNKNOWN}(C.status);f(new de(L,C.message))}else f(new de(Z.UNKNOWN,"Server responded with status "+m.getStatus()))}else f(new de(Z.UNAVAILABLE,"Connection failed."));break;default:Ie(9055,{l_:e,streamId:u,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{he(jt,`RPC '${e}' ${u} completed.`)}});const v=JSON.stringify(o);he(jt,`RPC '${e}' ${u} sending request:`,o),m.send(t,"POST",v,r,15)})}T_(e,t,r){const o=Rp(),a=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=Uw(),d=Fw(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Ho(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const v=a.join("");he(jt,`Creating RPC '${e}' stream ${o}: ${v}`,f);const w=u.createWebChannel(v,f);let E=!1,P=!1;const C=new Tk({Zo:D=>{P?he(jt,`Not sending because RPC '${e}' stream ${o} is closed:`,D):(E||(he(jt,`Opening RPC '${e}' stream ${o} transport.`),w.open(),E=!0),he(jt,`RPC '${e}' stream ${o} sending:`,D),w.send(D))},Xo:()=>w.close()}),L=(D,U,W)=>{D.listen(U,B=>{try{W(B)}catch(J){setTimeout(()=>{throw J},0)}})};return L(w,al.EventType.OPEN,()=>{P||(he(jt,`RPC '${e}' stream ${o} transport opened.`),C.__())}),L(w,al.EventType.CLOSE,()=>{P||(P=!0,he(jt,`RPC '${e}' stream ${o} transport closed`),C.u_())}),L(w,al.EventType.ERROR,D=>{P||(P=!0,Uo(jt,`RPC '${e}' stream ${o} transport errored. Name:`,D.name,"Message:",D.message),C.u_(new de(Z.UNAVAILABLE,"The operation could not be completed")))}),L(w,al.EventType.MESSAGE,D=>{var U;if(!P){const W=D.data[0];qe(!!W,16349);const B=W,J=(B==null?void 0:B.error)||((U=B[0])===null||U===void 0?void 0:U.error);if(J){he(jt,`RPC '${e}' stream ${o} received error:`,J);const ie=J.status;let Y=function(S){const x=pt[S];if(x!==void 0)return _E(x)}(ie),k=J.message;Y===void 0&&(Y=Z.INTERNAL,k="Unknown error status: "+ie+" with message "+J.message),P=!0,C.u_(new de(Y,k)),w.close()}else he(jt,`RPC '${e}' stream ${o} received:`,W),C.c_(W)}}),L(d,Mw.STAT_EVENT,D=>{D.stat===dp.PROXY?he(jt,`RPC '${e}' stream ${o} detected buffering proxy`):D.stat===dp.NOPROXY&&he(jt,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{C.a_()},0),C}}function Kf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wh(n){return new Cx(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(e,t,r=1e3,o=1.5,a=6e4){this.xi=e,this.timerId=t,this.I_=r,this.E_=o,this.d_=a,this.A_=0,this.R_=null,this.V_=Date.now(),this.reset()}reset(){this.A_=0}m_(){this.A_=this.d_}f_(e){this.cancel();const t=Math.floor(this.A_+this.g_()),r=Math.max(0,Date.now()-this.V_),o=Math.max(0,t-r);o>0&&he("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.A_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.R_=this.xi.enqueueAfterDelay(this.timerId,o,()=>(this.V_=Date.now(),e())),this.A_*=this.E_,this.A_<this.I_&&(this.A_=this.I_),this.A_>this.d_&&(this.A_=this.d_)}p_(){this.R_!==null&&(this.R_.skipDelay(),this.R_=null)}cancel(){this.R_!==null&&(this.R_.cancel(),this.R_=null)}g_(){return(Math.random()-.5)*this.A_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z_="PersistentStream";class OE{constructor(e,t,r,o,a,u,d,f){this.xi=e,this.y_=r,this.w_=o,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.S_=0,this.b_=null,this.D_=null,this.stream=null,this.v_=0,this.C_=new DE(e,t)}F_(){return this.state===1||this.state===5||this.M_()}M_(){return this.state===2||this.state===3}start(){this.v_=0,this.state!==4?this.auth():this.x_()}async stop(){this.F_()&&await this.close(0)}O_(){this.state=0,this.C_.reset()}N_(){this.M_()&&this.b_===null&&(this.b_=this.xi.enqueueAfterDelay(this.y_,6e4,()=>this.B_()))}L_(e){this.k_(),this.stream.send(e)}async B_(){if(this.M_())return this.close(0)}k_(){this.b_&&(this.b_.cancel(),this.b_=null)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}async close(e,t){this.k_(),this.q_(),this.C_.cancel(),this.S_++,e!==4?this.C_.reset():t&&t.code===Z.RESOURCE_EXHAUSTED?($r(t.toString()),$r("Using maximum backoff delay to prevent overloading the backend."),this.C_.m_()):t&&t.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Q_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(t)}Q_(){}auth(){this.state=1;const e=this.U_(this.S_),t=this.S_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.S_===t&&this.K_(r,o)},r=>{e(()=>{const o=new de(Z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.W_(o)})})}K_(e,t){const r=this.U_(this.S_);this.stream=this.G_(e,t),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.D_=this.xi.enqueueAfterDelay(this.w_,1e4,()=>(this.M_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(o=>{r(()=>this.W_(o))}),this.stream.onMessage(o=>{r(()=>++this.v_==1?this.z_(o):this.onNext(o))})}x_(){this.state=5,this.C_.f_(async()=>{this.state=0,this.start()})}W_(e){return he(z_,`close with error: ${e}`),this.stream=null,this.close(4,e)}U_(e){return t=>{this.xi.enqueueAndForget(()=>this.S_===e?t():(he(z_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Sk extends OE{constructor(e,t,r,o,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,u),this.serializer=a}G_(e,t){return this.connection.T_("Listen",e,t)}z_(e){return this.onNext(e)}onNext(e){this.C_.reset();const t=kx(this.serializer,e),r=function(a){if(!("targetChange"in a))return Re.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?Re.min():u.readTime?fr(u.readTime):Re.min()}(e);return this.listener.j_(t,r)}H_(e){const t={};t.database=Ip(this.serializer),t.addTarget=function(a,u){let d;const f=u.target;if(d=yp(f)?{documents:Dx(a,f)}:{query:Ox(a,f).gt},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=TE(a,u.resumeToken);const m=wp(a,u.expectedCount);m!==null&&(d.expectedCount=m)}else if(u.snapshotVersion.compareTo(Re.min())>0){d.readTime=qc(a,u.snapshotVersion.toTimestamp());const m=wp(a,u.expectedCount);m!==null&&(d.expectedCount=m)}return d}(this.serializer,e);const r=Vx(this.serializer,e);r&&(t.labels=r),this.L_(t)}J_(e){const t={};t.database=Ip(this.serializer),t.removeTarget=e,this.L_(t)}}class Rk extends OE{constructor(e,t,r,o,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,u),this.serializer=a}get Y_(){return this.v_>0}start(){this.lastStreamToken=void 0,super.start()}Q_(){this.Y_&&this.Z_([])}G_(e,t){return this.connection.T_("Write",e,t)}z_(e){return qe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,qe(!e.writeResults||e.writeResults.length===0,55816),this.listener.X_()}onNext(e){qe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.C_.reset();const t=bx(e.writeResults,e.commitTime),r=fr(e.commitTime);return this.listener.ea(r,t)}ta(){const e={};e.database=Ip(this.serializer),this.L_(e)}Z_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Nx(this.serializer,r))};this.L_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak{}class Ck extends Ak{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=o,this.na=!1}ra(){if(this.na)throw new de(Z.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,t,r,o){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.zo(e,Ep(t,r),o,a,u)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new de(Z.UNKNOWN,a.toString())})}Yo(e,t,r,o,a){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.connection.Yo(e,Ep(t,r),o,u,d,a)).catch(u=>{throw u.name==="FirebaseError"?(u.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new de(Z.UNKNOWN,u.toString())})}terminate(){this.na=!0,this.connection.terminate()}}class Pk{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ia=0,this.sa=null,this.oa=!0}_a(){this.ia===0&&(this.aa("Unknown"),this.sa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.sa=null,this.ua("Backend didn't respond within 10 seconds."),this.aa("Offline"),Promise.resolve())))}ca(e){this.state==="Online"?this.aa("Unknown"):(this.ia++,this.ia>=1&&(this.la(),this.ua(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.aa("Offline")))}set(e){this.la(),this.ia=0,e==="Online"&&(this.oa=!1),this.aa(e)}aa(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ua(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.oa?($r(t),this.oa=!1):he("OnlineStateTracker",t)}la(){this.sa!==null&&(this.sa.cancel(),this.sa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rs="RemoteStore";class xk{constructor(e,t,r,o,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.ha=[],this.Pa=new Map,this.Ta=new Set,this.Ia=[],this.Ea=a,this.Ea.No(u=>{r.enqueueAndForget(async()=>{Ns(this)&&(he(Rs,"Restarting streams for network reachability change."),await async function(f){const m=Ae(f);m.Ta.add(4),await jl(m),m.da.set("Unknown"),m.Ta.delete(4),await Eh(m)}(this))})}),this.da=new Pk(r,o)}}async function Eh(n){if(Ns(n))for(const e of n.Ia)await e(!0)}async function jl(n){for(const e of n.Ia)await e(!1)}function LE(n,e){const t=Ae(n);t.Pa.has(e.targetId)||(t.Pa.set(e.targetId,e),pm(t)?fm(t):ra(t).M_()&&dm(t,e))}function hm(n,e){const t=Ae(n),r=ra(t);t.Pa.delete(e),r.M_()&&VE(t,e),t.Pa.size===0&&(r.M_()?r.N_():Ns(t)&&t.da.set("Unknown"))}function dm(n,e){if(n.Aa.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ra(n).H_(e)}function VE(n,e){n.Aa.Ke(e),ra(n).J_(e)}function fm(n){n.Aa=new Ix({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>n.Pa.get(e)||null,Pt:()=>n.datastore.serializer.databaseId}),ra(n).start(),n.da._a()}function pm(n){return Ns(n)&&!ra(n).F_()&&n.Pa.size>0}function Ns(n){return Ae(n).Ta.size===0}function ME(n){n.Aa=void 0}async function kk(n){n.da.set("Online")}async function Nk(n){n.Pa.forEach((e,t)=>{dm(n,e)})}async function bk(n,e){ME(n),pm(n)?(n.da.ca(e),fm(n)):n.da.set("Unknown")}async function Dk(n,e,t){if(n.da.set("Online"),e instanceof EE&&e.state===2&&e.cause)try{await async function(o,a){const u=a.cause;for(const d of a.targetIds)o.Pa.has(d)&&(await o.remoteSyncer.rejectListen(d,u),o.Pa.delete(d),o.Aa.removeTarget(d))}(n,e)}catch(r){he(Rs,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Wc(n,r)}else if(e instanceof Ac?n.Aa.Xe(e):e instanceof wE?n.Aa.ot(e):n.Aa.nt(e),!t.isEqual(Re.min()))try{const r=await bE(n.localStore);t.compareTo(r)>=0&&await function(a,u){const d=a.Aa.It(u);return d.targetChanges.forEach((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const v=a.Pa.get(m);v&&a.Pa.set(m,v.withResumeToken(f.resumeToken,u))}}),d.targetMismatches.forEach((f,m)=>{const v=a.Pa.get(f);if(!v)return;a.Pa.set(f,v.withResumeToken(Lt.EMPTY_BYTE_STRING,v.snapshotVersion)),VE(a,f);const w=new Ai(v.target,f,m,v.sequenceNumber);dm(a,w)}),a.remoteSyncer.applyRemoteEvent(d)}(n,t)}catch(r){he(Rs,"Failed to raise snapshot:",r),await Wc(n,r)}}async function Wc(n,e,t){if(!ta(e))throw e;n.Ta.add(1),await jl(n),n.da.set("Offline"),t||(t=()=>bE(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{he(Rs,"Retrying IndexedDB access"),await t(),n.Ta.delete(1),await Eh(n)})}function FE(n,e){return e().catch(t=>Wc(n,t,e))}async function Th(n){const e=Ae(n),t=Mi(e);let r=e.ha.length>0?e.ha[e.ha.length-1].batchId:Jp;for(;Ok(e);)try{const o=await mk(e.localStore,r);if(o===null){e.ha.length===0&&t.N_();break}r=o.batchId,Lk(e,o)}catch(o){await Wc(e,o)}UE(e)&&jE(e)}function Ok(n){return Ns(n)&&n.ha.length<10}function Lk(n,e){n.ha.push(e);const t=Mi(n);t.M_()&&t.Y_&&t.Z_(e.mutations)}function UE(n){return Ns(n)&&!Mi(n).F_()&&n.ha.length>0}function jE(n){Mi(n).start()}async function Vk(n){Mi(n).ta()}async function Mk(n){const e=Mi(n);for(const t of n.ha)e.Z_(t.mutations)}async function Fk(n,e,t){const r=n.ha.shift(),o=im.from(r,e,t);await FE(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),await Th(n)}async function Uk(n,e){e&&Mi(n).Y_&&await async function(r,o){if(function(u){return Ex(u)&&u!==Z.ABORTED}(o.code)){const a=r.ha.shift();Mi(r).O_(),await FE(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,o)),await Th(r)}}(n,e),UE(n)&&jE(n)}async function $_(n,e){const t=Ae(n);t.asyncQueue.verifyOperationInProgress(),he(Rs,"RemoteStore received new credentials");const r=Ns(t);t.Ta.add(3),await jl(t),r&&t.da.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ta.delete(3),await Eh(t)}async function jk(n,e){const t=Ae(n);e?(t.Ta.delete(2),await Eh(t)):e||(t.Ta.add(2),await jl(t),t.da.set("Unknown"))}function ra(n){return n.Ra||(n.Ra=function(t,r,o){const a=Ae(t);return a.ra(),new Sk(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)}(n.datastore,n.asyncQueue,{e_:kk.bind(null,n),n_:Nk.bind(null,n),i_:bk.bind(null,n),j_:Dk.bind(null,n)}),n.Ia.push(async e=>{e?(n.Ra.O_(),pm(n)?fm(n):n.da.set("Unknown")):(await n.Ra.stop(),ME(n))})),n.Ra}function Mi(n){return n.Va||(n.Va=function(t,r,o){const a=Ae(t);return a.ra(),new Rk(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)}(n.datastore,n.asyncQueue,{e_:()=>Promise.resolve(),n_:Vk.bind(null,n),i_:Uk.bind(null,n),X_:Mk.bind(null,n),ea:Fk.bind(null,n)}),n.Ia.push(async e=>{e?(n.Va.O_(),await Th(n)):(await n.Va.stop(),n.ha.length>0&&(he(Rs,`Stopping write stream with ${n.ha.length} pending writes`),n.ha=[]))})),n.Va}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(e,t,r,o,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=a,this.deferred=new Ur,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,o,a){const u=Date.now()+r,d=new mm(e,t,u,o,a);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function gm(n,e){if($r("AsyncQueue",`${e}: ${n}`),ta(n))return new de(Z.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{static emptySet(e){return new Oo(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||_e.comparator(t.key,r.key):(t,r)=>_e.comparator(t.key,r.key),this.keyedMap=ll(),this.sortedSet=new it(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Oo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=r.getNext().key;if(!o.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Oo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_{constructor(){this.ma=new it(_e.comparator)}track(e){const t=e.doc.key,r=this.ma.get(t);r?e.type!==0&&r.type===3?this.ma=this.ma.insert(t,e):e.type===3&&r.type!==1?this.ma=this.ma.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ma=this.ma.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ma=this.ma.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ma=this.ma.remove(t):e.type===1&&r.type===2?this.ma=this.ma.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ma=this.ma.insert(t,{type:2,doc:e.doc}):Ie(63341,{Vt:e,fa:r}):this.ma=this.ma.insert(t,e)}ga(){const e=[];return this.ma.inorderTraversal((t,r)=>{e.push(r)}),e}}class qo{constructor(e,t,r,o,a,u,d,f,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=f,this.hasCachedResults=m}static fromInitialDocuments(e,t,r,o,a){const u=[];return t.forEach(d=>{u.push({type:0,doc:d})}),new qo(e,t,Oo.emptySet(t),u,r,o,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&mh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(){this.pa=void 0,this.ya=[]}wa(){return this.ya.some(e=>e.Sa())}}class zk{constructor(){this.queries=H_(),this.onlineState="Unknown",this.ba=new Set}terminate(){(function(t,r){const o=Ae(t),a=o.queries;o.queries=H_(),a.forEach((u,d)=>{for(const f of d.ya)f.onError(r)})})(this,new de(Z.ABORTED,"Firestore shutting down"))}}function H_(){return new ks(n=>aE(n),mh)}async function BE(n,e){const t=Ae(n);let r=3;const o=e.query;let a=t.queries.get(o);a?!a.wa()&&e.Sa()&&(r=2):(a=new Bk,r=e.Sa()?0:1);try{switch(r){case 0:a.pa=await t.onListen(o,!0);break;case 1:a.pa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(u){const d=gm(u,`Initialization of query '${ko(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,a),a.ya.push(e),e.Da(t.onlineState),a.pa&&e.va(a.pa)&&ym(t)}async function zE(n,e){const t=Ae(n),r=e.query;let o=3;const a=t.queries.get(r);if(a){const u=a.ya.indexOf(e);u>=0&&(a.ya.splice(u,1),a.ya.length===0?o=e.Sa()?0:1:!a.wa()&&e.Sa()&&(o=2))}switch(o){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function $k(n,e){const t=Ae(n);let r=!1;for(const o of e){const a=o.query,u=t.queries.get(a);if(u){for(const d of u.ya)d.va(o)&&(r=!0);u.pa=o}}r&&ym(t)}function qk(n,e,t){const r=Ae(n),o=r.queries.get(e);if(o)for(const a of o.ya)a.onError(t);r.queries.delete(e)}function ym(n){n.ba.forEach(e=>{e.next()})}var Ap,W_;(W_=Ap||(Ap={})).Ca="default",W_.Cache="cache";class $E{constructor(e,t,r){this.query=e,this.Fa=t,this.Ma=!1,this.xa=null,this.onlineState="Unknown",this.options=r||{}}va(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new qo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Ma?this.Oa(e)&&(this.Fa.next(e),t=!0):this.Na(e,this.onlineState)&&(this.Ba(e),t=!0),this.xa=e,t}onError(e){this.Fa.error(e)}Da(e){this.onlineState=e;let t=!1;return this.xa&&!this.Ma&&this.Na(this.xa,e)&&(this.Ba(this.xa),t=!0),t}Na(e,t){if(!e.fromCache||!this.Sa())return!0;const r=t!=="Offline";return(!this.options.La||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Oa(e){if(e.docChanges.length>0)return!0;const t=this.xa&&this.xa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Ba(e){e=qo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Ma=!0,this.Fa.next(e)}Sa(){return this.options.source!==Ap.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(e){this.key=e}}class HE{constructor(e){this.key=e}}class Hk{constructor(e,t){this.query=e,this.Ga=t,this.za=null,this.hasCachedResults=!1,this.current=!1,this.ja=Ve(),this.mutatedKeys=Ve(),this.Ha=lE(e),this.Ja=new Oo(this.Ha)}get Ya(){return this.Ga}Za(e,t){const r=t?t.Xa:new q_,o=t?t.Ja:this.Ja;let a=t?t.mutatedKeys:this.mutatedKeys,u=o,d=!1;const f=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,m=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((v,w)=>{const E=o.get(v),P=gh(this.query,w)?w:null,C=!!E&&this.mutatedKeys.has(E.key),L=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let D=!1;E&&P?E.data.isEqual(P.data)?C!==L&&(r.track({type:3,doc:P}),D=!0):this.eu(E,P)||(r.track({type:2,doc:P}),D=!0,(f&&this.Ha(P,f)>0||m&&this.Ha(P,m)<0)&&(d=!0)):!E&&P?(r.track({type:0,doc:P}),D=!0):E&&!P&&(r.track({type:1,doc:E}),D=!0,(f||m)&&(d=!0)),D&&(P?(u=u.add(P),a=L?a.add(v):a.delete(v)):(u=u.delete(v),a=a.delete(v)))}),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),a=a.delete(v.key),r.track({type:1,doc:v})}return{Ja:u,Xa:r,Cs:d,mutatedKeys:a}}eu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,o){const a=this.Ja;this.Ja=e.Ja,this.mutatedKeys=e.mutatedKeys;const u=e.Xa.ga();u.sort((v,w)=>function(P,C){const L=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ie(20277,{Vt:D})}};return L(P)-L(C)}(v.type,w.type)||this.Ha(v.doc,w.doc)),this.tu(r),o=o!=null&&o;const d=t&&!o?this.nu():[],f=this.ja.size===0&&this.current&&!o?1:0,m=f!==this.za;return this.za=f,u.length!==0||m?{snapshot:new qo(this.query,e.Ja,a,u,e.mutatedKeys,f===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),ru:d}:{ru:d}}Da(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ja:this.Ja,Xa:new q_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ru:[]}}iu(e){return!this.Ga.has(e)&&!!this.Ja.has(e)&&!this.Ja.get(e).hasLocalMutations}tu(e){e&&(e.addedDocuments.forEach(t=>this.Ga=this.Ga.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ga=this.Ga.delete(t)),this.current=e.current)}nu(){if(!this.current)return[];const e=this.ja;this.ja=Ve(),this.Ja.forEach(r=>{this.iu(r.key)&&(this.ja=this.ja.add(r.key))});const t=[];return e.forEach(r=>{this.ja.has(r)||t.push(new HE(r))}),this.ja.forEach(r=>{e.has(r)||t.push(new qE(r))}),t}su(e){this.Ga=e.$s,this.ja=Ve();const t=this.Za(e.documents);return this.applyChanges(t,!0)}ou(){return qo.fromInitialDocuments(this.query,this.Ja,this.mutatedKeys,this.za===0,this.hasCachedResults)}}const vm="SyncEngine";class Wk{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Kk{constructor(e){this.key=e,this._u=!1}}class Gk{constructor(e,t,r,o,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.au={},this.uu=new ks(d=>aE(d),mh),this.cu=new Map,this.lu=new Set,this.hu=new it(_e.comparator),this.Pu=new Map,this.Tu=new am,this.Iu={},this.Eu=new Map,this.du=$o.lr(),this.onlineState="Unknown",this.Au=void 0}get isPrimaryClient(){return this.Au===!0}}async function Qk(n,e,t=!0){const r=YE(n);let o;const a=r.uu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),o=a.view.ou()):o=await WE(r,e,t,!0),o}async function Jk(n,e){const t=YE(n);await WE(t,e,!0,!1)}async function WE(n,e,t,r){const o=await gk(n.localStore,dr(e)),a=o.targetId,u=n.sharedClientState.addLocalQueryTarget(a,t);let d;return r&&(d=await Yk(n,e,a,u==="current",o.resumeToken)),n.isPrimaryClient&&t&&LE(n.remoteStore,o),d}async function Yk(n,e,t,r,o){n.Ru=(w,E,P)=>async function(L,D,U,W){let B=D.view.Za(U);B.Cs&&(B=await F_(L.localStore,D.query,!1).then(({documents:k})=>D.view.Za(k,B)));const J=W&&W.targetChanges.get(D.targetId),ie=W&&W.targetMismatches.get(D.targetId)!=null,Y=D.view.applyChanges(B,L.isPrimaryClient,J,ie);return G_(L,D.targetId,Y.ru),Y.snapshot}(n,w,E,P);const a=await F_(n.localStore,e,!0),u=new Hk(e,a.$s),d=u.Za(a.documents),f=Ul.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",o),m=u.applyChanges(d,n.isPrimaryClient,f);G_(n,t,m.ru);const v=new Wk(e,t,u);return n.uu.set(e,v),n.cu.has(t)?n.cu.get(t).push(e):n.cu.set(t,[e]),m.snapshot}async function Xk(n,e,t){const r=Ae(n),o=r.uu.get(e),a=r.cu.get(o.targetId);if(a.length>1)return r.cu.set(o.targetId,a.filter(u=>!mh(u,e))),void r.uu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await Sp(r.localStore,o.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(o.targetId),t&&hm(r.remoteStore,o.targetId),Cp(r,o.targetId)}).catch(ea)):(Cp(r,o.targetId),await Sp(r.localStore,o.targetId,!0))}async function Zk(n,e){const t=Ae(n),r=t.uu.get(e),o=t.cu.get(r.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),hm(t.remoteStore,r.targetId))}async function eN(n,e,t){const r=aN(n);try{const o=await function(u,d){const f=Ae(u),m=Et.now(),v=d.reduce((P,C)=>P.add(C.key),Ve());let w,E;return f.persistence.runTransaction("Locally write mutations","readwrite",P=>{let C=qr(),L=Ve();return f.Bs.getEntries(P,v).next(D=>{C=D,C.forEach((U,W)=>{W.isValidDocument()||(L=L.add(U))})}).next(()=>f.localDocuments.getOverlayedDocuments(P,C)).next(D=>{w=D;const U=[];for(const W of d){const B=gx(W,w.get(W.key).overlayedDocument);B!=null&&U.push(new ji(W.key,B,Zw(B.value.mapValue),xn.exists(!0)))}return f.mutationQueue.addMutationBatch(P,m,U,d)}).next(D=>{E=D;const U=D.applyToLocalDocumentSet(w,L);return f.documentOverlayCache.saveOverlays(P,D.batchId,U)})}).then(()=>({batchId:E.batchId,changes:cE(w)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,d,f){let m=u.Iu[u.currentUser.toKey()];m||(m=new it(be)),m=m.insert(d,f),u.Iu[u.currentUser.toKey()]=m}(r,o.batchId,t),await Bl(r,o.changes),await Th(r.remoteStore)}catch(o){const a=gm(o,"Failed to persist write");t.reject(a)}}async function KE(n,e){const t=Ae(n);try{const r=await fk(t.localStore,e);e.targetChanges.forEach((o,a)=>{const u=t.Pu.get(a);u&&(qe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?u._u=!0:o.modifiedDocuments.size>0?qe(u._u,14607):o.removedDocuments.size>0&&(qe(u._u,42227),u._u=!1))}),await Bl(t,r,e)}catch(r){await ea(r)}}function K_(n,e,t){const r=Ae(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const o=[];r.uu.forEach((a,u)=>{const d=u.view.Da(e);d.snapshot&&o.push(d.snapshot)}),function(u,d){const f=Ae(u);f.onlineState=d;let m=!1;f.queries.forEach((v,w)=>{for(const E of w.ya)E.Da(d)&&(m=!0)}),m&&ym(f)}(r.eventManager,e),o.length&&r.au.j_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function tN(n,e,t){const r=Ae(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.Pu.get(e),a=o&&o.key;if(a){let u=new it(_e.comparator);u=u.insert(a,zt.newNoDocument(a,Re.min()));const d=Ve().add(a),f=new _h(Re.min(),new Map,new it(be),u,d);await KE(r,f),r.hu=r.hu.remove(a),r.Pu.delete(e),_m(r)}else await Sp(r.localStore,e,!1).then(()=>Cp(r,e,t)).catch(ea)}async function nN(n,e){const t=Ae(n),r=e.batch.batchId;try{const o=await dk(t.localStore,e);QE(t,r,null),GE(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Bl(t,o)}catch(o){await ea(o)}}async function rN(n,e,t){const r=Ae(n);try{const o=await function(u,d){const f=Ae(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let v;return f.mutationQueue.lookupMutationBatch(m,d).next(w=>(qe(w!==null,37113),v=w.keys(),f.mutationQueue.removeMutationBatch(m,w))).next(()=>f.mutationQueue.performConsistencyCheck(m)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(m,v,d)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v)).next(()=>f.localDocuments.getDocuments(m,v))})}(r.localStore,e);QE(r,e,t),GE(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Bl(r,o)}catch(o){await ea(o)}}function GE(n,e){(n.Eu.get(e)||[]).forEach(t=>{t.resolve()}),n.Eu.delete(e)}function QE(n,e,t){const r=Ae(n);let o=r.Iu[r.currentUser.toKey()];if(o){const a=o.get(e);a&&(t?a.reject(t):a.resolve(),o=o.remove(e)),r.Iu[r.currentUser.toKey()]=o}}function Cp(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.cu.get(e))n.uu.delete(r),t&&n.au.Vu(r,t);n.cu.delete(e),n.isPrimaryClient&&n.Tu.Hr(e).forEach(r=>{n.Tu.containsKey(r)||JE(n,r)})}function JE(n,e){n.lu.delete(e.path.canonicalString());const t=n.hu.get(e);t!==null&&(hm(n.remoteStore,t),n.hu=n.hu.remove(e),n.Pu.delete(t),_m(n))}function G_(n,e,t){for(const r of t)r instanceof qE?(n.Tu.addReference(r.key,e),iN(n,r)):r instanceof HE?(he(vm,"Document no longer in limbo: "+r.key),n.Tu.removeReference(r.key,e),n.Tu.containsKey(r.key)||JE(n,r.key)):Ie(19791,{mu:r})}function iN(n,e){const t=e.key,r=t.path.canonicalString();n.hu.get(t)||n.lu.has(r)||(he(vm,"New document in limbo: "+t),n.lu.add(r),_m(n))}function _m(n){for(;n.lu.size>0&&n.hu.size<n.maxConcurrentLimboResolutions;){const e=n.lu.values().next().value;n.lu.delete(e);const t=new _e(Xe.fromString(e)),r=n.du.next();n.Pu.set(r,new Kk(t)),n.hu=n.hu.insert(t,r),LE(n.remoteStore,new Ai(dr(tm(t.path)),r,"TargetPurposeLimboResolution",dh.le))}}async function Bl(n,e,t){const r=Ae(n),o=[],a=[],u=[];r.uu.isEmpty()||(r.uu.forEach((d,f)=>{u.push(r.Ru(f,e,t).then(m=>{var v;if((m||t)&&r.isPrimaryClient){const w=m?!m.fromCache:(v=t==null?void 0:t.targetChanges.get(f.targetId))===null||v===void 0?void 0:v.current;r.sharedClientState.updateQueryState(f.targetId,w?"current":"not-current")}if(m){o.push(m);const w=um.Rs(f.targetId,m);a.push(w)}}))}),await Promise.all(u),r.au.j_(o),await async function(f,m){const v=Ae(f);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",w=>ee.forEach(m,E=>ee.forEach(E.ds,P=>v.persistence.referenceDelegate.addReference(w,E.targetId,P)).next(()=>ee.forEach(E.As,P=>v.persistence.referenceDelegate.removeReference(w,E.targetId,P)))))}catch(w){if(!ta(w))throw w;he(cm,"Failed to update sequence numbers: "+w)}for(const w of m){const E=w.targetId;if(!w.fromCache){const P=v.xs.get(E),C=P.snapshotVersion,L=P.withLastLimboFreeSnapshotVersion(C);v.xs=v.xs.insert(E,L)}}}(r.localStore,a))}async function sN(n,e){const t=Ae(n);if(!t.currentUser.isEqual(e)){he(vm,"User change. New user:",e.toKey());const r=await NE(t.localStore,e);t.currentUser=e,function(a,u){a.Eu.forEach(d=>{d.forEach(f=>{f.reject(new de(Z.CANCELLED,u))})}),a.Eu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Bl(t,r.ks)}}function oN(n,e){const t=Ae(n),r=t.Pu.get(e);if(r&&r._u)return Ve().add(r.key);{let o=Ve();const a=t.cu.get(e);if(!a)return o;for(const u of a){const d=t.uu.get(u);o=o.unionWith(d.view.Ya)}return o}}function YE(n){const e=Ae(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=KE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=oN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=tN.bind(null,e),e.au.j_=$k.bind(null,e.eventManager),e.au.Vu=qk.bind(null,e.eventManager),e}function aN(n){const e=Ae(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=nN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=rN.bind(null,e),e}class Kc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=wh(e.databaseInfo.databaseId),this.sharedClientState=this.pu(e),this.persistence=this.yu(e),await this.persistence.start(),this.localStore=this.wu(e),this.gcScheduler=this.Su(e,this.localStore),this.indexBackfillerScheduler=this.bu(e,this.localStore)}Su(e,t){return null}bu(e,t){return null}wu(e){return hk(this.persistence,new lk,e.initialUser,this.serializer)}yu(e){return new kE(lm.fi,this.serializer)}pu(e){return new vk}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Kc.provider={build:()=>new Kc};class lN extends Kc{constructor(e){super(),this.cacheSizeBytes=e}Su(e,t){qe(this.persistence.referenceDelegate instanceof Hc,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Kx(r,e.asyncQueue,t)}yu(e){const t=this.cacheSizeBytes!==void 0?sn.withCacheSize(this.cacheSizeBytes):sn.DEFAULT;return new kE(r=>Hc.fi(r,t),this.serializer)}}class Pp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>K_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=sN.bind(null,this.syncEngine),await jk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new zk}()}createDatastore(e){const t=wh(e.databaseInfo.databaseId),r=function(a){return new Ik(a)}(e.databaseInfo);return function(a,u,d,f){return new Ck(a,u,d,f)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,o,a,u,d){return new xk(r,o,a,u,d)}(this.localStore,this.datastore,e.asyncQueue,t=>K_(this.syncEngine,t,0),function(){return B_.C()?new B_:new _k}())}createSyncEngine(e,t){return function(o,a,u,d,f,m,v){const w=new Gk(o,a,u,d,f,m);return v&&(w.Au=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(o){const a=Ae(o);he(Rs,"RemoteStore shutting down."),a.Ta.add(5),await jl(a),a.Ea.shutdown(),a.da.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Pp.provider={build:()=>new Pp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.vu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.vu(this.observer.error,e):$r("Uncaught Error in snapshot listener:",e.toString()))}Cu(){this.muted=!0}vu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fi="FirestoreClient";class uN{constructor(e,t,r,o,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Bt.UNAUTHENTICATED,this.clientId=$w.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async u=>{he(Fi,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u}),this.appCheckCredentials.start(r,u=>(he(Fi,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ur;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=gm(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Gf(n,e){n.asyncQueue.verifyOperationInProgress(),he(Fi,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async o=>{r.isEqual(o)||(await NE(e.localStore,o),r=o)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function Q_(n,e){n.asyncQueue.verifyOperationInProgress();const t=await cN(n);he(Fi,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>$_(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,o)=>$_(e.remoteStore,o)),n._onlineComponents=e}async function cN(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){he(Fi,"Using user provided OfflineComponentProvider");try{await Gf(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===Z.FAILED_PRECONDITION||o.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;Uo("Error using user provided cache. Falling back to memory cache: "+t),await Gf(n,new Kc)}}else he(Fi,"Using default OfflineComponentProvider"),await Gf(n,new lN(void 0));return n._offlineComponents}async function ZE(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(he(Fi,"Using user provided OnlineComponentProvider"),await Q_(n,n._uninitializedComponentsProvider._online)):(he(Fi,"Using default OnlineComponentProvider"),await Q_(n,new Pp))),n._onlineComponents}function hN(n){return ZE(n).then(e=>e.syncEngine)}async function eT(n){const e=await ZE(n),t=e.eventManager;return t.onListen=Qk.bind(null,e.syncEngine),t.onUnlisten=Xk.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Jk.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Zk.bind(null,e.syncEngine),t}function dN(n,e,t={}){const r=new Ur;return n.asyncQueue.enqueueAndForget(async()=>function(a,u,d,f,m){const v=new XE({next:E=>{v.Cu(),u.enqueueAndForget(()=>zE(a,w));const P=E.docs.has(d);!P&&E.fromCache?m.reject(new de(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&E.fromCache&&f&&f.source==="server"?m.reject(new de(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(E)},error:E=>m.reject(E)}),w=new $E(tm(d.path),v,{includeMetadataChanges:!0,La:!0});return BE(a,w)}(await eT(n),n.asyncQueue,e,t,r)),r.promise}function fN(n,e,t={}){const r=new Ur;return n.asyncQueue.enqueueAndForget(async()=>function(a,u,d,f,m){const v=new XE({next:E=>{v.Cu(),u.enqueueAndForget(()=>zE(a,w)),E.fromCache&&f.source==="server"?m.reject(new de(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(E)},error:E=>m.reject(E)}),w=new $E(d,v,{includeMetadataChanges:!0,La:!0});return BE(a,w)}(await eT(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tT(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nT(n,e,t){if(!t)throw new de(Z.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function pN(n,e,t,r){if(e===!0&&r===!0)throw new de(Z.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Y_(n){if(!_e.isDocumentKey(n))throw new de(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function X_(n){if(_e.isDocumentKey(n))throw new de(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Ih(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ie(12329,{type:typeof n})}function Gn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new de(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Ih(n);throw new de(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT="firestore.googleapis.com",Z_=!0;class e0{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new de(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=rT,this.ssl=Z_}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Z_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=xE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Hx)throw new de(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}pN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=tT((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new de(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new de(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new de(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,o){return r.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Sh{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new e0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new de(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new de(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new e0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new TP;switch(r.type){case"firstParty":return new AP(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new de(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=J_.get(t);r&&(he("ComponentProvider","Removing Datastore"),J_.delete(t),r.terminate())}(this),Promise.resolve()}}function mN(n,e,t,r={}){var o;n=Gn(n,Sh);const a=Ll(e),u=n._getSettings(),d=Object.assign(Object.assign({},u),{emulatorOptions:n._getEmulatorOptions()}),f=`${e}:${t}`;a&&(Aw(`https://${f}`),Cw("Firestore",!0)),u.host!==rT&&u.host!==f&&Uo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m=Object.assign(Object.assign({},u),{host:f,ssl:a,emulatorOptions:r});if(!Ts(m,d)&&(n._setSettings(m),r.mockUserToken)){let v,w;if(typeof r.mockUserToken=="string")v=r.mockUserToken,w=Bt.MOCK_USER;else{v=QA(r.mockUserToken,(o=n._app)===null||o===void 0?void 0:o.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new de(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new Bt(E)}n._authCredentials=new IP(new Bw(v,w))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new bs(this.firestore,e,this._query)}}class Qt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new bi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Qt(this.firestore,e,this._key)}}class bi extends bs{constructor(e,t,r){super(e,t,tm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Qt(this.firestore,null,new _e(e))}withConverter(e){return new bi(this.firestore,e,this._path)}}function Ci(n,e,...t){if(n=It(n),nT("collection","path",e),n instanceof Sh){const r=Xe.fromString(e,...t);return X_(r),new bi(n,null,r)}{if(!(n instanceof Qt||n instanceof bi))throw new de(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Xe.fromString(e,...t));return X_(r),new bi(n.firestore,null,r)}}function gl(n,e,...t){if(n=It(n),arguments.length===1&&(e=$w.newId()),nT("doc","path",e),n instanceof Sh){const r=Xe.fromString(e,...t);return Y_(r),new Qt(n,null,new _e(r))}{if(!(n instanceof Qt||n instanceof bi))throw new de(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Xe.fromString(e,...t));return Y_(r),new Qt(n.firestore,n instanceof bi?n.converter:null,new _e(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t0="AsyncQueue";class n0{constructor(e=Promise.resolve()){this.zu=[],this.ju=!1,this.Hu=[],this.Ju=null,this.Yu=!1,this.Zu=!1,this.Xu=[],this.C_=new DE(this,"async_queue_retry"),this.ec=()=>{const r=Kf();r&&he(t0,"Visibility state changed to "+r.visibilityState),this.C_.p_()},this.tc=e;const t=Kf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.ec)}get isShuttingDown(){return this.ju}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.nc(),this.rc(e)}enterRestrictedMode(e){if(!this.ju){this.ju=!0,this.Zu=e||!1;const t=Kf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.ec)}}enqueue(e){if(this.nc(),this.ju)return new Promise(()=>{});const t=new Ur;return this.rc(()=>this.ju&&this.Zu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.zu.push(e),this.sc()))}async sc(){if(this.zu.length!==0){try{await this.zu[0](),this.zu.shift(),this.C_.reset()}catch(e){if(!ta(e))throw e;he(t0,"Operation failed with retryable error: "+e)}this.zu.length>0&&this.C_.f_(()=>this.sc())}}rc(e){const t=this.tc.then(()=>(this.Yu=!0,e().catch(r=>{throw this.Ju=r,this.Yu=!1,$r("INTERNAL UNHANDLED ERROR: ",r0(r)),r}).then(r=>(this.Yu=!1,r))));return this.tc=t,t}enqueueAfterDelay(e,t,r){this.nc(),this.Xu.indexOf(e)>-1&&(t=0);const o=mm.createAndSchedule(this,e,t,r,a=>this.oc(a));return this.Hu.push(o),o}nc(){this.Ju&&Ie(47125,{_c:r0(this.Ju)})}verifyOperationInProgress(){}async ac(){let e;do e=this.tc,await e;while(e!==this.tc)}uc(e){for(const t of this.Hu)if(t.timerId===e)return!0;return!1}cc(e){return this.ac().then(()=>{this.Hu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Hu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.ac()})}lc(e){this.Xu.push(e)}oc(e){const t=this.Hu.indexOf(e);this.Hu.splice(t,1)}}function r0(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Ds extends Sh{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new n0,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new n0(e),this._firestoreClient=void 0,await e}}}function gN(n,e){const t=typeof n=="object"?n:Nw(),r=typeof n=="string"?n:Uc,o=Gp(t,"firestore").getImmediate({identifier:r});if(!o._initialized){const a=KA("firestore");a&&mN(o,...a)}return o}function wm(n){if(n._terminated)throw new de(Z.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||yN(n),n._firestoreClient}function yN(n){var e,t,r;const o=n._freezeSettings(),a=function(d,f,m,v){return new BP(d,f,m,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,tT(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,o);n._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=o.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),n._firestoreClient=new uN(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&function(d){const f=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(f),_online:f}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ho(Lt.fromBase64String(e))}catch(t){throw new de(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ho(Lt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new de(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ot(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new de(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new de(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return be(this._lat,e._lat)||be(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,o){if(r.length!==o.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==o[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vN=/^__.*__$/;class _N{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new ji(e,this.data,this.fieldMask,t,this.fieldTransforms):new Fl(e,this.data,t,this.fieldTransforms)}}class iT{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ji(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function sT(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ie(40011,{hc:n})}}class Sm{constructor(e,t,r,o,a,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=o,a===void 0&&this.Pc(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get hc(){return this.settings.hc}Tc(e){return new Sm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ic(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Tc({path:r,Ec:!1});return o.dc(e),o}Ac(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Tc({path:r,Ec:!1});return o.Pc(),o}Rc(e){return this.Tc({path:void 0,Ec:!0})}Vc(e){return Gc(e,this.settings.methodName,this.settings.mc||!1,this.path,this.settings.fc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Pc(){if(this.path)for(let e=0;e<this.path.length;e++)this.dc(this.path.get(e))}dc(e){if(e.length===0)throw this.Vc("Document fields must not be empty");if(sT(this.hc)&&vN.test(e))throw this.Vc('Document fields cannot begin and end with "__"')}}class wN{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||wh(e)}gc(e,t,r,o=!1){return new Sm({hc:e,methodName:t,fc:r,path:Ot.emptyPath(),Ec:!1,mc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ah(n){const e=n._freezeSettings(),t=wh(n._databaseId);return new wN(n._databaseId,!!e.ignoreUndefinedProperties,t)}function oT(n,e,t,r,o,a={}){const u=n.gc(a.merge||a.mergeFields?2:0,e,t,o);Rm("Data must be an object, but it was:",u,r);const d=aT(r,u);let f,m;if(a.merge)f=new gn(u.fieldMask),m=u.fieldTransforms;else if(a.mergeFields){const v=[];for(const w of a.mergeFields){const E=xp(e,w,t);if(!u.contains(E))throw new de(Z.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);uT(v,E)||v.push(E)}f=new gn(v),m=u.fieldTransforms.filter(w=>f.covers(w.field))}else f=null,m=u.fieldTransforms;return new _N(new on(d),f,m)}class Ch extends Em{_toFieldTransform(e){if(e.hc!==2)throw e.hc===1?e.Vc(`${this._methodName}() can only appear at the top level of your update data`):e.Vc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ch}}function EN(n,e,t,r){const o=n.gc(1,e,t);Rm("Data must be an object, but it was:",o,r);const a=[],u=on.empty();Ui(r,(f,m)=>{const v=Am(e,f,t);m=It(m);const w=o.Ac(v);if(m instanceof Ch)a.push(v);else{const E=zl(m,w);E!=null&&(a.push(v),u.set(v,E))}});const d=new gn(a);return new iT(u,d,o.fieldTransforms)}function TN(n,e,t,r,o,a){const u=n.gc(1,e,t),d=[xp(e,r,t)],f=[o];if(a.length%2!=0)throw new de(Z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<a.length;E+=2)d.push(xp(e,a[E])),f.push(a[E+1]);const m=[],v=on.empty();for(let E=d.length-1;E>=0;--E)if(!uT(m,d[E])){const P=d[E];let C=f[E];C=It(C);const L=u.Ac(P);if(C instanceof Ch)m.push(P);else{const D=zl(C,L);D!=null&&(m.push(P),v.set(P,D))}}const w=new gn(m);return new iT(v,w,u.fieldTransforms)}function IN(n,e,t,r=!1){return zl(t,n.gc(r?4:3,e))}function zl(n,e){if(lT(n=It(n)))return Rm("Unsupported field value:",e,n),aT(n,e);if(n instanceof Em)return function(r,o){if(!sT(o.hc))throw o.Vc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Vc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(o);a&&o.fieldTransforms.push(a)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Ec&&e.hc!==4)throw e.Vc("Nested arrays are not supported");return function(r,o){const a=[];let u=0;for(const d of r){let f=zl(d,o.Rc(u));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),u++}return{arrayValue:{values:a}}}(n,e)}return function(r,o){if((r=It(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return cx(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=Et.fromDate(r);return{timestampValue:qc(o.serializer,a)}}if(r instanceof Et){const a=new Et(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:qc(o.serializer,a)}}if(r instanceof Tm)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ho)return{bytesValue:TE(o.serializer,r._byteString)};if(r instanceof Qt){const a=o.databaseId,u=r.firestore._databaseId;if(!u.isEqual(a))throw o.Vc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:om(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof Im)return function(u,d){return{mapValue:{fields:{[Yw]:{stringValue:Xw},[jc]:{arrayValue:{values:u.toArray().map(m=>{if(typeof m!="number")throw d.Vc("VectorValues must only contain numeric values.");return nm(d.serializer,m)})}}}}}}(r,o);throw o.Vc(`Unsupported field value: ${Ih(r)}`)}(n,e)}function aT(n,e){const t={};return Hw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ui(n,(r,o)=>{const a=zl(o,e.Ic(r));a!=null&&(t[r]=a)}),{mapValue:{fields:t}}}function lT(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Et||n instanceof Tm||n instanceof Ho||n instanceof Qt||n instanceof Em||n instanceof Im)}function Rm(n,e,t){if(!lT(t)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(t)){const r=Ih(t);throw r==="an object"?e.Vc(n+" a custom object"):e.Vc(n+" "+r)}}function xp(n,e,t){if((e=It(e))instanceof Rh)return e._internalPath;if(typeof e=="string")return Am(n,e);throw Gc("Field path arguments must be of type string or ",n,!1,void 0,t)}const SN=new RegExp("[~\\*/\\[\\]]");function Am(n,e,t){if(e.search(SN)>=0)throw Gc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Rh(...e.split("."))._internalPath}catch{throw Gc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Gc(n,e,t,r,o){const a=r&&!r.isEmpty(),u=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(a||u)&&(f+=" (found",a&&(f+=` in field ${r}`),u&&(f+=` in document ${o}`),f+=")"),new de(Z.INVALID_ARGUMENT,d+n+f)}function uT(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(e,t,r,o,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Qt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new RN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ph("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class RN extends cT{data(){return super.data()}}function Ph(n,e){return typeof e=="string"?Am(n,e):e instanceof Rh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AN(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new de(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Cm{}class hT extends Cm{}function Qc(n,e,...t){let r=[];e instanceof Cm&&r.push(e),r=r.concat(t),function(a){const u=a.filter(f=>f instanceof Pm).length,d=a.filter(f=>f instanceof xh).length;if(u>1||u>0&&d>0)throw new de(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const o of r)n=o._apply(n);return n}class xh extends hT{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new xh(e,t,r)}_apply(e){const t=this._parse(e);return fT(e._query,t),new bs(e.firestore,e.converter,vp(e._query,t))}_parse(e){const t=Ah(e.firestore);return function(a,u,d,f,m,v,w){let E;if(m.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new de(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){s0(w,v);const C=[];for(const L of w)C.push(i0(f,a,L));E={arrayValue:{values:C}}}else E=i0(f,a,w)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||s0(w,v),E=IN(d,u,w,v==="in"||v==="not-in");return mt.create(m,v,E)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Cc(n,e,t){const r=e,o=Ph("where",n);return xh._create(o,r,t)}class Pm extends Cm{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Pm(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Kn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(o,a){let u=o;const d=a.getFlattenedFilters();for(const f of d)fT(u,f),u=vp(u,f)}(e._query,t),new bs(e.firestore,e.converter,vp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class xm extends hT{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new xm(e,t)}_apply(e){const t=function(o,a,u){if(o.startAt!==null)throw new de(Z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new de(Z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Al(a,u)}(e._query,this._field,this._direction);return new bs(e.firestore,e.converter,function(o,a){const u=o.explicitOrderBy.concat([a]);return new na(o.path,o.collectionGroup,u,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,t))}}function dT(n,e="asc"){const t=e,r=Ph("orderBy",n);return xm._create(r,t)}function i0(n,e,t){if(typeof(t=It(t))=="string"){if(t==="")throw new de(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!oE(e)&&t.indexOf("/")!==-1)throw new de(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Xe.fromString(t));if(!_e.isDocumentKey(r))throw new de(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return __(n,new _e(r))}if(t instanceof Qt)return __(n,t._key);throw new de(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ih(t)}.`)}function s0(n,e){if(!Array.isArray(n)||n.length===0)throw new de(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function fT(n,e){const t=function(o,a){for(const u of o)for(const d of u.getFlattenedFilters())if(a.indexOf(d.op)>=0)return d.op;return null}(n.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new de(Z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new de(Z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class CN{convertValue(e,t="none"){switch(Vi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ht(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Li(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ie(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ui(e,(o,a)=>{r[o]=this.convertValue(a,t)}),r}convertVectorValue(e){var t,r,o;const a=(o=(r=(t=e.fields)===null||t===void 0?void 0:t[jc].arrayValue)===null||r===void 0?void 0:r.values)===null||o===void 0?void 0:o.map(u=>ht(u.doubleValue));return new Im(a)}convertGeoPoint(e){return new Tm(ht(e.latitude),ht(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=ph(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Il(e));default:return null}}convertTimestamp(e){const t=Oi(e);return new Et(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Xe.fromString(e);qe(PE(r),9688,{name:e});const o=new Sl(r.get(1),r.get(3)),a=new _e(r.popFirst(5));return o.isEqual(t)||$r(`Document ${a} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pT(n,e,t){let r;return r=n?n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class mT extends cT{constructor(e,t,r,o,a,u){super(e,t,r,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Pc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Ph("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Pc extends mT{data(e={}){return super.data(e)}}class PN{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new cl(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Pc(this._firestore,this._userDataWriter,r.key,r,new cl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new de(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,a){if(o._snapshot.oldDocs.isEmpty()){let u=0;return o._snapshot.docChanges.map(d=>{const f=new Pc(o._firestore,o._userDataWriter,d.doc.key,d.doc,new cl(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:f,oldIndex:-1,newIndex:u++}})}{let u=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(d=>a||d.type!==3).map(d=>{const f=new Pc(o._firestore,o._userDataWriter,d.doc.key,d.doc,new cl(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let m=-1,v=-1;return d.type!==0&&(m=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),v=u.indexOf(d.doc.key)),{type:xN(d.type),doc:f,oldIndex:m,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function xN(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ie(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kN(n){n=Gn(n,Qt);const e=Gn(n.firestore,Ds);return dN(wm(e),n._key).then(t=>DN(e,n,t))}class gT extends CN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ho(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Qt(this.firestore,null,t)}}function yl(n){n=Gn(n,bs);const e=Gn(n.firestore,Ds),t=wm(e),r=new gT(e);return AN(n._query),fN(t,n._query).then(o=>new PN(e,r,n,o))}function NN(n,e,t){n=Gn(n,Qt);const r=Gn(n.firestore,Ds),o=pT(n.converter,e);return kh(r,[oT(Ah(r),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,xn.none())])}function o0(n,e,t,...r){n=Gn(n,Qt);const o=Gn(n.firestore,Ds),a=Ah(o);let u;return u=typeof(e=It(e))=="string"||e instanceof Rh?TN(a,"updateDoc",n._key,e,t,r):EN(a,"updateDoc",n._key,e),kh(o,[u.toMutation(n._key,xn.exists(!0))])}function bN(n){return kh(Gn(n.firestore,Ds),[new rm(n._key,xn.none())])}function km(n,e){const t=Gn(n.firestore,Ds),r=gl(n),o=pT(n.converter,e);return kh(t,[oT(Ah(n.firestore),"addDoc",r._key,o,n.converter!==null,{}).toMutation(r._key,xn.exists(!1))]).then(()=>r)}function kh(n,e){return function(r,o){const a=new Ur;return r.asyncQueue.enqueueAndForget(async()=>eN(await hN(r),o,a)),a.promise}(wm(n),e)}function DN(n,e,t){const r=t.docs.get(e._key),o=new gT(n);return new mT(n,o,e._key,r,new cl(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){Zo=o})(Xo),Fo(new Is("firestore",(r,{instanceIdentifier:o,options:a})=>{const u=r.getProvider("app").getImmediate(),d=new Ds(new SP(r.getProvider("auth-internal")),new CP(u,r.getProvider("app-check-internal")),function(m,v){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new de(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Sl(m.options.projectId,v)}(u,o),u);return a=Object.assign({useFetchStreams:t},a),d._setSettings(a),d},"PUBLIC").setMultipleInstances(!0)),ki(a_,l_,e),ki(a_,l_,"esm2017")})();var ON="firebase",LN="11.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ki(ON,LN,"app");function Nm(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(n);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(n,r[o])&&(t[r[o]]=n[r[o]]);return t}function yT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const VN=yT,vT=new Vl("auth","Firebase",yT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jc=new Wp("@firebase/auth");function MN(n,...e){Jc.logLevel<=Le.WARN&&Jc.warn(`Auth (${Xo}): ${n}`,...e)}function xc(n,...e){Jc.logLevel<=Le.ERROR&&Jc.error(`Auth (${Xo}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qn(n,...e){throw bm(n,...e)}function pr(n,...e){return bm(n,...e)}function _T(n,e,t){const r=Object.assign(Object.assign({},VN()),{[e]:t});return new Vl("auth","Firebase",r).create(e,{appName:n.name})}function jr(n){return _T(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function bm(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return vT.create(n,...e)}function Te(n,e,...t){if(!n)throw bm(e,...t)}function Vr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw xc(e),new Error(e)}function Hr(n,e){n||Vr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kp(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function FN(){return a0()==="http:"||a0()==="https:"}function a0(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(FN()||tC()||"connection"in navigator)?navigator.onLine:!0}function jN(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(e,t){this.shortDelay=e,this.longDelay=t,Hr(t>e,"Short delay should be less than long delay!"),this.isMobile=XA()||nC()}get(){return UN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dm(n,e){Hr(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Vr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Vr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Vr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],$N=new $l(3e4,6e4);function Bi(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Gr(n,e,t,r,o={}){return ET(n,o,async()=>{let a={},u={};r&&(e==="GET"?u=r:a={body:JSON.stringify(r)});const d=Ml(Object.assign({key:n.config.apiKey},u)).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const m=Object.assign({method:e,headers:f},a);return eC()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&Ll(n.emulatorConfig.host)&&(m.credentials="include"),wT.fetch()(await TT(n,n.config.apiHost,t,d),m)})}async function ET(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},BN),e);try{const o=new HN(n),a=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw gc(n,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const d=a.ok?u.errorMessage:u.error.message,[f,m]=d.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw gc(n,"credential-already-in-use",u);if(f==="EMAIL_EXISTS")throw gc(n,"email-already-in-use",u);if(f==="USER_DISABLED")throw gc(n,"user-disabled",u);const v=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw _T(n,v,m);Qn(n,v)}}catch(o){if(o instanceof Kr)throw o;Qn(n,"network-request-failed",{message:String(o)})}}async function ql(n,e,t,r,o={}){const a=await Gr(n,e,t,r,o);return"mfaPendingCredential"in a&&Qn(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function TT(n,e,t,r){const o=`${e}${t}?${r}`,a=n,u=a.config.emulator?Dm(n.config,o):`${n.config.apiScheme}://${o}`;return zN.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(u).toString():u}function qN(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class HN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(pr(this.auth,"network-request-failed")),$N.get())})}}function gc(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const o=pr(n,e,r);return o.customData._tokenResponse=t,o}function l0(n){return n!==void 0&&n.enterprise!==void 0}class WN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return qN(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function KN(n,e){return Gr(n,"GET","/v2/recaptchaConfig",Bi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GN(n,e){return Gr(n,"POST","/v1/accounts:delete",e)}async function Yc(n,e){return Gr(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vl(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function QN(n,e=!1){const t=It(n),r=await t.getIdToken(e),o=Om(r);Te(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const a=typeof o.firebase=="object"?o.firebase:void 0,u=a==null?void 0:a.sign_in_provider;return{claims:o,token:r,authTime:vl(Qf(o.auth_time)),issuedAtTime:vl(Qf(o.iat)),expirationTime:vl(Qf(o.exp)),signInProvider:u||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Qf(n){return Number(n)*1e3}function Om(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return xc("JWT malformed, contained fewer than 3 sections"),null;try{const o=Tw(t);return o?JSON.parse(o):(xc("Failed to decode base64 JWT payload"),null)}catch(o){return xc("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function u0(n){const e=Om(n);return Te(e,"internal-error"),Te(typeof e.exp<"u","internal-error"),Te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wo(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Kr&&JN(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function JN({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=vl(this.lastLoginAt),this.creationTime=vl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xc(n){var e;const t=n.auth,r=await n.getIdToken(),o=await Wo(n,Yc(t,{idToken:r}));Te(o==null?void 0:o.users.length,t,"internal-error");const a=o.users[0];n._notifyReloadListener(a);const u=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?IT(a.providerUserInfo):[],d=ZN(n.providerData,u),f=n.isAnonymous,m=!(n.email&&a.passwordHash)&&!(d!=null&&d.length),v=f?m:!1,w={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:d,metadata:new Np(a.createdAt,a.lastLoginAt),isAnonymous:v};Object.assign(n,w)}async function XN(n){const e=It(n);await Xc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function ZN(n,e){return[...n.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function IT(n){return n.map(e=>{var{providerId:t}=e,r=Nm(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e2(n,e){const t=await ET(n,{},async()=>{const r=Ml({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:a}=n.config,u=await TT(n,o,"/v1/token",`key=${a}`),d=await n._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",wT.fetch()(u,{method:"POST",headers:d,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function t2(n,e){return Gr(n,"POST","/v2/accounts:revokeToken",Bi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Te(e.idToken,"internal-error"),Te(typeof e.idToken<"u","internal-error"),Te(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):u0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Te(e.length!==0,"internal-error");const t=u0(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:o,expiresIn:a}=await e2(e,t);this.updateTokensAndExpiration(r,o,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:o,expirationTime:a}=t,u=new Lo;return r&&(Te(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),o&&(Te(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),a&&(Te(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Lo,this.toJSON())}_performRefresh(){return Vr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ei(n,e){Te(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Wn{constructor(e){var{uid:t,auth:r,stsTokenManager:o}=e,a=Nm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new YN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Np(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Wo(this,this.stsTokenManager.getToken(this.auth,e));return Te(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return QN(this,e)}reload(){return XN(this)}_assign(e){this!==e&&(Te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Wn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Xc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Pn(this.auth.app))return Promise.reject(jr(this.auth));const e=await this.getIdToken();return await Wo(this,GN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,o,a,u,d,f,m,v;const w=(r=t.displayName)!==null&&r!==void 0?r:void 0,E=(o=t.email)!==null&&o!==void 0?o:void 0,P=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,C=(u=t.photoURL)!==null&&u!==void 0?u:void 0,L=(d=t.tenantId)!==null&&d!==void 0?d:void 0,D=(f=t._redirectEventId)!==null&&f!==void 0?f:void 0,U=(m=t.createdAt)!==null&&m!==void 0?m:void 0,W=(v=t.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:B,emailVerified:J,isAnonymous:ie,providerData:Y,stsTokenManager:k}=t;Te(B&&k,e,"internal-error");const I=Lo.fromJSON(this.name,k);Te(typeof B=="string",e,"internal-error"),Ei(w,e.name),Ei(E,e.name),Te(typeof J=="boolean",e,"internal-error"),Te(typeof ie=="boolean",e,"internal-error"),Ei(P,e.name),Ei(C,e.name),Ei(L,e.name),Ei(D,e.name),Ei(U,e.name),Ei(W,e.name);const S=new Wn({uid:B,auth:e,email:E,emailVerified:J,displayName:w,isAnonymous:ie,photoURL:C,phoneNumber:P,tenantId:L,stsTokenManager:I,createdAt:U,lastLoginAt:W});return Y&&Array.isArray(Y)&&(S.providerData=Y.map(x=>Object.assign({},x))),D&&(S._redirectEventId=D),S}static async _fromIdTokenResponse(e,t,r=!1){const o=new Lo;o.updateFromServerResponse(t);const a=new Wn({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await Xc(a),a}static async _fromGetAccountInfoResponse(e,t,r){const o=t.users[0];Te(o.localId!==void 0,"internal-error");const a=o.providerUserInfo!==void 0?IT(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!(a!=null&&a.length),d=new Lo;d.updateFromIdToken(r);const f=new Wn({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:u}),m={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Np(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(a!=null&&a.length)};return Object.assign(f,m),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c0=new Map;function Mr(n){Hr(n instanceof Function,"Expected a class definition");let e=c0.get(n);return e?(Hr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,c0.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}ST.type="NONE";const h0=ST;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kc(n,e,t){return`firebase:${n}:${e}:${t}`}class Vo{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:o,name:a}=this.auth;this.fullUserKey=kc(this.userKey,o.apiKey,a),this.fullPersistenceKey=kc("persistence",o.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Yc(this.auth,{idToken:e}).catch(()=>{});return t?Wn._fromGetAccountInfoResponse(this.auth,t,e):null}return Wn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Vo(Mr(h0),e,r);const o=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let a=o[0]||Mr(h0);const u=kc(r,e.config.apiKey,e.name);let d=null;for(const m of t)try{const v=await m._get(u);if(v){let w;if(typeof v=="string"){const E=await Yc(e,{idToken:v}).catch(()=>{});if(!E)break;w=await Wn._fromGetAccountInfoResponse(e,E,v)}else w=Wn._fromJSON(e,v);m!==a&&(d=w),a=m;break}}catch{}const f=o.filter(m=>m._shouldAllowMigration);return!a._shouldAllowMigration||!f.length?new Vo(a,e,r):(a=f[0],d&&await a._set(u,d.toJSON()),await Promise.all(t.map(async m=>{if(m!==a)try{await m._remove(u)}catch{}})),new Vo(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d0(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(PT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(RT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(kT(e))return"Blackberry";if(NT(e))return"Webos";if(AT(e))return"Safari";if((e.includes("chrome/")||CT(e))&&!e.includes("edge/"))return"Chrome";if(xT(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function RT(n=qt()){return/firefox\//i.test(n)}function AT(n=qt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function CT(n=qt()){return/crios\//i.test(n)}function PT(n=qt()){return/iemobile/i.test(n)}function xT(n=qt()){return/android/i.test(n)}function kT(n=qt()){return/blackberry/i.test(n)}function NT(n=qt()){return/webos/i.test(n)}function Lm(n=qt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function n2(n=qt()){var e;return Lm(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function r2(){return rC()&&document.documentMode===10}function bT(n=qt()){return Lm(n)||xT(n)||NT(n)||kT(n)||/windows phone/i.test(n)||PT(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DT(n,e=[]){let t;switch(n){case"Browser":t=d0(qt());break;case"Worker":t=`${d0(qt())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Xo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((u,d)=>{try{const f=e(a);u(f)}catch(f){d(f)}});r.onAbort=t,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s2(n,e={}){return Gr(n,"GET","/v2/passwordPolicy",Bi(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o2=6;class a2{constructor(e){var t,r,o,a;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=u.minPasswordLength)!==null&&t!==void 0?t:o2,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,o,a,u,d;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(t=f.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),f.isValid&&(f.isValid=(r=f.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),f.isValid&&(f.isValid=(o=f.containsLowercaseLetter)!==null&&o!==void 0?o:!0),f.isValid&&(f.isValid=(a=f.containsUppercaseLetter)!==null&&a!==void 0?a:!0),f.isValid&&(f.isValid=(u=f.containsNumericCharacter)!==null&&u!==void 0?u:!0),f.isValid&&(f.isValid=(d=f.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),f}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,o,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(e,t,r,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new f0(this),this.idTokenSubscription=new f0(this),this.beforeStateQueue=new i2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=vT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Mr(t)),this._initializationPromise=this.queue(async()=>{var r,o,a;if(!this._deleted&&(this.persistenceManager=await Vo.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Yc(this,{idToken:e}),r=await Wn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Pn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let o=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=o==null?void 0:o._redirectEventId,f=await this.tryRedirectSignIn(e);(!u||u===d)&&(f!=null&&f.user)&&(o=f.user,a=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(o)}catch(u){o=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Xc(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=jN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Pn(this.app))return Promise.reject(jr(this));const t=e?It(e):null;return t&&Te(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Pn(this.app)?Promise.reject(jr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Pn(this.app)?Promise.reject(jr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Mr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await s2(this),t=new a2(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Vl("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await t2(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Mr(e)||this._popupRedirectResolver;Te(t,this,"argument-error"),this.redirectPersistenceManager=await Vo.create(this,[Mr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,o){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let u=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Te(d,this,"internal-error"),d.then(()=>{u||a(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,r,o);return()=>{u=!0,f()}}else{const f=e.addObserver(t);return()=>{u=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=DT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(Pn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&MN(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Os(n){return It(n)}class f0{constructor(e){this.auth=e,this.observer=null,this.addObserver=hC(t=>this.observer=t)}get next(){return Te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function u2(n){Nh=n}function OT(n){return Nh.loadJS(n)}function c2(){return Nh.recaptchaEnterpriseScript}function h2(){return Nh.gapiScript}function d2(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class f2{constructor(){this.enterprise=new p2}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class p2{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const m2="recaptcha-enterprise",LT="NO_RECAPTCHA";class g2{constructor(e){this.type=m2,this.auth=Os(e)}async verify(e="verify",t=!1){async function r(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(u,d)=>{KN(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const m=new WN(f);return a.tenantId==null?a._agentRecaptchaConfig=m:a._tenantRecaptchaConfigs[a.tenantId]=m,u(m.siteKey)}}).catch(f=>{d(f)})})}function o(a,u,d){const f=window.grecaptcha;l0(f)?f.enterprise.ready(()=>{f.enterprise.execute(a,{action:e}).then(m=>{u(m)}).catch(()=>{u(LT)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new f2().execute("siteKey",{action:"verify"}):new Promise((a,u)=>{r(this.auth).then(d=>{if(!t&&l0(window.grecaptcha))o(d,a,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let f=c2();f.length!==0&&(f+=d),OT(f).then(()=>{o(d,a,u)}).catch(m=>{u(m)})}}).catch(d=>{u(d)})})}}async function p0(n,e,t,r=!1,o=!1){const a=new g2(n);let u;if(o)u=LT;else try{u=await a.verify(t)}catch{u=await a.verify(t,!0)}const d=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const f=d.phoneEnrollmentInfo.phoneNumber,m=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:m,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const f=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return r?Object.assign(d,{captchaResp:u}):Object.assign(d,{captchaResponse:u}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function bp(n,e,t,r,o){var a;if(!((a=n._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await p0(n,e,t,t==="getOobCode");return r(n,u)}else return r(n,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await p0(n,e,t,t==="getOobCode");return r(n,d)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y2(n,e){const t=Gp(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),a=t.getOptions();if(Ts(a,e??{}))return o;Qn(o,"already-initialized")}return t.initialize({options:e})}function v2(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Mr);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function _2(n,e,t){const r=Os(n);Te(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,a=VT(e),{host:u,port:d}=w2(e),f=d===null?"":`:${d}`,m={url:`${a}//${u}${f}/`},v=Object.freeze({host:u,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){Te(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Te(Ts(m,r.config.emulator)&&Ts(v,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=m,r.emulatorConfig=v,r.settings.appVerificationDisabledForTesting=!0,Ll(u)?(Aw(`${a}//${u}${f}`),Cw("Auth",!0)):E2()}function VT(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function w2(n){const e=VT(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const a=o[1];return{host:a,port:m0(r.substr(a.length+1))}}else{const[a,u]=r.split(":");return{host:a,port:m0(u)}}}function m0(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function E2(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Vr("not implemented")}_getIdTokenResponse(e){return Vr("not implemented")}_linkToIdToken(e,t){return Vr("not implemented")}_getReauthenticationResolver(e){return Vr("not implemented")}}async function T2(n,e){return Gr(n,"POST","/v1/accounts:update",e)}async function I2(n,e){return Gr(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S2(n,e){return ql(n,"POST","/v1/accounts:signInWithPassword",Bi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R2(n,e){return ql(n,"POST","/v1/accounts:signInWithEmailLink",Bi(n,e))}async function A2(n,e){return ql(n,"POST","/v1/accounts:signInWithEmailLink",Bi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl extends Vm{constructor(e,t,r,o=null){super("password",r),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new xl(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new xl(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return bp(e,t,"signInWithPassword",S2);case"emailLink":return R2(e,{email:this._email,oobCode:this._password});default:Qn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return bp(e,r,"signUpPassword",I2);case"emailLink":return A2(e,{idToken:t,email:this._email,oobCode:this._password});default:Qn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mo(n,e){return ql(n,"POST","/v1/accounts:signInWithIdp",Bi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C2="http://localhost";class As extends Vm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new As(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Qn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o}=t,a=Nm(t,["providerId","signInMethod"]);if(!r||!o)return null;const u=new As(r,o);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Mo(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Mo(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Mo(e,t)}buildRequest(){const e={requestUri:C2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ml(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P2(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function x2(n){const e=sl(ol(n)).link,t=e?sl(ol(e)).deep_link_id:null,r=sl(ol(n)).deep_link_id;return(r?sl(ol(r)).link:null)||r||t||e||n}class Mm{constructor(e){var t,r,o,a,u,d;const f=sl(ol(e)),m=(t=f.apiKey)!==null&&t!==void 0?t:null,v=(r=f.oobCode)!==null&&r!==void 0?r:null,w=P2((o=f.mode)!==null&&o!==void 0?o:null);Te(m&&v&&w,"argument-error"),this.apiKey=m,this.operation=w,this.code=v,this.continueUrl=(a=f.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(u=f.lang)!==null&&u!==void 0?u:null,this.tenantId=(d=f.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const t=x2(e);try{return new Mm(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(){this.providerId=ia.PROVIDER_ID}static credential(e,t){return xl._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Mm.parseLink(t);return Te(r,"argument-error"),xl._fromEmailAndCode(e,r.code,r.tenantId)}}ia.PROVIDER_ID="password";ia.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ia.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl extends MT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti extends Hl{constructor(){super("facebook.com")}static credential(e){return As._fromParams({providerId:Ti.PROVIDER_ID,signInMethod:Ti.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ti.credentialFromTaggedObject(e)}static credentialFromError(e){return Ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ti.credential(e.oauthAccessToken)}catch{return null}}}Ti.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ti.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii extends Hl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return As._fromParams({providerId:Ii.PROVIDER_ID,signInMethod:Ii.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ii.credentialFromTaggedObject(e)}static credentialFromError(e){return Ii.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Ii.credential(t,r)}catch{return null}}}Ii.GOOGLE_SIGN_IN_METHOD="google.com";Ii.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si extends Hl{constructor(){super("github.com")}static credential(e){return As._fromParams({providerId:Si.PROVIDER_ID,signInMethod:Si.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Si.credentialFromTaggedObject(e)}static credentialFromError(e){return Si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Si.credential(e.oauthAccessToken)}catch{return null}}}Si.GITHUB_SIGN_IN_METHOD="github.com";Si.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri extends Hl{constructor(){super("twitter.com")}static credential(e,t){return As._fromParams({providerId:Ri.PROVIDER_ID,signInMethod:Ri.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ri.credentialFromTaggedObject(e)}static credentialFromError(e){return Ri.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Ri.credential(t,r)}catch{return null}}}Ri.TWITTER_SIGN_IN_METHOD="twitter.com";Ri.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k2(n,e){return ql(n,"POST","/v1/accounts:signUp",Bi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,o=!1){const a=await Wn._fromIdTokenResponse(e,r,o),u=g0(r);return new Cs({user:a,providerId:u,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const o=g0(r);return new Cs({user:e,providerId:o,_tokenResponse:r,operationType:t})}}function g0(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc extends Kr{constructor(e,t,r,o){var a;super(t.code,t.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,Zc.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,o){return new Zc(e,t,r,o)}}function FT(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Zc._fromErrorAndOperation(n,a,e,r):a})}async function N2(n,e,t=!1){const r=await Wo(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Cs._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b2(n,e,t=!1){const{auth:r}=n;if(Pn(r.app))return Promise.reject(jr(r));const o="reauthenticate";try{const a=await Wo(n,FT(r,o,e,n),t);Te(a.idToken,r,"internal-error");const u=Om(a.idToken);Te(u,r,"internal-error");const{sub:d}=u;return Te(n.uid===d,r,"user-mismatch"),Cs._forOperation(n,o,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Qn(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UT(n,e,t=!1){if(Pn(n.app))return Promise.reject(jr(n));const r="signIn",o=await FT(n,r,e),a=await Cs._fromIdTokenResponse(n,r,o);return t||await n._updateCurrentUser(a.user),a}async function D2(n,e){return UT(Os(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jT(n){const e=Os(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function O2(n,e,t){if(Pn(n.app))return Promise.reject(jr(n));const r=Os(n),u=await bp(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",k2).catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&jT(n),f}),d=await Cs._fromIdTokenResponse(r,"signIn",u);return await r._updateCurrentUser(d.user),d}function y0(n,e,t){return Pn(n.app)?Promise.reject(jr(n)):D2(It(n),ia.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&jT(n),r})}function L2(n,e){return V2(It(n),null,e)}async function V2(n,e,t){const{auth:r}=n,a={idToken:await n.getIdToken(),returnSecureToken:!0};t&&(a.password=t);const u=await Wo(n,T2(r,a));await n._updateTokensIfNecessary(u,!0)}function M2(n,e,t,r){return It(n).onIdTokenChanged(e,t,r)}function F2(n,e,t){return It(n).beforeAuthStateChanged(e,t)}function U2(n,e,t,r){return It(n).onAuthStateChanged(e,t,r)}function j2(n){return It(n).signOut()}const eh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(eh,"1"),this.storage.removeItem(eh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B2=1e3,z2=10;class zT extends BT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=bT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),o=this.localCache[t];r!==o&&e(t,o,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,d,f)=>{this.notifyListeners(u,f)});return}const r=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(r);!t&&this.localCache[r]===u||this.notifyListeners(r,u)},a=this.storage.getItem(r);r2()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,z2):o()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},B2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}zT.type="LOCAL";const $2=zT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T extends BT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}$T.type="SESSION";const qT=$T;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q2(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const r=new bh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:o,data:a}=t.data,u=this.handlersMap[o];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const d=Array.from(u).map(async m=>m(t.origin,a)),f=await q2(d);t.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}bh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fm(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let a,u;return new Promise((d,f)=>{const m=Fm("",20);o.port1.start();const v=setTimeout(()=>{f(new Error("unsupported_event"))},r);u={messageChannel:o,onMessage(w){const E=w;if(E.data.eventId===m)switch(E.data.status){case"ack":clearTimeout(v),a=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(E.data.response);break;default:clearTimeout(v),clearTimeout(a),f(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mr(){return window}function W2(n){mr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HT(){return typeof mr().WorkerGlobalScope<"u"&&typeof mr().importScripts=="function"}async function K2(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function G2(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function Q2(){return HT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WT="firebaseLocalStorageDb",J2=1,th="firebaseLocalStorage",KT="fbase_key";class Wl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Dh(n,e){return n.transaction([th],e?"readwrite":"readonly").objectStore(th)}function Y2(){const n=indexedDB.deleteDatabase(WT);return new Wl(n).toPromise()}function Dp(){const n=indexedDB.open(WT,J2);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(th,{keyPath:KT})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(th)?e(r):(r.close(),await Y2(),e(await Dp()))})})}async function v0(n,e,t){const r=Dh(n,!0).put({[KT]:e,value:t});return new Wl(r).toPromise()}async function X2(n,e){const t=Dh(n,!1).get(e),r=await new Wl(t).toPromise();return r===void 0?null:r.value}function _0(n,e){const t=Dh(n,!0).delete(e);return new Wl(t).toPromise()}const Z2=800,eb=3;class GT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Dp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>eb)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return HT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=bh._getInstance(Q2()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await K2(),!this.activeServiceWorker)return;this.sender=new H2(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||G2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Dp();return await v0(e,eh,"1"),await _0(e,eh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>v0(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>X2(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>_0(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const a=Dh(o,!1).getAll();return new Wl(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:a}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Z2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}GT.type="LOCAL";const tb=GT;new $l(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nb(n,e){return e?Mr(e):(Te(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um extends Vm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Mo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Mo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Mo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function rb(n){return UT(n.auth,new Um(n),n.bypassAuthState)}function ib(n){const{auth:e,user:t}=n;return Te(t,e,"internal-error"),b2(t,new Um(n),n.bypassAuthState)}async function sb(n){const{auth:e,user:t}=n;return Te(t,e,"internal-error"),N2(t,new Um(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{constructor(e,t,r,o,a=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:o,tenantId:a,error:u,type:d}=e;if(u){this.reject(u);return}const f={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(f))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return rb;case"linkViaPopup":case"linkViaRedirect":return sb;case"reauthViaPopup":case"reauthViaRedirect":return ib;default:Qn(this.auth,"internal-error")}}resolve(e){Hr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Hr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ob=new $l(2e3,1e4);class Do extends QT{constructor(e,t,r,o,a){super(e,t,o,a),this.provider=r,this.authWindow=null,this.pollId=null,Do.currentPopupAction&&Do.currentPopupAction.cancel(),Do.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Te(e,this.auth,"internal-error"),e}async onExecution(){Hr(this.filter.length===1,"Popup operations only handle one event");const e=Fm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(pr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(pr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Do.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(pr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ob.get())};e()}}Do.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ab="pendingRedirect",Nc=new Map;class lb extends QT{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Nc.get(this.auth._key());if(!e){try{const r=await ub(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Nc.set(this.auth._key(),e)}return this.bypassAuthState||Nc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function ub(n,e){const t=db(e),r=hb(n);if(!await r._isAvailable())return!1;const o=await r._get(t)==="true";return await r._remove(t),o}function cb(n,e){Nc.set(n._key(),e)}function hb(n){return Mr(n._redirectPersistence)}function db(n){return kc(ab,n.config.apiKey,n.name)}async function fb(n,e,t=!1){if(Pn(n.app))return Promise.reject(jr(n));const r=Os(n),o=nb(r,e),u=await new lb(r,o,t).execute();return u&&!t&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pb=10*60*1e3;class mb{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!gb(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!JT(e)){const o=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(pr(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=pb&&this.cachedEventUids.clear(),this.cachedEventUids.has(w0(e))}saveEventToCache(e){this.cachedEventUids.add(w0(e)),this.lastProcessedEventTime=Date.now()}}function w0(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function JT({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function gb(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return JT(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yb(n,e={}){return Gr(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vb=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_b=/^https?/;async function wb(n){if(n.config.emulator)return;const{authorizedDomains:e}=await yb(n);for(const t of e)try{if(Eb(t))return}catch{}Qn(n,"unauthorized-domain")}function Eb(n){const e=kp(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===r}if(!_b.test(t))return!1;if(vb.test(n))return r===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tb=new $l(3e4,6e4);function E0(){const n=mr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Ib(n){return new Promise((e,t)=>{var r,o,a;function u(){E0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{E0(),t(pr(n,"network-request-failed"))},timeout:Tb.get()})}if(!((o=(r=mr().gapi)===null||r===void 0?void 0:r.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((a=mr().gapi)===null||a===void 0)&&a.load)u();else{const d=d2("iframefcb");return mr()[d]=()=>{gapi.load?u():t(pr(n,"network-request-failed"))},OT(`${h2()}?onload=${d}`).catch(f=>t(f))}}).catch(e=>{throw bc=null,e})}let bc=null;function Sb(n){return bc=bc||Ib(n),bc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rb=new $l(5e3,15e3),Ab="__/auth/iframe",Cb="emulator/auth/iframe",Pb={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},xb=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function kb(n){const e=n.config;Te(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Dm(e,Cb):`https://${n.config.authDomain}/${Ab}`,r={apiKey:e.apiKey,appName:n.name,v:Xo},o=xb.get(n.config.apiHost);o&&(r.eid=o);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${Ml(r).slice(1)}`}async function Nb(n){const e=await Sb(n),t=mr().gapi;return Te(t,n,"internal-error"),e.open({where:document.body,url:kb(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Pb,dontclear:!0},r=>new Promise(async(o,a)=>{await r.restyle({setHideOnLeave:!1});const u=pr(n,"network-request-failed"),d=mr().setTimeout(()=>{a(u)},Rb.get());function f(){mr().clearTimeout(d),o(r)}r.ping(f).then(f,()=>{a(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bb={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Db=500,Ob=600,Lb="_blank",Vb="http://localhost";class T0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Mb(n,e,t,r=Db,o=Ob){const a=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const f=Object.assign(Object.assign({},bb),{width:r.toString(),height:o.toString(),top:a,left:u}),m=qt().toLowerCase();t&&(d=CT(m)?Lb:t),RT(m)&&(e=e||Vb,f.scrollbars="yes");const v=Object.entries(f).reduce((E,[P,C])=>`${E}${P}=${C},`,"");if(n2(m)&&d!=="_self")return Fb(e||"",d),new T0(null);const w=window.open(e||"",d,v);Te(w,n,"popup-blocked");try{w.focus()}catch{}return new T0(w)}function Fb(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ub="__/auth/handler",jb="emulator/auth/handler",Bb=encodeURIComponent("fac");async function I0(n,e,t,r,o,a){Te(n.config.authDomain,n,"auth-domain-config-required"),Te(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Xo,eventId:o};if(e instanceof MT){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",cC(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,w]of Object.entries({}))u[v]=w}if(e instanceof Hl){const v=e.getScopes().filter(w=>w!=="");v.length>0&&(u.scopes=v.join(","))}n.tenantId&&(u.tid=n.tenantId);const d=u;for(const v of Object.keys(d))d[v]===void 0&&delete d[v];const f=await n._getAppCheckToken(),m=f?`#${Bb}=${encodeURIComponent(f)}`:"";return`${zb(n)}?${Ml(d).slice(1)}${m}`}function zb({config:n}){return n.emulator?Dm(n,jb):`https://${n.authDomain}/${Ub}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jf="webStorageSupport";class $b{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=qT,this._completeRedirectFn=fb,this._overrideRedirectResult=cb}async _openPopup(e,t,r,o){var a;Hr((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const u=await I0(e,t,r,kp(),o);return Mb(e,u,Fm())}async _openRedirect(e,t,r,o){await this._originValidation(e);const a=await I0(e,t,r,kp(),o);return W2(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:a}=this.eventManagers[t];return o?Promise.resolve(o):(Hr(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await Nb(e),r=new mb(e);return t.register("authEvent",o=>(Te(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Jf,{type:Jf},o=>{var a;const u=(a=o==null?void 0:o[0])===null||a===void 0?void 0:a[Jf];u!==void 0&&t(!!u),Qn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=wb(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return bT()||AT()||Lm()}}const qb=$b;var S0="@firebase/auth",R0="1.10.6";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wb(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Kb(n){Fo(new Is("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=r.options;Te(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:u,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:DT(n)},m=new l2(r,o,a,f);return v2(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Fo(new Is("auth-internal",e=>{const t=Os(e.getProvider("auth").getImmediate());return(r=>new Hb(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ki(S0,R0,Wb(n)),ki(S0,R0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gb=5*60,Qb=Rw("authIdTokenMaxAge")||Gb;let A0=null;const Jb=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Qb)return;const o=t==null?void 0:t.token;A0!==o&&(A0=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function Yb(n=Nw()){const e=Gp(n,"auth");if(e.isInitialized())return e.getImmediate();const t=y2(n,{popupRedirectResolver:qb,persistence:[tb,$2,qT]}),r=Rw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const u=Jb(a.toString());F2(t,u,()=>u(t.currentUser)),M2(t,d=>u(d))}}const o=Iw("auth");return o&&_2(t,`http://${o}`),t}function Xb(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}u2({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=o=>{const a=pr("internal-error");a.customData=o,t(a)},r.type="text/javascript",r.charset="UTF-8",Xb().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Kb("Browser");const Zb={apiKey:"AIzaSyDummyKeyForDevelopment123456789",authDomain:"pointage-app-noisy.firebaseapp.com",projectId:"pointage-app-noisy",storageBucket:"pointage-app-noisy.appspot.com",messagingSenderId:"123456789012",appId:"1:123456789012:web:abcdef1234567890"},YT=kw(Zb),Cn=gN(YT),il=Yb(YT),eD=()=>{const[n]=DS(),[e,t]=H.useState(!0),[r,o]=H.useState(null),[a,u]=H.useState(!1),[d,f]=H.useState(!1),[m,v]=H.useState(null),w=n.get("token"),E=n.get("type");H.useEffect(()=>{window.history.pushState(null,"",window.location.href);const C=()=>{window.history.pushState(null,"",window.location.href)};return window.addEventListener("popstate",C),()=>{window.removeEventListener("popstate",C)}},[]),H.useEffect(()=>{(async()=>{try{if(!w||!E||E!=="entree"&&E!=="sortie")throw new Error("Paramètres de pointage invalides");if(!/^QR-\d{4}-\d{2}-\d{2}$/.test(w))throw new Error("Format de token invalide");const U=(await lt.get("https://api.ipify.org?format=json")).data.ip,W=w.substring(3),B=Ci(Cn,"pointages"),J=Qc(B,Cc("ip","==",U),Cc("date","==",W),Cc("type","==",E)),ie=await yl(J);if(!ie.empty){f(!0),v(ie.docs[0].data()),t(!1);return}let Y=null,k=null,I="Adresse non disponible";try{const x=await new Promise((N,V)=>{navigator.geolocation.getCurrentPosition(N,V,{enableHighAccuracy:!0,timeout:5e3,maximumAge:0})});if(Y=x.coords.latitude,k=x.coords.longitude,Y&&k){const N=await lt.get(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${Y}&lon=${k}&zoom=18&addressdetails=1`);N.data&&N.data.display_name&&(I=N.data.display_name)}}catch(x){console.error("Erreur de géolocalisation:",x)}const S={ip:U,latitude:Y,longitude:k,address:I,timestamp:new Date().toISOString(),type:E,token:w};await km(Ci(Cn,"pointages"),{...S,date:W,createdAt:new Date().toISOString()}),v(S),u(!0)}catch(L){console.error("Erreur lors du pointage:",L),o(L instanceof Error?L.message:"Une erreur est survenue")}finally{t(!1)}})()},[w,E]);const P=C=>{const L=new Date(C);return new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(L)};return O.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-50 p-4",children:[O.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 max-w-md w-full",children:[O.jsx("div",{className:"flex justify-center mb-6",children:O.jsx("img",{src:"/images/Logo_Noisy_Sec.svg",alt:"Logo Mairie de Noisy-le-Sec",className:"h-20"})}),O.jsx("h1",{className:"text-2xl font-bold text-center text-blue-800 mb-6",children:"Système de Pointage"}),e&&O.jsxs("div",{className:"text-center p-4",children:[O.jsx("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-blue-600 border-r-transparent"}),O.jsx("p",{className:"mt-2 text-gray-600",children:"Traitement en cours..."})]}),r&&O.jsxs("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-4",children:[O.jsx("p",{className:"font-bold",children:"Erreur"}),O.jsx("p",{children:r})]}),!e&&!r&&d&&m&&O.jsxs("div",{className:"bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4 mb-4",children:[O.jsx("p",{className:"font-bold",children:"Pointage déjà effectué"}),O.jsxs("p",{children:["Vous avez déjà enregistré votre ",m.type==="entree"?"entrée":"sortie"," aujourd'hui à ",P(m.timestamp),"."]})]}),!e&&!r&&a&&m&&!d&&O.jsxs("div",{className:"bg-green-100 border-l-4 border-green-500 text-green-700 p-4 mb-4",children:[O.jsx("p",{className:"font-bold",children:"Pointage réussi !"}),O.jsxs("p",{children:["Votre ",m.type==="entree"?"entrée":"sortie"," a été enregistrée avec succès."]})]}),!e&&!r&&m&&O.jsxs("div",{className:"mt-4",children:[O.jsx("h2",{className:"text-lg font-semibold text-blue-700 mb-2",children:"Détails du pointage :"}),O.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[O.jsxs("p",{className:"text-sm text-gray-700 mb-2",children:[O.jsx("span",{className:"font-semibold",children:"Date et heure :"})," ",P(m.timestamp)]}),O.jsxs("p",{className:"text-sm text-gray-700 mb-2",children:[O.jsx("span",{className:"font-semibold",children:"Type :"})," ",m.type==="entree"?"Entrée":"Sortie"]}),O.jsxs("p",{className:"text-sm text-gray-700 mb-2",children:[O.jsx("span",{className:"font-semibold",children:"Adresse IP :"})," ",m.ip]}),m.latitude&&m.longitude&&O.jsxs("p",{className:"text-sm text-gray-700 mb-2",children:[O.jsx("span",{className:"font-semibold",children:"Coordonnées GPS :"})," ",m.latitude.toFixed(6),", ",m.longitude.toFixed(6)]}),O.jsxs("p",{className:"text-sm text-gray-700",children:[O.jsx("span",{className:"font-semibold",children:"Adresse :"})," ",m.address]})]})]})]}),O.jsxs("div",{className:"mt-6 text-sm text-gray-500",children:["© ",new Date().getFullYear()," - Ville de Noisy-le-Sec - Tous droits réservés"]})]})},tD="modulepreload",nD=function(n){return"/"+n},C0={},rD=function(e,t,r){let o=Promise.resolve();if(t&&t.length>0){let u=function(m){return Promise.all(m.map(v=>Promise.resolve(v).then(w=>({status:"fulfilled",value:w}),w=>({status:"rejected",reason:w}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),f=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));o=u(t.map(m=>{if(m=nD(m),m in C0)return;C0[m]=!0;const v=m.endsWith(".css"),w=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${w}`))return;const E=document.createElement("link");if(E.rel=v?"stylesheet":tD,v||(E.as="script"),E.crossOrigin="",E.href=m,f&&E.setAttribute("nonce",f),document.head.appendChild(E),v)return new Promise((P,C)=>{E.addEventListener("load",P),E.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${m}`)))})}))}function a(u){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=u,window.dispatchEvent(d),!d.defaultPrevented)throw u}return o.then(u=>{for(const d of u||[])d.status==="rejected"&&a(d.reason);return e().catch(a)})},XT=H.createContext(void 0),Yf="admin@noisy-le-sec.fr",P0="admin123",iD=({children:n})=>{const[e,t]=H.useState(null),[r,o]=H.useState(!0);H.useEffect(()=>U2(il,w=>{t(w),o(!1)}),[]);const m={currentUser:e,isAuthenticated:!!e,isLoading:r,login:async(v,w)=>{try{return await y0(il,v,w),!0}catch(E){return console.error("Erreur de connexion:",E),!1}},logout:async()=>{try{await j2(il)}catch(v){console.error("Erreur de déconnexion:",v)}},changePassword:async v=>{if(!e)throw new Error("Aucun utilisateur connecté");try{await L2(e,v)}catch(w){throw console.error("Erreur lors du changement de mot de passe:",w),w}},initializeAdmin:async()=>{try{const v=gl(Cn,"parametres","admin");if(!(await kN(v)).exists())try{const E=await O2(il,Yf,P0);return await NN(v,{email:Yf,createdAt:new Date().toISOString()}),console.log("Compte admin créé avec succès"),E.user}catch(E){console.error("Erreur lors de la création du compte admin:",E);try{await y0(il,Yf,P0)}catch(P){console.error("Erreur lors de la connexion avec les identifiants par défaut:",P)}}}catch(v){console.error("Erreur lors de l'initialisation admin:",v)}}};return O.jsx(XT.Provider,{value:m,children:n})},jm=()=>{const n=H.useContext(XT);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider");return n},sD=()=>{const[n,e]=H.useState([]),[t,r]=H.useState(!0),[o,a]=H.useState([]),[u,d]=H.useState(!1),[f,m]=H.useState(""),[v,w]=H.useState(""),[E,P]=H.useState(null),{logout:C,isAuthenticated:L,currentUser:D}=jm(),U=Nl();H.useEffect(()=>{if(!L){U("/login");return}const I=async()=>{try{const N=Ci(Cn,"agents"),V=await yl(N),A=[];V.forEach(ce=>{A.push({id:ce.id,...ce.data()})}),a(A)}catch(N){console.error("Erreur lors de la récupération des agents:",N)}},S=async()=>{try{const N=Ci(Cn,"pointages"),V=Qc(N,dT("timestamp","desc")),A=await yl(V),ce=[];A.forEach(We=>{ce.push({id:We.id,...We.data()})}),e(ce),r(!1)}catch(N){console.error("Erreur lors de la récupération des pointages:",N),r(!1)}};I(),S();const x=setInterval(()=>{S()},3e4);return()=>clearInterval(x)},[L,U]);const W=async()=>{try{await C(),U("/login")}catch(I){console.error("Erreur lors de la déconnexion:",I)}},B=I=>{const S=o.find(x=>x.ip===I);return S?S.nom:I},J=async()=>{if(!(!f||!v))try{if(E&&E.id){const I=gl(Cn,"agents",E.id);await o0(I,{ip:f,nom:v}),a(o.map(S=>S.id===E.id?{...S,ip:f,nom:v}:S))}else{const I=Ci(Cn,"agents"),S=Qc(I,Cc("ip","==",f)),x=await yl(S);if(x.empty){const N=await km(Ci(Cn,"agents"),{ip:f,nom:v,dateCreation:new Date().toISOString()});a([...o,{id:N.id,ip:f,nom:v}])}else{const N=x.docs[0],V=gl(Cn,"agents",N.id);await o0(V,{nom:v}),a(o.map(A=>A.id===N.id?{...A,nom:v}:A))}}m(""),w(""),P(null),d(!1)}catch(I){console.error("Erreur lors de l'ajout/modification de l'agent:",I)}},ie=I=>{P(I),m(I.ip),w(I.nom),d(!0)},Y=async I=>{if(I&&window.confirm("Êtes-vous sûr de vouloir supprimer cet agent ?"))try{await bN(gl(Cn,"agents",I)),a(o.filter(S=>S.id!==I))}catch(S){console.error("Erreur lors de la suppression de l'agent:",S)}},k=async()=>{try{const{exportAndDownloadPointages:I}=await rD(async()=>{const{exportAndDownloadPointages:S}=await import("./exportUtils-KkUPRwAh.js");return{exportAndDownloadPointages:S}},[]);await I()}catch(I){console.error("Erreur lors de l'export CSV:",I),alert("Une erreur est survenue lors de l'export des données. Veuillez réessayer.")}};return O.jsxs("div",{className:"min-h-screen bg-gray-50 p-4",children:[O.jsxs("div",{className:"max-w-7xl mx-auto",children:[O.jsxs("div",{className:"flex justify-between items-center mb-6",children:[O.jsxs("div",{className:"flex items-center",children:[O.jsx("img",{src:"/images/Logo_Noisy_Sec.svg",alt:"Logo Mairie de Noisy-le-Sec",className:"h-16 mr-4"}),O.jsx("h1",{className:"text-2xl font-bold text-blue-800",children:"Administration du Système de Pointage"})]}),O.jsxs("div",{className:"flex items-center space-x-4",children:[D&&O.jsx("span",{className:"text-gray-600",children:D.email}),O.jsx("a",{href:"/",className:"text-blue-600 hover:text-blue-800",children:"Accueil"}),O.jsx("button",{onClick:W,className:"text-red-600 hover:text-red-800",children:"Déconnexion"})]})]}),O.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[O.jsxs("div",{className:"flex justify-between items-center mb-4",children:[O.jsx("h2",{className:"text-xl font-semibold text-blue-700",children:"Gestion des Agents"}),O.jsx("button",{onClick:()=>{P(null),m(""),w(""),d(!0)},className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700",children:"Ajouter un agent"})]}),o.length===0?O.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4",children:O.jsx("p",{className:"text-yellow-700",children:"Aucun agent enregistré. Ajoutez des agents pour associer les adresses IP à des noms."})}):O.jsx("div",{className:"overflow-x-auto",children:O.jsxs("table",{className:"min-w-full bg-white",children:[O.jsx("thead",{className:"bg-gray-100",children:O.jsxs("tr",{children:[O.jsx("th",{className:"py-3 px-4 text-left text-sm font-semibold text-gray-700",children:"Nom de l'agent"}),O.jsx("th",{className:"py-3 px-4 text-left text-sm font-semibold text-gray-700",children:"Adresse IP"}),O.jsx("th",{className:"py-3 px-4 text-left text-sm font-semibold text-gray-700",children:"Actions"})]})}),O.jsx("tbody",{className:"divide-y divide-gray-200",children:o.map((I,S)=>O.jsxs("tr",{className:S%2===0?"bg-gray-50":"bg-white",children:[O.jsx("td",{className:"py-3 px-4 text-sm text-gray-700",children:I.nom}),O.jsx("td",{className:"py-3 px-4 text-sm text-gray-700",children:I.ip}),O.jsxs("td",{className:"py-3 px-4 text-sm",children:[O.jsx("button",{onClick:()=>ie(I),className:"text-blue-600 hover:text-blue-800 mr-3",children:"Modifier"}),O.jsx("button",{onClick:()=>Y(I.id),className:"text-red-600 hover:text-red-800",children:"Supprimer"})]})]},I.id||S))})]})})]}),O.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[O.jsxs("div",{className:"flex justify-between items-center mb-4",children:[O.jsx("h2",{className:"text-xl font-semibold text-blue-700",children:"Tableau des Pointages"}),O.jsx("button",{onClick:k,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",children:"Exporter en CSV"})]}),t?O.jsxs("div",{className:"text-center p-8",children:[O.jsx("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-blue-600 border-r-transparent"}),O.jsx("p",{className:"mt-2 text-gray-600",children:"Chargement des données..."})]}):n.length===0?O.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4",children:O.jsx("p",{className:"text-yellow-700",children:"Aucun pointage enregistré pour le moment."})}):O.jsx("div",{className:"overflow-x-auto",children:O.jsxs("table",{className:"min-w-full bg-white",children:[O.jsx("thead",{className:"bg-blue-100",children:O.jsxs("tr",{children:[O.jsx("th",{className:"py-3 px-4 text-left text-sm font-semibold text-blue-800",children:"Date"}),O.jsx("th",{className:"py-3 px-4 text-left text-sm font-semibold text-blue-800",children:"Heure"}),O.jsx("th",{className:"py-3 px-4 text-left text-sm font-semibold text-blue-800",children:"Type"}),O.jsx("th",{className:"py-3 px-4 text-left text-sm font-semibold text-blue-800",children:"Agent"}),O.jsx("th",{className:"py-3 px-4 text-left text-sm font-semibold text-blue-800",children:"IP"}),O.jsx("th",{className:"py-3 px-4 text-left text-sm font-semibold text-blue-800",children:"Adresse"})]})}),O.jsx("tbody",{className:"divide-y divide-gray-200",children:n.map((I,S)=>{const x=new Date(I.timestamp),N=new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"}).format(x),V=new Intl.DateTimeFormat("fr-FR",{hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(x);return O.jsxs("tr",{className:S%2===0?"bg-gray-50":"bg-white",children:[O.jsx("td",{className:"py-3 px-4 text-sm text-gray-700",children:N}),O.jsx("td",{className:"py-3 px-4 text-sm text-gray-700",children:V}),O.jsx("td",{className:"py-3 px-4 text-sm",children:O.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${I.type==="entree"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:I.type==="entree"?"Entrée":"Sortie"})}),O.jsx("td",{className:"py-3 px-4 text-sm text-gray-700 font-medium",children:B(I.ip)}),O.jsx("td",{className:"py-3 px-4 text-sm text-gray-700",children:I.ip}),O.jsx("td",{className:"py-3 px-4 text-sm text-gray-700 truncate max-w-xs",children:I.address})]},I.id||S)})})]})})]}),O.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[O.jsx("h2",{className:"text-xl font-semibold text-blue-700 mb-4",children:"Statistiques"}),t?O.jsx("div",{className:"text-center p-4",children:O.jsx("p",{className:"text-gray-600",children:"Chargement des statistiques..."})}):O.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[O.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-100",children:[O.jsx("p",{className:"text-sm text-gray-600",children:"Total des pointages"}),O.jsx("p",{className:"text-2xl font-bold text-blue-800",children:n.length})]}),O.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-100",children:[O.jsx("p",{className:"text-sm text-gray-600",children:"Entrées"}),O.jsx("p",{className:"text-2xl font-bold text-green-800",children:n.filter(I=>I.type==="entree").length})]}),O.jsxs("div",{className:"bg-red-50 p-4 rounded-lg border border-red-100",children:[O.jsx("p",{className:"text-sm text-gray-600",children:"Sorties"}),O.jsx("p",{className:"text-2xl font-bold text-red-800",children:n.filter(I=>I.type==="sortie").length})]}),O.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg border border-purple-100",children:[O.jsx("p",{className:"text-sm text-gray-600",children:"Agents enregistrés"}),O.jsx("p",{className:"text-2xl font-bold text-purple-800",children:o.length})]})]})]})]}),u&&O.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:O.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 max-w-md w-full",children:[O.jsx("h2",{className:"text-xl font-semibold text-blue-700 mb-4",children:E?"Modifier un agent":"Ajouter un agent"}),O.jsxs("div",{className:"space-y-4",children:[O.jsxs("div",{children:[O.jsx("label",{htmlFor:"agentName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom de l'agent"}),O.jsx("input",{type:"text",id:"agentName",value:v,onChange:I=>w(I.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),O.jsxs("div",{children:[O.jsx("label",{htmlFor:"agentIp",className:"block text-sm font-medium text-gray-700 mb-1",children:"Adresse IP"}),O.jsx("input",{type:"text",id:"agentIp",value:f,onChange:I=>m(I.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),O.jsxs("div",{className:"flex justify-end space-x-3",children:[O.jsx("button",{type:"button",onClick:()=>d(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-100",children:"Annuler"}),O.jsx("button",{type:"button",onClick:J,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",children:E?"Mettre à jour":"Ajouter"})]})]})]})}),O.jsxs("div",{className:"mt-6 text-center text-sm text-gray-500",children:["© ",new Date().getFullYear()," - Ville de Noisy-le-Sec - Tous droits réservés"]})]})},oD=()=>{const[n,e]=H.useState("admin@noisy-le-sec.fr"),[t,r]=H.useState(""),[o,a]=H.useState(""),[u,d]=H.useState(!1),[f,m]=H.useState(""),[v,w]=H.useState(""),[E,P]=H.useState(!1),C=Nl(),{login:L,changePassword:D,initializeAdmin:U}=jm(),W=async()=>{try{P(!0),await U(),P(!1)}catch(ie){console.error("Erreur lors de l'initialisation admin:",ie),P(!1)}},B=async ie=>{ie.preventDefault(),a(""),P(!0);try{await L(n,t)?C("/admin"):(a("Identifiants incorrects"),await W())}catch(Y){a("Erreur de connexion. Veuillez réessayer."),console.error("Erreur de connexion:",Y)}finally{P(!1)}},J=async ie=>{if(ie.preventDefault(),a(""),f!==v){a("Les mots de passe ne correspondent pas");return}if(f.length<6){a("Le mot de passe doit contenir au moins 6 caractères");return}P(!0);try{await D(f),d(!1),m(""),w(""),alert("Mot de passe modifié avec succès")}catch(Y){a("Erreur lors du changement de mot de passe. Veuillez vous reconnecter et réessayer."),console.error("Erreur de changement de mot de passe:",Y)}finally{P(!1)}};return O.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-50 p-4",children:[O.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 max-w-md w-full",children:[O.jsx("div",{className:"flex justify-center mb-6",children:O.jsx("img",{src:"/images/Logo_Noisy_Sec.svg",alt:"Logo Mairie de Noisy-le-Sec",className:"h-24"})}),O.jsx("h1",{className:"text-2xl font-bold text-center text-blue-800 mb-6",children:u?"Changer le mot de passe":"Accès Administration"}),o&&O.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-4",children:O.jsx("p",{children:o})}),u?O.jsxs("form",{onSubmit:J,className:"space-y-4",children:[O.jsxs("div",{children:[O.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nouveau mot de passe"}),O.jsx("input",{type:"password",id:"newPassword",value:f,onChange:ie=>m(ie.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),O.jsxs("div",{children:[O.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirmer le mot de passe"}),O.jsx("input",{type:"password",id:"confirmPassword",value:v,onChange:ie=>w(ie.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),O.jsxs("div",{className:"flex justify-between items-center",children:[O.jsx("button",{type:"button",onClick:()=>{d(!1),a("")},className:"text-blue-600 hover:text-blue-800 text-sm",children:"Retour à la connexion"}),O.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",disabled:E,children:E?"Enregistrement...":"Enregistrer"})]})]}):O.jsxs("form",{onSubmit:B,className:"space-y-4",children:[O.jsxs("div",{children:[O.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),O.jsx("input",{type:"email",id:"email",value:n,onChange:ie=>e(ie.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,disabled:!0}),O.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email par défaut: admin@noisy-le-sec.fr"})]}),O.jsxs("div",{children:[O.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Mot de passe"}),O.jsx("input",{type:"password",id:"password",value:t,onChange:ie=>r(ie.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),O.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Mot de passe par défaut: admin123"})]}),O.jsxs("div",{className:"flex justify-between items-center",children:[O.jsx("button",{type:"button",onClick:()=>d(!0),className:"text-blue-600 hover:text-blue-800 text-sm",children:"Changer le mot de passe"}),O.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",disabled:E,children:E?"Connexion...":"Se connecter"})]})]})]}),O.jsx("div",{className:"mt-6 text-center",children:O.jsx("a",{href:"/",className:"text-blue-600 hover:text-blue-800",children:"Retour à l'accueil"})}),O.jsxs("div",{className:"mt-6 text-sm text-gray-500",children:["© ",new Date().getFullYear()," - Ville de Noisy-le-Sec - Tous droits réservés"]})]})},x0=({children:n})=>{const{isAuthenticated:e,isLoading:t}=jm();return t?O.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[O.jsx("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-blue-600 border-r-transparent"}),O.jsx("p",{className:"ml-2 text-gray-600",children:"Vérification de l'authentification..."})]}):e?O.jsx(O.Fragment,{children:n}):O.jsx(tS,{to:"/login",replace:!0})},aD=async()=>{try{const n={ip:"192.168.1.100",type:"entree",timestamp:new Date().toISOString(),date:new Date().toISOString().split("T")[0],address:"Adresse de test",latitude:48.8566,longitude:2.3522,token:`QR-${new Date().toISOString().split("T")[0]}`},e=await km(Ci(Cn,"pointages"),n);return console.log("Document écrit avec ID:",e.id),e.id}catch(n){throw console.error("Erreur lors de l'écriture dans Firebase:",n),n}},lD=async()=>{try{const n=Ci(Cn,"pointages"),e=Qc(n,dT("timestamp","desc")),t=await yl(e),r=[];return t.forEach(o=>{r.push({id:o.id,...o.data()})}),console.log("Documents lus:",r.length),r}catch(n){throw console.error("Erreur lors de la lecture depuis Firebase:",n),n}},uD=async n=>{try{const e=await aD();setTimeout(async()=>{const t=await lD(),r=t.some(o=>o.id===e);n({success:r,message:r?"Synchronisation réussie: le document écrit a été lu avec succès":"Échec de synchronisation: le document écrit n'a pas été trouvé",records:t})},2e3)}catch(e){console.error("Erreur lors du test de synchronisation:",e);const t=e instanceof Error?e.message:"Erreur inconnue";n({success:!1,message:`Erreur lors du test de synchronisation: ${t}`,records:[]})}},cD=()=>{const n=window.history.length>1,e=document.querySelectorAll('a[href="/"]').length>0;return{canGoBack:n,hasNavigationLinks:e,isRestricted:!n&&!e}},hD=()=>{const[n,e]=H.useState(null),[t,r]=H.useState(!1),[o,a]=H.useState(null),u=()=>{r(!0),uD(f=>{e(f),r(!1)})},d=()=>{const f=cD();a(f)};return O.jsx("div",{className:"min-h-screen bg-gray-50 p-4",children:O.jsxs("div",{className:"max-w-4xl mx-auto",children:[O.jsx("h1",{className:"text-2xl font-bold text-blue-800 mb-6",children:"Tests de Synchronisation Firebase"}),O.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[O.jsx("h2",{className:"text-xl font-semibold text-blue-700 mb-4",children:"Test de Synchronisation Multi-Appareils"}),O.jsx("p",{className:"mb-4 text-gray-700",children:"Ce test vérifie que les données écrites dans Firebase sont bien accessibles en lecture, simulant ainsi l'utilisation depuis plusieurs appareils."}),O.jsx("button",{onClick:u,disabled:t,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 mb-4",children:t?"Test en cours...":"Lancer le test de synchronisation"}),n&&O.jsxs("div",{className:`p-4 rounded-lg ${n.success?"bg-green-100":"bg-red-100"} mb-4`,children:[O.jsx("p",{className:`font-bold ${n.success?"text-green-700":"text-red-700"}`,children:n.success?"Succès":"Échec"}),O.jsx("p",{className:"text-gray-700",children:n.message}),O.jsxs("p",{className:"text-gray-700 mt-2",children:["Nombre de documents lus: ",n.records.length]})]})]}),O.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[O.jsx("h2",{className:"text-xl font-semibold text-blue-700 mb-4",children:"Test de Restriction Post-Pointage"}),O.jsx("p",{className:"mb-4 text-gray-700",children:"Ce test vérifie que la navigation est bien restreinte après un pointage."}),O.jsx("button",{onClick:d,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 mb-4",children:"Tester la restriction post-pointage"}),o&&O.jsxs("div",{className:`p-4 rounded-lg ${o.isRestricted?"bg-green-100":"bg-red-100"} mb-4`,children:[O.jsx("p",{className:`font-bold ${o.isRestricted?"text-green-700":"text-red-700"}`,children:o.isRestricted?"Restriction active":"Restriction inactive"}),O.jsxs("p",{className:"text-gray-700",children:["Navigation arrière possible: ",o.canGoBack?"Oui":"Non"]}),O.jsxs("p",{className:"text-gray-700",children:["Liens de navigation présents: ",o.hasNavigationLinks?"Oui":"Non"]})]})]}),O.jsx("div",{className:"text-center mt-6",children:O.jsx("a",{href:"/",className:"text-blue-600 hover:text-blue-800",children:"Retour à l'accueil"})})]})})};function dD(){return O.jsx(iD,{children:O.jsx(PS,{children:O.jsxs(rS,{children:[O.jsx(gs,{path:"/qr-admin",element:O.jsx(lR,{})}),O.jsx(gs,{path:"/pointage",element:O.jsx(eD,{})}),O.jsx(gs,{path:"/login",element:O.jsx(oD,{})}),O.jsx(gs,{path:"/admin",element:O.jsx(x0,{children:O.jsx(sD,{})})}),O.jsx(gs,{path:"/test",element:O.jsx(x0,{children:O.jsx(hD,{})})}),O.jsx(gs,{path:"/",element:O.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-50",children:[O.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full",children:[O.jsx("div",{className:"flex justify-center mb-6",children:O.jsx("img",{src:"/images/Logo_Noisy_Sec.svg",alt:"Logo Mairie de Noisy-le-Sec",className:"h-24"})}),O.jsx("h1",{className:"text-2xl font-bold text-center text-blue-800 mb-6",children:"Application de Pointage - Ville de Noisy-le-Sec"}),O.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[O.jsx("a",{href:"/qr-admin",className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 text-center transition-colors",children:"QR Admin"}),O.jsx("a",{href:"/login",className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 text-center transition-colors",children:"Administration"})]})]}),O.jsxs("div",{className:"mt-6 text-sm text-gray-500",children:["© ",new Date().getFullYear()," - Ville de Noisy-le-Sec - Tous droits réservés"]})]})})]})})})}hI.createRoot(document.getElementById("root")).render(O.jsx(H.StrictMode,{children:O.jsx(dD,{})}));export{Ci as c,Cn as d,yl as g,dT as o,Qc as q};
